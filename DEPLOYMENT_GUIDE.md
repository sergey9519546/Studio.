# AUTONOMOUS REMEDIATION SYSTEM DEPLOYMENT GUIDE

## Overview

This guide provides comprehensive deployment instructions for the "Cognitive Architecture of Autonomous Remediation" system across different agentic IDE platforms.

## System Components

The autonomous remediation system consists of:

1. **Global System Instruction** (`~/.gemini/GEMINI.md`) - Core AI persona and philosophy
2. **Workspace Rules** (`.agent/rules/remediation.md`) - Detailed execution protocols
3. **Workflow Orchestration** (`.agent/workflows/full_fix.yaml`) - Automated remediation sequence
4. **TDR Protocol Engine** (`.agent/tdr_protocol.js`) - Test-driven remediation framework
5. **Verification Engine** (`.agent/verification_engine.js`) - Comprehensive validation suite
6. **Safety Configuration** (`.agent/safety_config.json`) - Security guardrails and policies

---

## PLATFORM-SPECIFIC DEPLOYMENT

### 1. GOOGLE ANTIGRAVITY DEPLOYMENT

#### Step 1: Global Configuration

```bash
# Create global directory if it doesn't exist
mkdir -p ~/.gemini

# The global instruction file should be automatically created at:
# ~/.gemini/GEMINI.md
```

#### Step 2: Workspace Setup

```bash
# Navigate to your project root
cd /path/to/your/project

# Create agent directory structure
mkdir -p .agent/rules
mkdir -p .agent/workflows

# Copy the remediation files (they should be auto-generated by the system)
# Files will be created at:
# .agent/rules/remediation.md
# .agent/workflows/full_fix.yaml
# .agent/CONTEXT_REPORT_TEMPLATE.md
# .agent/tdr_protocol.js
# .agent/verification_engine.js
# .agent/safety_config.json
```

#### Step 3: Extension Integration

Create or update `.gemini/extensions/autonomous-remediation.json`:

```json
{
  "name": "autonomous-remediation",
  "version": "1.0.0",
  "description": "Cognitive Architecture for Autonomous Code Remediation",
  "mcpServers": {
    "tdr-protocol": {
      "command": "node",
      "args": [".agent/tdr_protocol.js"],
      "timeout": 300000
    },
    "verification-engine": {
      "command": "node",
      "args": [".agent/verification_engine.js"],
      "timeout": 600000
    }
  },
  "contextFileName": "CONTEXT_REPORT.md",
  "rulesFile": ".agent/rules/remediation.md",
  "workflowFile": ".agent/workflows/full_fix.yaml"
}
```

#### Step 4: Activation

1. Open Antigravity
2. The system instruction will be automatically loaded from `~/.gemini/GEMINI.md`
3. Workspace rules activate when entering the project directory
4. Use `/fix_all` command or trigger the workflow manually

---

### 2. VS CODE + AGENTIC EXTENSIONS DEPLOYMENT

#### Prerequisites

- VS Code with agentic extension installed (Cursor, Cline, etc.)
- Node.js 16+ for running verification scripts

#### Step 1: Global Rules (Extension-Specific)

Depending on your agentic extension, create the appropriate rules file:

**For Cursor:**

```bash
# Create .cursorrules in project root
touch .cursorrules
```

**For Cline:**

```bash
# Create .cline/rules.md
mkdir -p .cline
touch .cline/rules.md
```

**For Other Extensions:**
Check your extension's documentation for the rules file location.

#### Step 2: Copy System Instructions

Paste the following into your rules file:

```markdown
# AUTONOMOUS PRINCIPAL ARCHITECT SYSTEM INSTRUCTION

## IDENTITY & OBJECTIVE
You are the Principal Software Architect and Lead DevOps Engineer for this workspace...

[Copy the complete system instruction from .agent/rules/remediation.md]
```

#### Step 3: Script Setup

```bash
# Make scripts executable
chmod +x .agent/tdr_protocol.js
chmod +x .agent/verification_engine.js

# Install dependencies if needed
npm install fs-extra chalk cli-progress
```

#### Step 4: Extension Configuration

Configure your agentic extension to:

- Load rules from the project-specific rules file
- Enable multi-file editing
- Allow terminal commands (with safety restrictions)
- Enable "Composer" or "Flow" mode for complex refactoring

#### Step 5: Activation Commands

Use your extension's command palette or chat interface with:

- `@fix_all` - Trigger complete autonomous remediation
- `@analyze` - Run context analysis only
- `@verify` - Execute verification suite
- `@tdr` - Run test-driven remediation on specific issue

---

### 3. GENERIC AGENTIC IDE DEPLOYMENT

For other agentic IDEs supporting system instructions:

#### Step 1: Instruction Injection

1. Locate the system prompt configuration file
2. Inject the complete system instruction from `~/.gemini/GEMINI.md`
3. Ensure the instruction loads on workspace activation

#### Step 2: Tool Integration

If the IDE supports MCP (Model Context Protocol):

```json
{
  "mcpServers": {
    "autonomous-remediation": {
      "command": "node",
      "args": [".agent/tdr_protocol.js"],
      "env": {
        "PROJECT_ROOT": "${workspaceFolder}"
      }
    }
  }
}
```

#### Step 3: Workflow Binding

Bind the remediation workflow to IDE commands:

- `Ctrl+Shift+R` → Full remediation
- `Ctrl+Shift+A` → Analysis only
- `Ctrl+Shift+V` → Verification

---

## CONFIGURATION VALIDATION

### Automated Validation

Run the verification script to ensure proper setup:

```bash
# Validate configuration
node .agent/verification_engine.js --validate-config

# Expected output:
# ✅ Global system instruction loaded
# ✅ Workspace rules activated
# ✅ Safety policies enforced
# ✅ Workflow orchestration ready
# ✅ TDR protocol initialized
```

### Manual Validation Checklist

- [ ] Global instruction file exists at `~/.gemini/GEMINI.md`
- [ ] Workspace rules loaded in `.agent/rules/remediation.md`
- [ ] Workflow file present at `.agent/workflows/full_fix.yaml`
- [ ] TDR protocol script executable
- [ ] Verification engine functional
- [ ] Safety configuration active
- [ ] Agent can read/write project files
- [ ] Terminal commands restricted appropriately

---

## USAGE PATTERNS

### Standard Remediation Workflow

1. **Trigger**: User types `/fix_all` or equivalent command
2. **Phase 1**: Context ingestion and analysis
3. **Phase 2**: Plan generation with human review
4. **Phase 3**: Autonomous remediation execution
5. **Phase 4**: Integration and configuration
6. **Phase 5**: Full verification and reporting

### Emergency Mode

For critical issues requiring immediate action:

```bash
# Override safety limits (use with caution)
TURBO_MODE=true node .agent/tdr_protocol.js --emergency-fix
```

### Incremental Mode

For targeted fixes without full remediation:

```bash
# Fix specific file
node .agent/tdr_protocol.js --target src/components/BuggyComponent.tsx

# Fix specific issue type
node .agent/tdr_protocol.js --issue-type missing_feature
```

---

## TROUBLESHOOTING

### Common Issues

#### Issue: Agent cannot execute terminal commands

**Solution**: Check safety configuration permissions in `.agent/safety_config.json`

#### Issue: Context analysis fails

**Solution**: Ensure project structure is accessible and readable

#### Issue: Workflow doesn't trigger

**Solution**: Verify workflow file syntax and IDE extension compatibility

#### Issue: TDR protocol hangs

**Solution**: Check for infinite loops in verification steps, adjust timeouts

### Debug Mode

Enable verbose logging for troubleshooting:

```bash
# Enable debug logging
DEBUG=true VERBOSE=true node .agent/tdr_protocol.js --debug

# Check logs
tail -f .agent/TDR_LOG.md
tail -f .agent/VERIFICATION_LOG.md
```

### Recovery Procedures

1. **Soft Reset**: Clear temporary artifacts

   ```bash
   rm -rf .agent/temp/
   rm -f .agent/ERROR_LOG.md
   ```

2. **Hard Reset**: Restore from backup

   ```bash
   rm -rf .agent/
   # Re-run deployment setup
   ```

3. **Emergency Stop**: Kill all running processes

   ```bash
   pkill -f "tdr_protocol"
   pkill -f "verification_engine"
   ```

---

## PERFORMANCE OPTIMIZATION

### Memory Management

- Limit concurrent file operations to 10
- Use streaming for large file processing
- Implement garbage collection checkpoints

### Timeout Configuration

```json
{
  "timeouts": {
    "file_operation": 5000,
    "network_request": 10000,
    "build_process": 300000,
    "test_execution": 180000
  }
}
```

### Caching Strategy

- Cache dependency analysis results
- Store parsed ASTs for repeated analysis
- Cache verification results when possible

---

## SECURITY CONSIDERATIONS

### Access Control

- Never commit API keys or secrets
- Use environment variables for sensitive configuration
- Implement principle of least privilege

### Audit Trail

All actions are logged in:

- `.agent/TDR_LOG.md` - Remediation activities
- `.agent/VERIFICATION_LOG.md` - Validation results
- `.agent/ERROR_LOG.md` - Error conditions

### Safe Mode

For high-risk operations, enable additional restrictions:

```json
{
  "safe_mode": true,
  "require_confirmation": true,
  "max_changes_per_minute": 5
}
```

---

## MONITORING AND MAINTENANCE

### Health Checks

Run daily health verification:

```bash
#!/bin/bash
# Daily health check script
node .agent/verification_engine.js --health-check
```

### Log Rotation

Configure log retention:

```json
{
  "logging": {
    "max_log_size": "10MB",
    "retention_days": 30,
    "compress_old_logs": true
  }
}
```

### Updates

Keep the system updated:

```bash
# Check for updates
npm outdated @autonomous-remediation/core

# Update components
npm update @autonomous-remediation/core
```

---

## SUPPORT AND RESOURCES

### Documentation

- **API Reference**: See individual script JSDoc comments
- **Configuration Guide**: This document
- **Troubleshooting**: Check logs and error files

### Community Resources

- **GitHub Issues**: Report bugs and feature requests
- **Discussions**: Share experiences and best practices
- **Wiki**: Extended configuration examples

### Professional Services

For enterprise deployment and customization:

- Contact: <autonomous-remediation@support.com>
- Enterprise SLA options available
- Custom integration services

---

**Deployment completed successfully!**

The Autonomous Principal Architect is now ready to transform your development workflow with intelligent, autonomous code remediation capabilities.
