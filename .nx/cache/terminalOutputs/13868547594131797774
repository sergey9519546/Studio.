Compiling TypeScript files for project "api"...
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/gemini-analyst.service.ts[0m:[93m24[0m:[93m5[0m - [91merror[0m[90m TS2322: [0mType '({ name: string; description: string; parameters: { type: string; properties: { title: { type: string; description: string; }; description: { type: string; description: string; }; budget: { type: string; description: string; }; projectId?: undefined; freelancerId?: undefined; role?: undefined; }; required: string[];...' is not assignable to type 'Tool[]'.[39m[22m
[1m[31m  Type '{ name: string; description: string; parameters: { type: string; properties: { title: { type: string; description: string; }; description: { type: string; description: string; }; budget: { type: string; description: string; }; projectId?: undefined; freelancerId?: undefined; role?: undefined; }; required: string[]; ...' is not assignable to type 'Tool'.[39m[22m
[1m[31m    Type '{ name: string; description: string; parameters: { type: string; properties: { title: { type: string; description: string; }; description: { type: string; description: string; }; budget: { type: string; description: string; }; projectId?: undefined; freelancerId?: undefined; role?: undefined; }; required: string[]; ...' is not assignable to type 'Tool'.[39m[22m
[1m[31m      Types of property 'function' are incompatible.[39m[22m
[1m[31m        Type '({ title, description, budget }: { title: string; description: string; budget: number; }) => Promise<{ id: string; budget: number | null; client: string | null; description: string | null; status: string; title: string; startDate: Date | null; endDate: Date | null; updatedAt: Date; createdAt: Date; }>' is not assignable to type '(args: Record<string, unknown>) => unknown'.[39m[22m
[1m[31m          Types of parameters '__0' and 'args' are incompatible.[39m[22m
[1m[31m            Type 'Record<string, unknown>' is missing the following properties from type '{ title: string; description: string; budget: number; }': title, description, budget[39m[22m
[1m[31m[39m[22m
[1m[31m[7m24[0m     this.tools = getTools(this.prisma);[39m[22m
[1m[31m[7m  [0m [91m    ~~~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/gemini-analyst.service.ts[0m:[93m30[0m:[93m119[0m - [91merror[0m[90m TS2304: [0mCannot find name 'ToolCall'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m30[0m   async chat(context: string, messages: Array<{ role: string; content: string }> = []): Promise<string | { toolCalls: ToolCall[] }> {[39m[22m
[1m[31m[7m  [0m [91m                                                                                                                      ~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/gemini-analyst.service.ts[0m:[93m38[0m:[93m46[0m - [91merror[0m[90m TS2304: [0mCannot find name 'ToolCall'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m38[0m       return cached as string | { toolCalls: ToolCall[] };[39m[22m
[1m[31m[7m  [0m [91m                                             ~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/gemini-analyst.service.ts[0m:[93m68[0m:[93m69[0m - [91merror[0m[90m TS2345: [0mArgument of type 'Tool[]' is not assignable to parameter of type 'Record<string, unknown>[]'.[39m[22m
[1m[31m  Type 'Tool' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m    Index signature for type 'string' is missing in type 'Tool'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m68[0m     const result = await this.vertexAI.chat(messages, systemPrompt, this.tools);[39m[22m
[1m[31m[7m  [0m [91m                                                                    ~~~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m56[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType '(data: FreelancerAnalysisData) => string' is not assignable to type '(data: unknown) => string'.[39m[22m
[1m[31m  Types of parameters 'data' and 'data' are incompatible.[39m[22m
[1m[31m    Type 'unknown' is not assignable to type 'FreelancerAnalysisData'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m56[0m         userPrompt: (data: FreelancerAnalysisData) => `[39m[22m
[1m[31m[7m  [0m [91m        ~~~~~~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m  [96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m6[0m:[93m5[0m[39m[22m
[1m[31m    [7m6[0m     userPrompt: (data: unknown) => string;[39m[22m
[1m[31m    [7m [0m [96m    ~~~~~~~~~~[0m[39m[22m
[1m[31m    The expected type comes from property 'userPrompt' which is declared here on type 'PromptTemplate'[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m93[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType '(data: ProjectProfitabilityData) => string' is not assignable to type '(data: unknown) => string'.[39m[22m
[1m[31m  Types of parameters 'data' and 'data' are incompatible.[39m[22m
[1m[31m    Type 'unknown' is not assignable to type 'ProjectProfitabilityData'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m93[0m         userPrompt: (data: ProjectProfitabilityData) => `[39m[22m
[1m[31m[7m  [0m [91m        ~~~~~~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m  [96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m6[0m:[93m5[0m[39m[22m
[1m[31m    [7m6[0m     userPrompt: (data: unknown) => string;[39m[22m
[1m[31m    [7m [0m [96m    ~~~~~~~~~~[0m[39m[22m
[1m[31m    The expected type comes from property 'userPrompt' which is declared here on type 'PromptTemplate'[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m127[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType '(context: string) => string' is not assignable to type '(data: unknown) => string'.[39m[22m
[1m[31m  Types of parameters 'context' and 'data' are incompatible.[39m[22m
[1m[31m    Type 'unknown' is not assignable to type 'string'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m127[0m         userPrompt: (context: string) => context[39m[22m
[1m[31m[7m   [0m [91m        ~~~~~~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m  [96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/prompts/templates.ts[0m:[93m6[0m:[93m5[0m[39m[22m
[1m[31m    [7m6[0m     userPrompt: (data: unknown) => string;[39m[22m
[1m[31m    [7m [0m [96m    ~~~~~~~~~~[0m[39m[22m
[1m[31m    The expected type comes from property 'userPrompt' which is declared here on type 'PromptTemplate'[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/testing/test-cases.ts[0m:[93m105[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'string' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m105[0m         input: 'What projects are currently active?',[39m[22m
[1m[31m[7m   [0m [91m        ~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m  [96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/testing/prompt-tester.service.ts[0m:[93m8[0m:[93m5[0m[39m[22m
[1m[31m    [7m8[0m     input: Record<string, unknown>;[39m[22m
[1m[31m    [7m [0m [96m    ~~~~~[0m[39m[22m
[1m[31m    The expected type comes from property 'input' which is declared here on type 'PromptTestCase'[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/testing/test-cases.ts[0m:[93m113[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'string' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m113[0m         input: 'Who are our top performing freelancers?',[39m[22m
[1m[31m[7m   [0m [91m        ~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m  [96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/testing/prompt-tester.service.ts[0m:[93m8[0m:[93m5[0m[39m[22m
[1m[31m    [7m8[0m     input: Record<string, unknown>;[39m[22m
[1m[31m    [7m [0m [96m    ~~~~~[0m[39m[22m
[1m[31m    The expected type comes from property 'input' which is declared here on type 'PromptTestCase'[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/vertex-ai.service.ts[0m:[93m127[0m:[93m41[0m - [91merror[0m[90m TS2345: [0mArgument of type '{}' is not assignable to parameter of type 'Record<string, unknown>'.[39m[22m
[1m[31m  Index signature for type 'string' is missing in type '{}'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m127[0m       const functionCall = this.safeGet(content, ['fields', 'functionCall', 'structValue', 'fields']);[39m[22m
[1m[31m[7m   [0m [91m                                        ~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/vertex-ai.service.ts[0m:[93m131[0m:[93m32[0m - [91merror[0m[90m TS2345: [0mArgument of type '{}' is not assignable to parameter of type 'Record<string, unknown>'.[39m[22m
[1m[31m  Index signature for type 'string' is missing in type '{}'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m131[0m             name: this.safeGet(functionCall, ['name', 'stringValue']) || 'unknown_function',[39m[22m
[1m[31m[7m   [0m [91m                               ~~~~~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/vertex-ai.service.ts[0m:[93m132[0m:[93m32[0m - [91merror[0m[90m TS2345: [0mArgument of type '{}' is not assignable to parameter of type 'Record<string, unknown>'.[39m[22m
[1m[31m  Index signature for type 'string' is missing in type '{}'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m132[0m             args: this.safeGet(functionCall, ['args', 'structValue', 'fields']) || {}[39m[22m
[1m[31m[7m   [0m [91m                               ~~~~~~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/vertex-ai.service.ts[0m:[93m138[0m:[93m33[0m - [91merror[0m[90m TS2345: [0mArgument of type '{}' is not assignable to parameter of type 'Record<string, unknown>'.[39m[22m
[1m[31m  Index signature for type 'string' is missing in type '{}'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m138[0m       const text = this.safeGet(content, ['fields', 'text', 'stringValue']);[39m[22m
[1m[31m[7m   [0m [91m                                ~~~~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/ai/vertex-ai.service.ts[0m:[93m154[0m:[93m24[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.[39m[22m
[1m[31m  Overload 1 of 3, '(callbackfn: (previousValue: string | number, currentValue: string | number, currentIndex: number, array: (string | number)[]) => string | number, initialValue: string | number): string | number', gave the following error.[39m[22m
[1m[31m    Argument of type '(current: Record<string, unknown>, key: string | number) => unknown' is not assignable to parameter of type '(previousValue: string | number, currentValue: string | number, currentIndex: number, array: (string | number)[]) => string | number'.[39m[22m
[1m[31m      Types of parameters 'current' and 'previousValue' are incompatible.[39m[22m
[1m[31m        Type 'string | number' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m          Type 'string' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m  Overload 2 of 3, '(callbackfn: (previousValue: Record<string, unknown>, currentValue: string | number, currentIndex: number, array: (string | number)[]) => Record<string, unknown>, initialValue: Record<string, unknown>): Record<...>', gave the following error.[39m[22m
[1m[31m    Argument of type '(current: Record<string, unknown>, key: string | number) => unknown' is not assignable to parameter of type '(previousValue: Record<string, unknown>, currentValue: string | number, currentIndex: number, array: (string | number)[]) => Record<string, unknown>'.[39m[22m
[1m[31m      Type 'unknown' is not assignable to type 'Record<string, unknown>'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m154[0m     return path.reduce((current, key) => {[39m[22m
[1m[31m[7m   [0m [91m                       ~~~~~~~~~~~~~~~~~~~[0m[39m[22m
[1m[31m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/integrations/cloud-storage/adapters/google-drive.adapter.ts[0m:[93m58[0m:[93m67[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ id: number; email: string; googleCredentials: { accessToken: string | null; refreshToken: string | null; }; }' is not assignable to parameter of type 'AuthenticatedUser'.[39m[22m
[1m[31m  Types of property 'id' are incompatible.[39m[22m
[1m[31m    Type 'number' is not assignable to type 'string'.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m58[0m     const { drive } = this.clientFactory.createDriveClientForUser(user);[39m[22m
[1m[31m[7m  [0m [91m                                                                  ~~~~[0m[39m[22m
[1m[31m[96m/Users/serge/OneDrive/Documents/Sergey-Avetisyan-main/apps/api/src/modules/knowledge/knowledge.controller.ts[0m:[93m19[0m:[93m44[0m - [91merror[0m[90m TS2554: [0mExpected 0 arguments, but got 1.[39m[22m
[1m[31m[39m[22m
[1m[31m[7m19[0m       return this.knowledgeService.findAll(projectId);[39m[22m
[1m[31m[7m  [0m [91m                                           ~~~~~~~~~[0m[39m[22m
[1m[31m[39m[22m
