var Eu=Object.defineProperty,Nu=Object.defineProperties;var ku=Object.getOwnPropertyDescriptors;var dn=Object.getOwnPropertySymbols;var ko=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable;var Yt=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),ju=t=>{throw TypeError(t)};var wr=(t,e,s)=>e in t?Eu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,M=(t,e)=>{for(var s in e||(e={}))ko.call(e,s)&&wr(t,s,e[s]);if(dn)for(var s of dn(e))jo.call(e,s)&&wr(t,s,e[s]);return t},G=(t,e)=>Nu(t,ku(e));var Ze=(t,e)=>{var s={};for(var n in t)ko.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&dn)for(var n of dn(t))e.indexOf(n)<0&&jo.call(t,n)&&(s[n]=t[n]);return s};var Au=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var xe=(t,e,s)=>wr(t,typeof e!="symbol"?e+"":e,s);var A=(t,e,s)=>new Promise((n,i)=>{var o=h=>{try{d(s.next(h))}catch(f){i(f)}},c=h=>{try{d(s.throw(h))}catch(f){i(f)}},d=h=>h.done?n(h.value):Promise.resolve(h.value).then(o,c);d((s=s.apply(t,e)).next())}),ut=function(t,e){this[0]=t,this[1]=e},hn=(t,e,s)=>{var n=(c,d,h,f)=>{try{var g=s[c](d),v=(d=g.value)instanceof ut,j=g.done;Promise.resolve(v?d[0]:d).then(_=>v?n(c==="return"?c:"next",d[1]?{done:_.done,value:_.value}:_,h,f):h({value:_,done:j})).catch(_=>n("throw",_,h,f))}catch(_){f(_)}},i=c=>o[c]=d=>new Promise((h,f)=>n(c,d,h,f)),o={};return s=s.apply(t,e),o[Yt("asyncIterator")]=()=>o,i("next"),i("throw"),i("return"),o},vr=t=>{var e=t[Yt("asyncIterator")],s=!1,n,i={};return e==null?(e=t[Yt("iterator")](),n=o=>i[o]=c=>e[o](c)):(e=e.call(t),n=o=>i[o]=c=>{if(s){if(s=!1,o==="throw")throw c;return c}return s=!0,{done:!1,value:new ut(new Promise(d=>{var h=e[o](c);h instanceof Object||ju("Object expected"),d(h)}),1)}}),i[Yt("iterator")]=()=>i,n("next"),"throw"in e?n("throw"):i.throw=o=>{throw o},"return"in e&&n("return"),i},Ao=(t,e,s)=>(e=t[Yt("asyncIterator")])?e.call(t):(t=t[Yt("iterator")](),e={},s=(n,i)=>(i=t[n])&&(e[n]=o=>new Promise((c,d,h)=>(o=i.call(t,o),h=o.done,Promise.resolve(o.value).then(f=>c({value:f,done:h}),d)))),s("next"),s("return"),e);import{j as a}from"./query-vendor-Coqwa2ZP.js";import{b as Tu,g as Iu,R as U,r as P,u as Cu,c as cs,N as Ru,d as Du,e as vt,f as Ou,h as Pu,i as Lu,B as Mu}from"./react-vendor-BB0LUnLv.js";import{S as Rs,H as Fu,T as $u,I as ss,F as Uu,C as lc,X as Bu,P as ns,a as To,L as uc,W as dc,b as Vu,R as vn,c as Sr,U as Ur,E as Io,A as In,d as hc,e as Br,B as Co,f as zu,M as Hu,g as Ro,h as $s,i as qu,j as Do,G as Gu,k as Sn,l as Wu,m as Ku,n as Ju,o as Xu,p as Yu,q as Qu,r as Zu,s as ed,t as td,u as sd,v as fc}from"./ui-vendor-Bw6d6q8h.js";var ux=Au(Re=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var fn={},Oo;function nd(){if(Oo)return fn;Oo=1;var t=Tu();return fn.createRoot=t.createRoot,fn.hydrateRoot=t.hydrateRoot,fn}var rd=nd();const id=Iu(rd),od=void 0;function pn(){return!!od}function Po(t,e=12,s=1,n,i){return A(this,null,function*(){throw new Error("Unsplash API key not configured (VITE_UNSPLASH_ACCESS_KEY)")})}function ad(t){return A(this,null,function*(){var e;if(!((e=t.links)!=null&&e.download_location)){console.warn("No download_location available for tracking");return}{console.warn("Unsplash API key not configured");return}})}const cd=2800,oi=()=>{const[t,e]=U.useState([]),s=U.useRef({}),n=U.useCallback((i,o="info")=>{const c=Date.now();e(h=>[...h,{id:c,message:i,type:o}]);const d=setTimeout(()=>{e(h=>h.filter(f=>f.id!==c)),delete s.current[c]},cd);s.current[c]=d},[]);return U.useEffect(()=>{const i=s.current;return()=>{Object.values(i).forEach(clearTimeout)}},[]),{toasts:t,addToast:n}},ld=()=>typeof window!="undefined"?"/api/v1":"http://localhost:3001/api/v1",ud=ld(),dd=1e4;function pc(t,e){if(!t||typeof t!="string"||t.trim().length===0)throw new Error(`${e} must be a non-empty string`)}function mc(s){return A(this,arguments,function*(t,e={}){const n=new AbortController,i=setTimeout(()=>n.abort(),dd);try{const o=yield fetch(`${ud}${t}`,M({headers:M({"Content-Type":"application/json"},e.headers),signal:n.signal},e));if(!o.ok){const c=yield o.text().catch(()=>"");throw new Error(`Request failed (${o.status} ${o.statusText}): ${c||"Unknown error"}`)}return o.status===204?void 0:yield o.json()}catch(o){throw o instanceof Error&&o.name==="AbortError"?new Error("Request timed out"):(console.error("API Request failed:",o),o)}finally{clearTimeout(i)}})}function hd(t,e){return A(this,null,function*(){pc(t,"projectId");const s={projectId:t,unsplashId:e.id,imageUrl:e.urls.regular,photographerName:e.user.name,photographerUrl:e.user.links.html,description:e.description,altDescription:e.alt_description,color:e.color,width:e.width,height:e.height};yield mc(`/moodboard/${t}/from-unsplash`,{method:"POST",body:JSON.stringify(s)})})}function fd(t,e){return A(this,null,function*(){pc(t,"itemId"),yield mc(`/moodboard/${t}/favorite`,{method:"PATCH",body:JSON.stringify({isFavorite:e})})})}const ai="moodboard_recent_searches",pd=10;function Zt(){try{const t=localStorage.getItem(ai);return t?JSON.parse(t).map(s=>s.query):[]}catch(t){return console.error("Failed to read recent searches:",t),[]}}function Lo(t){if(t.trim())try{const s=Zt().filter(c=>c.toLowerCase()!==t.toLowerCase()),o=[t,...s].slice(0,pd).map(c=>({query:c,timestamp:Date.now()}));localStorage.setItem(ai,JSON.stringify(o))}catch(e){console.error("Failed to save recent search:",e)}}function md(t){try{const n=Zt().filter(i=>i!==t).map(i=>({query:i,timestamp:Date.now()}));localStorage.setItem(ai,JSON.stringify(n))}catch(e){console.error("Failed to remove recent search:",e)}}const dt=({children:t,className:e="",noPadding:s=!1,hoverable:n=!1,glass:i=!1,onClick:o})=>a.jsx("div",{className:`
        bg-surface
        rounded-[24px]
        shadow-ambient
        overflow-hidden
        transition-all duration-200
        ${i?"glass":""}
        ${n?"hover:-translate-y-0.5 hover:shadow-float cursor-pointer":""}
        ${e}
      `,onClick:o,children:a.jsx("div",{className:s?"":"p-6",children:t})});var gd=t=>t.type==="checkbox",Ds=t=>t instanceof Date,ci=t=>t==null;const gc=t=>typeof t=="object";var Mt=t=>!ci(t)&&!Array.isArray(t)&&gc(t)&&!Ds(t),yd=t=>Mt(t)&&t.target?gd(t.target)?t.target.checked:t.target.value:t,bd=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,xd=(t,e)=>t.has(bd(e)),wd=t=>{const e=t.constructor&&t.constructor.prototype;return Mt(e)&&e.hasOwnProperty("isPrototypeOf")},vd=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function yc(t){let e;const s=Array.isArray(t),n=typeof FileList!="undefined"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(vd&&(t instanceof Blob||n))&&(s||Mt(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!wd(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=yc(t[i]));else return t;return e}var bc=t=>/^\w*$/.test(t),Vr=t=>t===void 0,Sd=t=>Array.isArray(t)?t.filter(Boolean):[],xc=t=>Sd(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,s)=>{if(!e||!Mt(t))return s;const n=(bc(e)?[e]:xc(e)).reduce((i,o)=>ci(i)?i:i[o],t);return Vr(n)||n===t?Vr(t[e])?s:t[e]:n},_r=t=>typeof t=="boolean",Mo=(t,e,s)=>{let n=-1;const i=bc(e)?[e]:xc(e),o=i.length,c=o-1;for(;++n<o;){const d=i[n];let h=s;if(n!==c){const f=t[d];h=Mt(f)||Array.isArray(f)?f:isNaN(+i[n+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=h,t=t[d]}};const Fo={BLUR:"blur",CHANGE:"change"},$o={all:"all"},wc=U.createContext(null);wc.displayName="HookFormContext";const li=()=>U.useContext(wc);var _d=(t,e,s,n=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const c=o;return e._proxyFormState[c]!==$o.all&&(e._proxyFormState[c]=!n||$o.all),s&&(s[c]=!0),t[c]}});return i};const vc=typeof window!="undefined"?U.useLayoutEffect:U.useEffect;function Ed(t){const e=li(),{control:s=e.control,disabled:n,name:i,exact:o}=t||{},[c,d]=U.useState(s._formState),h=U.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return vc(()=>s._subscribe({name:i,formState:h.current,exact:o,callback:f=>{!n&&d(M(M({},s._formState),f))}}),[i,n,o]),U.useEffect(()=>{h.current.isValid&&s._setValid(!0)},[s]),U.useMemo(()=>_d(c,s,h.current,!1),[c,s])}var Nd=t=>typeof t=="string",Uo=(t,e,s,n,i)=>Nd(t)?Ne(s,t,i):Array.isArray(t)?t.map(o=>Ne(s,o)):s,Bo=t=>ci(t)||!gc(t);function _n(t,e,s=new WeakSet){if(Bo(t)||Bo(e))return Object.is(t,e);if(Ds(t)&&Ds(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const o of n){const c=t[o];if(!i.includes(o))return!1;if(o!=="ref"){const d=e[o];if(Ds(c)&&Ds(d)||Mt(c)&&Mt(d)||Array.isArray(c)&&Array.isArray(d)?!_n(c,d,s):!Object.is(c,d))return!1}}return!0}function kd(t){const e=li(),{control:s=e.control,name:n,defaultValue:i,disabled:o,exact:c,compute:d}=t||{},h=U.useRef(i),f=U.useRef(d),g=U.useRef(void 0),v=U.useRef(s),j=U.useRef(n);f.current=d;const[_,E]=U.useState(()=>{const D=s._getWatch(n,h.current);return f.current?f.current(D):D}),R=U.useCallback(D=>{const V=Uo(n,s._names,D||s._formValues,!1,h.current);return f.current?f.current(V):V},[s._formValues,s._names,n]),T=U.useCallback(D=>{if(!o){const V=Uo(n,s._names,D||s._formValues,!1,h.current);if(f.current){const B=f.current(V);_n(B,g.current)||(E(B),g.current=B)}else E(V)}},[s._formValues,s._names,o,n]);vc(()=>((v.current!==s||!_n(j.current,n))&&(v.current=s,j.current=n,T()),s._subscribe({name:n,formState:{values:!0},exact:c,callback:D=>{T(D.values)}})),[s,c,n,T]),U.useEffect(()=>s._removeUnmounted());const L=v.current!==s,H=j.current,$=U.useMemo(()=>{if(o)return null;const D=!L&&!_n(H,n);return L||D?R():null},[o,L,n,H,R]);return $!==null?$:_}function Sc(t){const e=li(),{name:s,disabled:n,control:i=e.control,shouldUnregister:o,defaultValue:c,exact:d=!0}=t,h=xd(i._names.array,s),f=U.useMemo(()=>Ne(i._formValues,s,Ne(i._defaultValues,s,c)),[i,s,c]),g=kd({control:i,name:s,defaultValue:f,exact:d}),v=Ed({control:i,name:s,exact:d}),j=U.useRef(t),_=U.useRef(void 0),E=U.useRef(i.register(s,M(G(M({},t.rules),{value:g}),_r(t.disabled)?{disabled:t.disabled}:{})));j.current=t;const R=U.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ne(v.errors,s)},isDirty:{enumerable:!0,get:()=>!!Ne(v.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Ne(v.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Ne(v.validatingFields,s)},error:{enumerable:!0,get:()=>Ne(v.errors,s)}}),[v,s]),T=U.useCallback(D=>E.current.onChange({target:{value:yd(D),name:s},type:Fo.CHANGE}),[s]),L=U.useCallback(()=>E.current.onBlur({target:{value:Ne(i._formValues,s),name:s},type:Fo.BLUR}),[s,i._formValues]),H=U.useCallback(D=>{const V=Ne(i._fields,s);V&&D&&(V._f.ref={focus:()=>D.focus&&D.focus(),select:()=>D.select&&D.select(),setCustomValidity:B=>D.setCustomValidity(B),reportValidity:()=>D.reportValidity()})},[i._fields,s]),$=U.useMemo(()=>G(M({name:s,value:g},_r(n)||v.disabled?{disabled:v.disabled||n}:{}),{onChange:T,onBlur:L,ref:H}),[s,n,v.disabled,T,L,H,g]);return U.useEffect(()=>{const D=i._options.shouldUnregister||o,V=_.current;V&&V!==s&&!h&&i.unregister(V),i.register(s,M(M({},j.current.rules),_r(j.current.disabled)?{disabled:j.current.disabled}:{}));const B=(w,m)=>{const x=Ne(i._fields,w);x&&x._f&&(x._f.mount=m)};if(B(s,!0),D){const w=yc(Ne(i._options.defaultValues,s,j.current.defaultValue));Mo(i._defaultValues,s,w),Vr(Ne(i._formValues,s))&&Mo(i._formValues,s,w)}return!h&&i.register(s),_.current=s,()=>{(h?D&&!i._state.action:D)?i.unregister(s):B(s,!1)}},[s,i,h,o]),U.useEffect(()=>{i._setDisabledField({disabled:n,name:s})},[n,s,i]),U.useMemo(()=>({field:$,formState:v,fieldState:R}),[$,v,R])}const Us=U.forwardRef((g,f)=>{var v=g,{label:t,error:e,helperText:s,icon:n,variant:i="primary",size:o="md",disabled:c=!1,className:d=""}=v,h=Ze(v,["label","error","helperText","icon","variant","size","disabled","className"]);const j="w-full rounded-[24px] text-sm font-medium outline-none transition-all focus:ring-2 focus:ring-offset-2 focus:ring-primary/40",_={primary:`bg-surface text-ink-primary placeholder-ink-tertiary ${e?"focus:ring-state-danger/40 focus:bg-danger-bg":"focus:bg-subtle focus:ring-primary/40"}`,secondary:`bg-subtle text-ink-primary placeholder-ink-tertiary ${e?"focus:ring-state-danger/40":"focus:bg-surface focus:ring-primary/40"}`},E={sm:"px-3 py-2 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-5 py-3.5 text-base"},R=c?"opacity-50 cursor-not-allowed bg-subtle":"",T=`${j} ${_[i]} ${E[o]} ${R} ${d}`;return a.jsxs("div",{className:"flex flex-col gap-2",children:[t&&a.jsxs("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide",children:[t,h.required&&a.jsx("span",{className:"text-state-danger ml-1",children:"*"})]}),a.jsxs("div",{className:"relative flex items-center",children:[n&&a.jsx("div",{className:"absolute left-4 text-ink-tertiary pointer-events-none",children:n}),a.jsx("input",M({ref:f,className:`${T} ${n?"pl-10":""}`,disabled:c,"aria-invalid":e?"true":"false","aria-describedby":e?`${h.name}-error`:s?`${h.name}-helper`:void 0},h))]}),e&&a.jsx("p",{id:`${h.name}-error`,className:"text-xs font-medium text-state-danger",children:e}),s&&!e&&a.jsx("p",{id:`${h.name}-helper`,className:"text-xs text-ink-tertiary font-medium",children:s})]})});Us.displayName="Input";const jd=U.forwardRef((h,d)=>{var f=h,{label:t,helperText:e,icon:s,variant:n,size:i,inputProps:o}=f,c=Ze(f,["label","helperText","icon","variant","size","inputProps"]);var T;const{field:g,fieldState:v}=Sc(c),R=g,{ref:j}=R,_=Ze(R,["ref"]),E=L=>{typeof d=="function"?d(L):d&&(d.current=L),j(L)};return a.jsx(Us,G(M(M({ref:E},_),o),{label:t,error:(T=v.error)==null?void 0:T.message,helperText:e,icon:s,variant:n,size:i}))});jd.displayName="InputField";const Ad=({projectId:t,items:e=[],onItemDelete:s,onSemanticSearch:n,onAddUnsplashImage:i})=>{var Ht,hs,Zs,en,fs,qt,ps,tn,Gt;const[o,c]=P.useState("uploads"),[d,h]=P.useState(""),[f,g]=P.useState([]),[v,j]=P.useState(null),[_,E]=P.useState(e),[R,T]=P.useState(!1),{addToast:L}=oi(),[H,$]=P.useState(""),[D,V]=P.useState([]),[B,w]=P.useState(!1),[m,x]=P.useState(null),[b,S]=P.useState(null),[N,y]=P.useState({total:0,total_pages:0,page:1,per_page:24}),[ne,pe]=P.useState([]),[ie,Te]=P.useState({});U.useEffect(()=>{E(e)},[e]),U.useEffect(()=>{o==="unsplash"&&pe(Zt())},[o]);const ye=P.useMemo(()=>{const O=new Set;return e.forEach(q=>{q.tags.forEach(X=>O.add(X)),q.moods.forEach(X=>O.add(X))}),Array.from(O).sort()},[e]),Oe=O=>A(null,null,function*(){if(h(O),O.trim()){T(!0);try{const q=(yield n==null?void 0:n(O))||e;E(q)}finally{T(!1)}}else z(O,f)}),K=O=>{const q=f.includes(O)?f.filter(X=>X!==O):[...f,O];g(q),z(d,q)},z=(O,q)=>{let X=e;q.length>0&&(X=X.filter(de=>q.some(Pe=>de.tags.includes(Pe)||de.moods.includes(Pe)))),E(X)},Z=(O=1)=>A(null,null,function*(){if(H.trim()){if(!pn()){const q="Unsplash search is disabled: add VITE_UNSPLASH_ACCESS_KEY to your environment.";S(q),L(q);return}w(!0),S(null);try{const q=yield Po(H,N.per_page,O,ie.color,ie.orientation);V(q.results),y({total:q.total,total_pages:q.total_pages,page:O,per_page:N.per_page}),Lo(H),pe(Zt())}catch(q){const X=q instanceof Error?q.message:"Unsplash search failed. Check API key or network.";console.error("Unsplash search failed:",q),S(X),L(X)}finally{w(!1)}}}),oe=O=>A(null,null,function*(){O.preventDefault(),yield Z(1)}),ue=O=>A(null,null,function*(){if($(O),w(!0),S(null),!pn()){const q="Unsplash search is disabled: add VITE_UNSPLASH_ACCESS_KEY to your environment.";S(q),L(q),w(!1);return}try{const q=yield Po(O,N.per_page,1,ie.color,ie.orientation);V(q.results),y({total:q.total,total_pages:q.total_pages,page:1,per_page:N.per_page}),Lo(O),pe(Zt())}catch(q){const X=q instanceof Error?q.message:"Unsplash search failed. Check API key or network.";console.error("Unsplash search failed:",q),S(X),L(X)}finally{w(!1)}}),ze=(O,q)=>{q.stopPropagation(),md(O),pe(Zt())},zt=O=>A(null,null,function*(){try{yield ad(O),yield hd(t,O),i&&(yield i(O)),L("Unsplash image added to moodboard successfully!")}catch(q){console.error("Failed to add Unsplash image:",q),L("Failed to add Unsplash image. Please try again.")}}),ds=(O,q)=>A(null,null,function*(){const X=!q;try{yield fd(O,X),E(de=>de.map(Pe=>Pe.id===O?G(M({},Pe),{isFavorite:X}):Pe))}catch(de){console.error("Failed to toggle favorite:",de)}});return a.jsx("div",{className:"w-full h-full bg-app",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-ink-primary mb-2",children:"Moodboard"}),a.jsx("p",{className:"text-ink-secondary",children:"Visual inspiration with AI semantic tagging and Unsplash discovery"})]}),a.jsx("div",{className:"mb-6 border-b border-border-subtle",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("button",{onClick:()=>c("uploads"),className:`pb-3 px-1 font-medium transition-all ${o==="uploads"?"text-primary border-b-2 border-primary":"text-ink-secondary hover:text-ink-primary"}`,"aria-label":"View uploaded images",children:["My Images (",e.length,")"]}),a.jsx("button",{onClick:()=>c("unsplash"),className:`pb-3 px-1 font-medium transition-all ${o==="unsplash"?"text-primary border-b-2 border-primary":"text-ink-secondary hover:text-ink-primary"}`,"aria-label":"Discover Unsplash images",children:"Discover"})]})}),o==="uploads"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-8 space-y-6",children:[a.jsx(Us,{placeholder:"Search visuals semantically... (e.g., 'melancholy summer' or 'cinematic blue hour')",icon:a.jsx(Rs,{size:18}),value:d,onChange:O=>Oe(O.target.value)}),ye.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide mb-3",children:"Filter by Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:ye.map(O=>a.jsx("button",{onClick:()=>K(O),className:`px-3 py-1.5 rounded-[24px] text-xs font-medium transition-all ${f.includes(O)?"bg-primary text-white":"bg-subtle text-ink-secondary hover:bg-surface"}`,children:O},O))})]})]}),R&&a.jsx("p",{className:"text-xs text-ink-tertiary mb-3",children:"Searching visuals..."}),_.length>0?a.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6",children:_.map(O=>a.jsxs(dt,{className:"mb-6 p-0 overflow-hidden cursor-pointer hover:shadow-2xl transition-shadow duration-300 break-inside-avoid group",onClick:()=>j(O.id),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:O.url,alt:O.tags.join(", ")||"Moodboard item",className:"w-full h-auto object-cover"}),a.jsx("button",{onClick:q=>{var X;q.stopPropagation(),ds(O.id,(X=O.isFavorite)!=null?X:!1)},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Toggle favorite",children:a.jsx(Fu,{size:18,className:`transition-colors ${O.isFavorite?"text-state-danger fill-current":"text-white"}`})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),s&&s(O.id)},className:"absolute top-2 left-2 p-2 rounded-full bg-state-danger hover:bg-state-danger/80 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Delete item",children:a.jsx($u,{size:16,className:"text-white"})})]}),a.jsxs("div",{className:"p-4",children:[O.colors.length>0&&a.jsx("div",{className:"flex gap-1 mb-2",children:O.colors.slice(0,3).map((q,X)=>a.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg border border-white/30",style:{backgroundColor:q},title:q},X))}),a.jsxs("div",{className:"space-y-2",children:[O.moods.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:O.moods.map(q=>a.jsx("span",{className:"px-2 py-0.5 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:q},q))}),O.shotType&&a.jsxs("p",{className:"text-xs text-ink-tertiary",children:["Shot Type: ",a.jsx("strong",{children:O.shotType})]})]})]})]},O.id))}):a.jsxs(dt,{className:"text-center py-12",children:[a.jsx(ss,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),a.jsx("p",{className:"text-ink-secondary",children:e.length===0?"No mood board items yet. Upload images from the Project Dashboard or discover from Unsplash!":"No items match your search. Try different keywords."})]})]}),o==="unsplash"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-8",children:[!pn()&&a.jsx(dt,{className:"mb-4 bg-amber-50 border-amber-200 text-amber-900",children:a.jsxs("p",{className:"text-sm font-medium",children:["Unsplash is not configured. Set ",a.jsx("code",{children:"VITE_UNSPLASH_ACCESS_KEY"})," in your environment to enable search and downloads."]})}),a.jsx("form",{onSubmit:oe,className:"mb-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Us,{placeholder:"Search Unsplash... (e.g., 'mountain landscape', 'minimal architecture')",icon:a.jsx(Rs,{size:18}),value:H,onChange:O=>$(O.target.value),className:"flex-1"}),a.jsx("button",{type:"submit",disabled:B||!H.trim()||!pn(),className:"px-6 py-2 bg-primary text-white rounded-[16px] font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:B?"Searching...":"Search"})]})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Uu,{size:16,className:"text-ink-tertiary"}),a.jsxs("select",{value:ie.color||"",onChange:O=>Te(G(M({},ie),{color:O.target.value||void 0})),className:"px-3 py-1.5 rounded-[12px] bg-subtle border border-border-subtle text-xs font-medium text-ink-secondary hover:bg-surface transition-colors",title:"Filter by color",children:[a.jsx("option",{value:"",children:"All Colors"}),a.jsx("option",{value:"black_and_white",children:"Black & White"}),a.jsx("option",{value:"black",children:"Black"}),a.jsx("option",{value:"white",children:"White"}),a.jsx("option",{value:"yellow",children:"Yellow"}),a.jsx("option",{value:"orange",children:"Orange"}),a.jsx("option",{value:"red",children:"Red"}),a.jsx("option",{value:"purple",children:"Purple"}),a.jsx("option",{value:"magenta",children:"Magenta"}),a.jsx("option",{value:"green",children:"Green"}),a.jsx("option",{value:"teal",children:"Teal"}),a.jsx("option",{value:"blue",children:"Blue"})]}),a.jsxs("select",{value:ie.orientation||"",onChange:O=>Te(G(M({},ie),{orientation:O.target.value||void 0})),className:"px-3 py-1.5 rounded-[12px] bg-subtle border border-border-subtle text-xs font-medium text-ink-secondary hover:bg-surface transition-colors",title:"Filter by orientation",children:[a.jsx("option",{value:"",children:"Any Orientation"}),a.jsx("option",{value:"landscape",children:"Landscape"}),a.jsx("option",{value:"portrait",children:"Portrait"}),a.jsx("option",{value:"squarish",children:"Square"})]}),(ie.color||ie.orientation)&&a.jsx("button",{onClick:()=>Te({}),className:"px-3 py-1.5 rounded-[12px] bg-state-danger/10 text-state-danger text-xs font-medium hover:bg-state-danger/20 transition-colors",children:"Clear Filters"})]}),a.jsxs("p",{className:"text-xs text-ink-tertiary mt-2",children:["Photos from"," ",a.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Unsplash"})]}),b&&a.jsx("p",{className:"text-xs text-state-danger mt-2",children:b})]}),ne.length>0&&D.length===0&&!B&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(lc,{size:16,className:"text-ink-tertiary"}),a.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide",children:"Recent Searches"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(O=>a.jsxs("button",{onClick:()=>ue(O),className:"group px-3 py-1.5 rounded-[24px] bg-subtle text-ink-secondary hover:bg-surface hover:text-ink-primary text-xs font-medium transition-all flex items-center gap-2",children:[a.jsx("span",{children:O}),a.jsx(Bu,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity hover:text-state-danger",onClick:q=>ze(O,q)})]},O))})]}),B&&a.jsx("p",{className:"text-xs text-ink-tertiary mb-3",children:"Loading images from Unsplash..."}),D.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-ink-secondary",children:[a.jsxs("span",{children:["Page ",N.page," of ",N.total_pages," â€¢ ",N.total," results"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Z(Math.max(1,N.page-1)),disabled:B||N.page<=1,className:"px-3 py-1.5 rounded-[12px] border border-border-subtle text-xs font-semibold disabled:opacity-50",children:"Prev"}),a.jsx("button",{onClick:()=>Z(Math.min(N.total_pages||1,N.page+1)),disabled:B||!N.total_pages||N.page>=N.total_pages,className:"px-3 py-1.5 rounded-[12px] border border-border-subtle text-xs font-semibold disabled:opacity-50",children:"Next"})]})]}),a.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6",children:D.map(O=>a.jsxs("div",{className:"break-inside-avoid mb-6 group cursor-pointer",onClick:()=>x(O.id),children:[a.jsxs("div",{className:"relative rounded-[24px] overflow-hidden shadow-ambient hover:shadow-float transition-all",children:[a.jsx("img",{src:O.urls.regular,alt:O.alt_description||O.description||"Unsplash image",className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-300"}),a.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all rounded-[24px] flex items-end justify-between p-4 opacity-0 group-hover:opacity-100",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("p",{className:"text-white text-xs mb-1 truncate",children:["Photo by"," ",a.jsx("a",{href:O.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:underline",onClick:q=>q.stopPropagation(),children:O.user.name})]})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),zt(O)},className:"p-2 rounded-[12px] bg-primary/80 text-white hover:bg-primary transition-colors ml-2","aria-label":"Add to moodboard",title:"Add to moodboard",children:a.jsx(ns,{size:16})})]})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-xs text-ink-tertiary",children:["by"," ",a.jsx("a",{href:O.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"text-ink-secondary hover:text-ink-primary hover:underline",children:O.user.name})]})})]},O.id))})]}):!B&&N.total_pages>0?a.jsxs(dt,{className:"text-center py-12",children:[a.jsx(Rs,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),a.jsx("p",{className:"text-ink-secondary mb-2",children:"No results on this page. Try another page or new search."})]}):B?null:a.jsxs(dt,{className:"text-center py-12",children:[a.jsx(Rs,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),a.jsx("p",{className:"text-ink-secondary mb-2",children:H?"No results found. Try a different search term.":"Search for inspiring images from Unsplash"}),a.jsx("p",{className:"text-xs text-ink-tertiary",children:'Try searches like "modern workspace", "nature patterns", or "urban photography"'})]})]}),v&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>j(null),children:a.jsxs(dt,{className:"max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>j(null),className:"float-right p-2 hover:bg-subtle rounded-[16px] transition-colors","aria-label":"Close modal",children:a.jsx(To,{size:20})}),_.find(O=>O.id===v)&&a.jsxs("div",{children:[a.jsx("img",{src:(Ht=_.find(O=>O.id===v))==null?void 0:Ht.url,alt:"Detail",className:"w-full rounded-[24px] mb-6"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-4",children:"Tags & Metadata"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-ink-secondary mb-2",children:"Visual Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(hs=_.find(O=>O.id===v))==null?void 0:hs.tags.map(O=>a.jsx("span",{className:"px-3 py-1 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:O},O))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-ink-secondary mb-2",children:"Moods"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(Zs=_.find(O=>O.id===v))==null?void 0:Zs.moods.map(O=>a.jsx("span",{className:"px-3 py-1 rounded-[12px] bg-edge-teal/20 text-edge-teal text-xs font-medium",children:O},O))})]})]})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>x(null),children:a.jsxs(dt,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>x(null),className:"float-right p-2 hover:bg-subtle rounded-[16px] transition-colors","aria-label":"Close modal",children:a.jsx(To,{size:20})}),D.find(O=>O.id===m)&&a.jsxs("div",{children:[a.jsx("img",{src:(en=D.find(O=>O.id===m))==null?void 0:en.urls.regular,alt:((fs=D.find(O=>O.id===m))==null?void 0:fs.alt_description)||"Unsplash image",className:"w-full rounded-[24px] mb-6"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-2",children:((qt=D.find(O=>O.id===m))==null?void 0:qt.description)||((ps=D.find(O=>O.id===m))==null?void 0:ps.alt_description)||"Untitled"}),a.jsxs("p",{className:"text-sm text-ink-secondary mb-4",children:["Photo by"," ",a.jsx("a",{href:(tn=D.find(O=>O.id===m))==null?void 0:tn.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:(Gt=D.find(O=>O.id===m))==null?void 0:Gt.user.name})," ","on"," ",a.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Unsplash"})]}),a.jsxs("button",{onClick:()=>{const O=D.find(q=>q.id===m);O&&(zt(O),x(null))},className:"px-6 py-3 bg-primary text-white rounded-[16px] font-medium hover:bg-primary/90 transition-all inline-flex items-center gap-2",children:[a.jsx(ns,{size:18}),"Add to Moodboard"]})]})]})]})})]})})};function ui(t,e){let s;return(...n)=>{s&&clearTimeout(s),s=setTimeout(()=>t(...n),e)}}const kt=class kt{constructor(e={}){xe(this,"drafts",new Map);xe(this,"versions",new Map);xe(this,"autoSaveTimers",new Map);xe(this,"options");xe(this,"listeners",new Map);xe(this,"storageKey","studio_roster_drafts");xe(this,"versionStorageKey","studio_roster_versions");xe(this,"triggerAutoSave");this.options=M({autoSaveInterval:3e4,maxDrafts:50,enableVersioning:!0,maxVersions:10,debounceMs:2e3,enableEncryption:!1},e),this.loadDraftsFromStorage(),this.loadVersionsFromStorage(),this.triggerAutoSave=ui(s=>{this.performAutoSave(s)},this.options.debounceMs||2e3)}static getInstance(e){return kt.instance||(kt.instance=new kt(e)),kt.instance}createDraft(o,c,d){return A(this,arguments,function*(e,s,n,i={}){const h={id:e,type:s,content:this.serializeContent(n),metadata:M({title:i.title||"Untitled",projectId:i.projectId,userId:i.userId,lastModified:new Date,version:1,size:this.calculateSize(n),tags:i.tags||[]},i),status:"draft",autoSaveEnabled:!0};return this.drafts.set(e,h),this.saveDraftToStorage(e),this.notifyListeners(e,h),h.autoSaveEnabled&&this.startAutoSave(e),h})}updateDraft(e,s,n){return A(this,null,function*(){const i=this.drafts.get(e);if(!i)throw new Error(`Draft with id ${e} not found`);return this.options.enableVersioning&&(yield this.createVersion(e,`Auto-save before update to v${i.metadata.version+1}`)),i.content=this.serializeContent(s),i.metadata=G(M(M({},i.metadata),n),{lastModified:new Date,version:i.metadata.version+1,size:this.calculateSize(s)}),i.status="draft",this.drafts.set(e,i),this.saveDraftToStorage(e),this.notifyListeners(e,i),i.autoSaveEnabled&&this.triggerAutoSave(e),i})}saveDraft(e){return A(this,null,function*(){const s=this.drafts.get(e);if(!s)throw new Error(`Draft with id ${e} not found`);s.status="saving",this.notifyListeners(e,s);try{return yield this.performSave(s),s.status="saved",s.lastSaved=new Date,delete s.error,this.drafts.set(e,s),this.saveDraftToStorage(e),this.notifyListeners(e,s),s}catch(n){throw s.status="error",s.error=n instanceof Error?n.message:"Unknown error",this.drafts.set(e,s),this.notifyListeners(e,s),n}})}getDraft(e){return this.drafts.get(e)}getAllDrafts(){return Array.from(this.drafts.values()).sort((e,s)=>s.metadata.lastModified.getTime()-e.metadata.lastModified.getTime())}getDraftsByType(e){return this.getAllDrafts().filter(s=>s.type===e)}getDraftsByProject(e){return this.getAllDrafts().filter(s=>s.metadata.projectId===e)}getDraftMetadata(){return this.getAllDrafts().map(e=>({id:e.id,title:e.metadata.title||"Untitled",type:e.type,lastModified:e.metadata.lastModified,size:e.metadata.size,status:e.status,hasUnsavedChanges:e.status==="draft",projectId:e.metadata.projectId,version:e.metadata.version}))}deleteDraft(e){return A(this,null,function*(){const s=this.drafts.get(e);s&&(this.stopAutoSave(e),this.drafts.delete(e),this.removeDraftFromStorage(e),this.options.enableVersioning&&(yield this.deleteVersions(e)),this.notifyListeners(e,s))})}toggleAutoSave(e,s){const n=this.drafts.get(e);n&&(n.autoSaveEnabled=s,s?this.startAutoSave(e):this.stopAutoSave(e),this.drafts.set(e,n),this.saveDraftToStorage(e),this.notifyListeners(e,n))}createVersion(e,s){return A(this,null,function*(){const n=this.drafts.get(e);if(!n)throw new Error(`Draft with id ${e} not found`);const i={id:`v${n.metadata.version}_${Date.now()}`,draftId:e,version:n.metadata.version,content:M({},n.content),timestamp:new Date,size:n.metadata.size,checksum:this.calculateChecksum(n.content),description:s},o=this.versions.get(e)||[];return o.push(i),o.length>(this.options.maxVersions||10)&&o.splice(0,o.length-(this.options.maxVersions||10)),this.versions.set(e,o),this.saveVersionsToStorage(e),i})}getVersions(e){return(this.versions.get(e)||[]).sort((s,n)=>n.version-s.version)}restoreVersion(e,s){return A(this,null,function*(){const n=this.versions.get(e);if(!n)throw new Error(`No versions found for draft ${e}`);const i=n.find(c=>c.version===s);if(!i)throw new Error(`Version ${s} not found for draft ${e}`);const o=this.drafts.get(e);if(!o)throw new Error(`Draft with id ${e} not found`);return o.content=M({},i.content),o.metadata.version=i.version,o.metadata.lastModified=new Date,this.drafts.set(e,o),this.saveDraftToStorage(e),this.notifyListeners(e,o),o})}deleteVersions(e){return A(this,null,function*(){this.versions.delete(e),this.removeVersionsFromStorage(e)})}cleanup(){return A(this,null,function*(){const e=this.getAllDrafts();if(e.length>(this.options.maxDrafts||50)){const s=e.slice(this.options.maxDrafts||50);for(const n of s)yield this.deleteDraft(n.id)}for(const[s,n]of this.versions.entries())this.drafts.has(s)||(this.versions.delete(s),this.removeVersionsFromStorage(s))})}subscribe(e,s){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(s),()=>{const n=this.listeners.get(e);n&&(n.delete(s),n.size===0&&this.listeners.delete(e))}}getStorageStats(){const e=this.getAllDrafts(),s=e.reduce((h,f)=>h+f.metadata.size,0),n=Array.from(this.versions.values()).reduce((h,f)=>h+f.length,0),i=e.reduce((h,f)=>(h[f.type]=(h[f.type]||0)+1,h),{}),o=e.map(h=>h.metadata.lastModified),c=o.length>0?new Date(Math.min(...o.map(h=>h.getTime()))):void 0,d=o.length>0?new Date(Math.max(...o.map(h=>h.getTime()))):void 0;return{totalDrafts:e.length,totalVersions:n,totalSize:s,draftsByType:i,oldestDraft:c,newestDraft:d}}saveDraftCompat(e,s){return A(this,null,function*(){yield this.updateDraft(e,s)})}loadDraft(e){const s=this.getDraft(e);return s?s.content:null}startAutoSave(e){this.stopAutoSave(e);const s=setTimeout(()=>{this.performAutoSave(e)},this.options.autoSaveInterval);this.autoSaveTimers.set(e,s)}stopAutoSave(e){const s=this.autoSaveTimers.get(e);s&&(clearTimeout(s),this.autoSaveTimers.delete(e))}performAutoSave(e){return A(this,null,function*(){const s=this.drafts.get(e);if(!(!s||!s.autoSaveEnabled))try{yield this.saveDraft(e)}catch(n){console.warn(`Auto-save failed for draft ${e}:`,n)}})}performSave(e){return A(this,null,function*(){yield new Promise(s=>setTimeout(s,100))})}serializeContent(e){try{return JSON.parse(JSON.stringify(e))}catch(s){return{data:e}}}calculateSize(e){try{return new Blob([JSON.stringify(e)]).size}catch(s){return 0}}calculateChecksum(e){const s=JSON.stringify(e);let n=0;for(let i=0;i<s.length;i++){const o=s.charCodeAt(i);n=(n<<5)-n+o,n=n&n}return Math.abs(n).toString(16)}notifyListeners(e,s){const n=this.listeners.get(e);n&&n.forEach(i=>{try{i(s)}catch(o){console.error("Error in draft listener:",o)}})}saveDraftToStorage(e){var s;try{const n=this.drafts.get(e);if(!n)return;const i=this.getDraftStorage();i[e]=G(M({},n),{metadata:G(M({},n.metadata),{lastModified:n.metadata.lastModified.toISOString()}),lastSaved:(s=n.lastSaved)==null?void 0:s.toISOString()}),localStorage.setItem(this.storageKey,JSON.stringify(i))}catch(n){console.warn("Failed to save draft to storage:",n)}}removeDraftFromStorage(e){try{const s=this.getDraftStorage();delete s[e],localStorage.setItem(this.storageKey,JSON.stringify(s))}catch(s){console.warn("Failed to remove draft from storage:",s)}}saveVersionsToStorage(e){try{const s=this.versions.get(e);if(!s)return;const n=this.getVersionStorage();n[e]=s.map(i=>G(M({},i),{timestamp:i.timestamp.toISOString()})),localStorage.setItem(this.versionStorageKey,JSON.stringify(n))}catch(s){console.warn("Failed to save versions to storage:",s)}}removeVersionsFromStorage(e){try{const s=this.getVersionStorage();delete s[e],localStorage.setItem(this.versionStorageKey,JSON.stringify(s))}catch(s){console.warn("Failed to remove versions from storage:",s)}}getDraftStorage(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load drafts from storage:",e),{}}}getVersionStorage(){try{const e=localStorage.getItem(this.versionStorageKey);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load versions from storage:",e),{}}}loadDraftsFromStorage(){try{const e=this.getDraftStorage();for(const[s,n]of Object.entries(e)){const i=G(M({},n),{metadata:G(M({},n.metadata),{lastModified:new Date(n.metadata.lastModified)}),lastSaved:n.lastSaved?new Date(n.lastSaved):void 0});this.drafts.set(s,i),i.autoSaveEnabled&&this.startAutoSave(s)}}catch(e){console.warn("Failed to load drafts from storage:",e)}}loadVersionsFromStorage(){try{const e=this.getVersionStorage();for(const[s,n]of Object.entries(e)){const i=n.map(o=>G(M({},o),{timestamp:new Date(o.timestamp)}));this.versions.set(s,i)}}catch(e){console.warn("Failed to load versions from storage:",e)}}};xe(kt,"instance",null);let zr=kt;const Le=zr.getInstance();function Td(t,e,s={},n={}){const{enabled:i=!0,interval:o=3e4,debounceMs:c=2e3,maxSize:d=1024*1024,onSave:h,onError:f,onAutoSave:g,onStatusChange:v,enableVersioning:j=!0,maxVersions:_=10}=n,[E,R]=P.useState({draft:null,status:"draft",isDirty:!1,lastSaved:null,error:null,isLoading:!1}),T=P.useRef(s),L=P.useRef({}),H=P.useRef(!1),$=P.useRef(null);P.useEffect(()=>{const K=Le.getDraft(t);K?(R(z=>G(M({},z),{draft:K,status:K.status,isDirty:!1,lastSaved:K.lastSaved||null,error:K.error||null})),T.current=K.content):D(s,{})},[t,e]),P.useEffect(()=>Le.subscribe(t,z=>{R(Z=>{const oe=G(M({},Z),{draft:z,status:z.status,isDirty:z.status==="draft",lastSaved:z.lastSaved||null,error:z.error||null,isLoading:z.status==="saving"});return v&&v(z.status),z.status==="saved"&&h&&h(z),z.status==="error"&&f&&z.error&&f(new Error(z.error)),oe})}),[t,h,f,v]),P.useEffect(()=>(i&&!E.isLoading&&($.current&&clearTimeout($.current),$.current=setTimeout(()=>{E.isDirty&&!H.current&&w()},o)),()=>{$.current&&clearTimeout($.current)}),[i,E.isDirty,E.isLoading,o]);const D=P.useCallback((K,z)=>A(null,null,function*(){try{R(ue=>G(M({},ue),{isLoading:!0,error:null}));const Z={autoSaveInterval:i?o:0,enableVersioning:j,maxVersions:_},oe=yield Le.createDraft(t,e,K,G(M(M({},L.current),z),{title:z.title||`Untitled ${e}`}));return R(ue=>G(M({},ue),{draft:oe,status:oe.status,isDirty:!1,lastSaved:oe.lastSaved||null,error:null,isLoading:!1})),T.current=K,oe}catch(Z){const oe=Z instanceof Error?Z.message:"Failed to create draft";throw R(ue=>G(M({},ue),{error:oe,isLoading:!1})),f&&f(new Error(oe)),Z}}),[t,e,i,o,j,_,f]),V=P.useCallback(ui((K,z)=>A(null,null,function*(){if(!E.draft){yield D(K,z);return}const Z=JSON.stringify(K).length;if(Z>d){const oe=new Error(`Content size (${Z} bytes) exceeds limit (${d} bytes)`);R(ue=>G(M({},ue),{error:oe.message})),f&&f(oe);return}T.current=K,z&&(L.current=M(M({},L.current),z));try{yield Le.updateDraft(t,K,M(M({},L.current),z))}catch(oe){const ue=oe instanceof Error?oe.message:"Failed to update draft";R(ze=>G(M({},ze),{error:ue})),f&&f(new Error(ue))}}),c),[E.draft,t,d,c,f,D]),B=P.useCallback(()=>A(null,null,function*(){if(!E.draft){yield D(T.current,L.current);return}try{H.current=!0,yield Le.saveDraft(t),h&&h(E.draft)}catch(K){const z=K instanceof Error?K.message:"Failed to save draft";R(Z=>G(M({},Z),{error:z})),f&&f(new Error(z))}finally{H.current=!1}}),[E.draft,t,h,f,D]),w=P.useCallback(()=>A(null,null,function*(){if(!(!E.draft||!i||H.current))try{const K=yield Le.saveDraft(t);g&&g(K)}catch(K){console.warn("Auto-save failed:",K)}}),[E.draft,i,t,g]),m=P.useCallback((K,z)=>A(null,null,function*(){yield D(K,z)}),[D]),x=P.useCallback(()=>A(null,null,function*(){try{yield Le.deleteDraft(t),R({draft:null,status:"draft",isDirty:!1,lastSaved:null,error:null,isLoading:!1}),T.current=null,L.current={}}catch(K){const z=K instanceof Error?K.message:"Failed to delete draft";R(Z=>G(M({},Z),{error:z})),f&&f(new Error(z))}}),[t,f]),b=P.useCallback(K=>{E.draft&&Le.toggleAutoSave(t,K)},[E.draft,t]),S=P.useCallback(K=>A(null,null,function*(){try{const z=yield Le.restoreVersion(t,K);R(Z=>G(M({},Z),{draft:z,status:z.status,isDirty:z.status==="draft",lastSaved:z.lastSaved||null,error:z.error||null})),T.current=z.content}catch(z){const Z=z instanceof Error?z.message:"Failed to restore version";R(oe=>G(M({},oe),{error:Z})),f&&f(new Error(Z))}}),[t,f]),N=P.useCallback(()=>Le.getVersions(t),[t]),y=P.useCallback(()=>E.draft?{id:E.draft.id,title:E.draft.metadata.title||"Untitled",type:E.draft.type,lastModified:E.draft.metadata.lastModified,size:E.draft.metadata.size,status:E.draft.status,hasUnsavedChanges:E.draft.status==="draft",projectId:E.draft.metadata.projectId,version:E.draft.metadata.version}:null,[E.draft]),ne=P.useCallback(()=>Le.getStorageStats(),[]),pe=P.useCallback(()=>{R(K=>G(M({},K),{error:null}))},[]),ie=P.useCallback(()=>E.draft?JSON.stringify({draft:E.draft,content:T.current,exportedAt:new Date},null,2):null,[E.draft]),Te=P.useCallback(K=>A(null,null,function*(){try{const z=JSON.parse(K);return z.draft&&z.content?(yield D(z.content,z.draft.metadata),!0):!1}catch(z){const Z="Failed to import draft";return R(oe=>G(M({},oe),{error:Z})),f&&f(new Error(Z)),!1}}),[D,f]);P.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const ye=P.useMemo(()=>!1,[]),Oe=P.useMemo(()=>!1,[]);return{draft:E.draft,status:E.status,isDirty:E.isDirty,lastSaved:E.lastSaved,error:E.error,canUndo:ye,canRedo:Oe,save:B,update:V,createDraft:m,deleteDraft:x,toggleAutoSave:b,restoreVersion:S,getVersions:N,getMetadata:y,getStats:ne,clearError:pe,exportDraft:ie,importDraft:Te}}class Id{constructor(){xe(this,"shortcuts",new Map);xe(this,"contextStack",["global"]);xe(this,"eventListeners",new Map);xe(this,"debugMode",!1)}registerShortcut(e,s="global",n=0){const i=this.shortcuts.get(s)||[],o=i.find(c=>this.isSameShortcut(c.shortcut,e));if(o)if(n>o.priority){const c=i.filter(d=>!this.isSameShortcut(d.shortcut,e));c.push({shortcut:e,priority:n,context:s}),this.shortcuts.set(s,c),this.debugMode&&console.warn(`[KeyboardService] Replaced shortcut ${e.key} in context ${s}`)}else this.debugMode&&console.warn(`[KeyboardService] Ignored conflicting shortcut ${e.key} in context ${s}`);else i.push({shortcut:e,priority:n,context:s}),this.shortcuts.set(s,i);i.sort((c,d)=>d.priority-c.priority)}unregisterShortcut(e,s="global"){const i=(this.shortcuts.get(s)||[]).filter(o=>o.shortcut.key!==e);this.shortcuts.set(s,i)}unregisterContext(e){this.shortcuts.delete(e)}pushContext(e){this.contextStack.push(e),this.debugMode&&console.log(`[KeyboardService] Pushed context: ${e}`,this.contextStack)}popContext(){if(this.contextStack.length>1){const e=this.contextStack.pop();return this.debugMode&&console.log(`[KeyboardService] Popped context: ${e}`,this.contextStack),e}return null}setContext(e){this.contextStack=["global",e],this.debugMode&&console.log(`[KeyboardService] Set context: ${e}`,this.contextStack)}getCurrentContext(){return this.contextStack[this.contextStack.length-1]}toggleShortcut(e,s,n="global"){const o=(this.shortcuts.get(n)||[]).find(c=>c.shortcut.key===e);o&&(o.shortcut.enabled=s)}toggleContext(e,s){(this.shortcuts.get(e)||[]).forEach(i=>{i.shortcut.enabled=s})}isSameShortcut(e,s){return e.key.toLowerCase()===s.key.toLowerCase()&&this.compareModifiers(e.modifiers,s.modifiers)}compareModifiers(e,s){const n=e||{},i=s||{};return(n.ctrl||!1)===(i.ctrl||!1)&&(n.alt||!1)===(i.alt||!1)&&(n.shift||!1)===(i.shift||!1)&&(n.meta||!1)===(i.meta||!1)}static parseShortcutString(e){const s=e.toLowerCase().split("+").map(o=>o.trim()),n=s.pop()||"",i={};return s.forEach(o=>{switch(o){case"ctrl":case"control":i.ctrl=!0;break;case"alt":case"option":i.alt=!0;break;case"shift":i.shift=!0;break;case"cmd":case"command":case"meta":i.meta=!0;break}}),{key:n,modifiers:i}}static formatShortcut(e){var n,i,o,c;const s=[];return(n=e.modifiers)!=null&&n.ctrl&&s.push("Ctrl"),(i=e.modifiers)!=null&&i.alt&&s.push("Alt"),(o=e.modifiers)!=null&&o.shift&&s.push("Shift"),(c=e.modifiers)!=null&&c.meta&&s.push("Cmd"),s.push(e.key.toUpperCase()),s.join("+")}getShortcuts(e){return e?this.shortcuts.get(e)||[]:this.contextStack.map(s=>this.shortcuts.get(s)||[]).flat().sort((s,n)=>n.priority-s.priority)}setDebugMode(e){this.debugMode=e}clear(){this.shortcuts.clear(),this.contextStack=["global"]}getStats(){const e=Array.from(this.shortcuts.values()).reduce((s,n)=>s+n.length,0);return{totalContexts:this.shortcuts.size,totalShortcuts:e,currentContext:this.getCurrentContext(),contextStack:[...this.contextStack]}}}const At=new Id;function Cd(){const t=P.useCallback(i=>{At.pushContext(i)},[]),e=P.useCallback(()=>At.popContext(),[]),s=P.useCallback(i=>{At.setContext(i)},[]),n=P.useCallback(()=>At.getCurrentContext(),[]);return{pushContext:t,popContext:e,setContext:s,getCurrentContext:n}}function Rd(t,e={}){const{context:s=t||"global",priority:n=0,enabled:i=!0,global:o=!1,preventDefault:c=!0,stopPropagation:d=!1,throttleMs:h=100}=e,f=P.useRef(new Map),g=Cd();P.useEffect(()=>{s&&g.setContext(s)},[s,g]);const v=P.useMemo(()=>ui(D=>{const V=At.getShortcuts(s);for(const B of V){const{shortcut:w}=B;if(!(!w.enabled&&w.enabled!==void 0)&&Dd(D,w)){c&&D.preventDefault(),d&&D.stopPropagation();try{w.action()}catch(m){console.error(`Error executing shortcut ${w.id}:`,m)}break}}},h),[s,c,d,h]);P.useEffect(()=>{if(o&&i)return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[o,i,v]);const j=P.useCallback((D,V,B={})=>{const{context:w=s,priority:m=n,enabled:x=i,global:b=o,preventDefault:S=c}=B,N=G(M({},D),{action:()=>{var ne,pe,ie,Te;const y=new KeyboardEvent("keydown",{key:D.key,ctrlKey:(ne=D.modifiers)==null?void 0:ne.ctrl,altKey:(pe=D.modifiers)==null?void 0:pe.alt,shiftKey:(ie=D.modifiers)==null?void 0:ie.shift,metaKey:(Te=D.modifiers)==null?void 0:Te.meta});D.action&&D.action(y),V(y)},enabled:x,global:b,preventDefault:S});return At.registerShortcut(N,w,m),f.current.set(D.id,{shortcut:N,handler:V,cleanup:()=>{At.unregisterShortcut(D.key,w)}}),()=>{_(D.id)}},[s,n,i,o,c,_]),_=P.useCallback(D=>{const V=f.current.get(D);V&&(V.cleanup&&V.cleanup(),f.current.delete(D))},[]),E=P.useCallback(()=>{f.current.forEach((D,V)=>{D.cleanup&&D.cleanup()}),f.current.clear()},[]),R=P.useCallback(D=>f.current.has(D),[]),T=P.useCallback(()=>Array.from(f.current.values()).map(D=>D.shortcut),[]),L=P.useCallback((D,V)=>{const B=f.current.get(D);if(B&&B.shortcut.enabled!==!1)try{return B.shortcut.action(),V&&B.handler&&B.handler(V),!0}catch(w){return console.error(`Error executing shortcut ${D}:`,w),!1}return!1},[]),H=P.useCallback(D=>{g.setContext(D)},[g]),$=P.useCallback(()=>g.getCurrentContext(),[g]);return P.useEffect(()=>()=>{E()},[E]),{registerShortcut:j,unregisterShortcut:_,unregisterAll:E,isShortcutRegistered:R,getRegisteredShortcuts:T,executeShortcut:L,setContext:H,getCurrentContext:$}}function Dd(t,e){if(t.key.toLowerCase()!==e.key.toLowerCase())return!1;const s=e.modifiers||{};return!((s.ctrl||!1)!==t.ctrlKey||(s.alt||!1)!==t.altKey||(s.shift||!1)!==t.shiftKey||(s.meta||!1)!==t.metaKey)}const _t=h=>{var f=h,{children:t,variant:e="primary",size:s="md",isLoading:n=!1,leftIcon:i,className:o="",disabled:c}=f,d=Ze(f,["children","variant","size","isLoading","leftIcon","className","disabled"]);const g="relative inline-flex items-center justify-center font-medium transition-all duration-200 ease-out rounded-[24px] disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-[0.98]",v={sm:"px-4 py-2 text-sm",md:"px-6 py-2.5 text-sm",lg:"px-8 py-3 text-base"},j={primary:"bg-primary hover:bg-primary-hover text-ink-inverse shadow-ambient hover:shadow-float hover:-translate-y-0.5 focus:ring-primary/40",secondary:"bg-surface text-ink-primary hover:bg-subtle shadow-ambient hover:shadow-float focus:ring-primary/20",ghost:"bg-transparent text-ink-secondary hover:text-ink-primary hover:bg-subtle rounded-[24px]",danger:"bg-state-danger text-white hover:bg-red-700 shadow-ambient hover:shadow-float hover:-translate-y-0.5 focus:ring-red-500/40"};return a.jsxs("button",G(M({className:`
        ${g}
        ${v[s]}
        ${j[e]}
        ${o}
      `,disabled:c||n},d),{children:[n&&a.jsx(uc,{size:16,className:"animate-spin mr-2"}),!n&&i&&a.jsx("span",{className:"mr-2 opacity-90",children:i}),a.jsx("span",{className:n?"opacity-0":"opacity-100",children:t})]}))},Qt=({children:t,className:e="",level:s="md",interactive:n=!1})=>{const i={sm:"p-4",md:"p-6",lg:"p-8"};return a.jsx("div",{className:`
        glass
        rounded-[24px]
        shadow-ambient
        transition-all duration-200
        ${i[s]}
        ${n?"hover:shadow-float hover:-translate-y-0.5 cursor-pointer":""}
        ${e}
      `,children:t})},Cn=U.forwardRef((g,f)=>{var v=g,{label:t,error:e,helperText:s,variant:n="primary",size:i="md",disabled:o=!1,className:c="",rows:d=4}=v,h=Ze(v,["label","error","helperText","variant","size","disabled","className","rows"]);const j="w-full rounded-[24px] text-sm font-medium outline-none transition-all focus:ring-2 focus:ring-offset-2 focus:ring-primary/40 resize-none",_={primary:`bg-surface text-ink-primary placeholder-ink-tertiary ${e?"focus:ring-state-danger/40 focus:bg-danger-bg":"focus:bg-subtle focus:ring-primary/40"}`,secondary:`bg-subtle text-ink-primary placeholder-ink-tertiary ${e?"focus:ring-state-danger/40":"focus:bg-surface focus:ring-primary/40"}`},E={sm:"px-3 py-2 text-xs",md:"px-4 py-3 text-sm",lg:"px-5 py-4 text-base"},R=o?"opacity-50 cursor-not-allowed bg-subtle":"",T=`${j} ${_[n]} ${E[i]} ${R} ${c}`;return a.jsxs("div",{className:"flex flex-col gap-2",children:[t&&a.jsxs("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide",children:[t,h.required&&a.jsx("span",{className:"text-state-danger ml-1",children:"*"})]}),a.jsx("textarea",M({ref:f,className:T,disabled:o,rows:d,"aria-invalid":e?"true":"false","aria-describedby":e?`${h.name}-error`:s?`${h.name}-helper`:void 0},h)),e&&a.jsx("p",{id:`${h.name}-error`,className:"text-xs font-medium text-state-danger",children:e}),s&&!e&&a.jsx("p",{id:`${h.name}-helper`,className:"text-xs text-ink-tertiary font-medium",children:s})]})});Cn.displayName="Textarea";const Od=U.forwardRef((h,d)=>{var f=h,{label:t,helperText:e,variant:s,size:n,rows:i,textareaProps:o}=f,c=Ze(f,["label","helperText","variant","size","rows","textareaProps"]);var T;const{field:g,fieldState:v}=Sc(c),R=g,{ref:j}=R,_=Ze(R,["ref"]),E=L=>{typeof d=="function"?d(L):d&&(d.current=L),j(L)};return a.jsx(Cn,G(M(M({ref:E},_),o),{label:t,error:(T=v.error)==null?void 0:T.message,helperText:e,variant:s,size:n,rows:i}))});Od.displayName="TextareaField";const Pd=({projectId:t,projectTitle:e="Untitled Project",brief:s="",onBriefChange:n,onNavigateToWritersRoom:i,onNavigateToMoodboard:o})=>{const[c,d]=P.useState(!1),[h,f]=P.useState(s),[g,v]=P.useState(!0),[j,_]=P.useState(null),[E,R]=P.useState([{id:"1",name:"Sarah Chen",status:"online",lastSeen:new Date},{id:"2",name:"Mike Rodriguez",status:"away",lastSeen:new Date(Date.now()-300*1e3)}]),[T,L]=P.useState([{id:"1",type:"user_joined",user:"Sarah Chen",message:"joined the project",timestamp:new Date(Date.now()-120*1e3)},{id:"2",type:"brief_update",user:"You",message:"updated the creative brief",timestamp:new Date(Date.now()-300*1e3)}]),H=P.useRef(null),$=Td(`project-dashboard-${t}`,"document",{brief:h,timestamp:new Date},{enabled:!0,interval:3e4,debounceMs:2e3,enableVersioning:!0,maxVersions:10,onSave:b=>{_(new Date),console.log("Project dashboard saved:",b.id)},onError:b=>{console.error("Auto-save error:",b)}});Rd([{key:"s",modifiers:["meta"],handler:b=>{b.preventDefault(),V()},description:"Save brief"},{key:"e",modifiers:["meta"],handler:b=>{b.preventDefault(),c||d(!0)},description:"Edit brief"},{key:"Escape",modifiers:[],handler:b=>{c&&(d(!1),f(s))},description:"Cancel editing"}],{}),P.useEffect(()=>{const b=()=>v(!0),S=()=>v(!1);return window.addEventListener("online",b),window.addEventListener("offline",S),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",S)}},[]),P.useEffect(()=>{H.current&&(H.current.scrollTop=H.current.scrollHeight)},[T]);const D=P.useCallback(b=>{const S=G(M({},b),{id:`activity_${Date.now()}`,timestamp:new Date});L(N=>[...N,S])},[]),V=()=>{n==null||n(h),d(!1),D({type:"brief_update",user:"You",message:"updated the creative brief"}),$.save()},B=b=>{f(b),$.update({brief:b,timestamp:new Date})},w=b=>{switch(b){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},m=b=>{switch(b){case"brief_update":return a.jsx(Io,{size:14});case"asset_upload":return a.jsx(ss,{size:14});case"script_generated":return a.jsx(Br,{size:14});case"user_joined":return a.jsx(hc,{size:14});case"collaboration":return a.jsx(Ur,{size:14});default:return a.jsx(In,{size:14})}},x=b=>{const N=new Date().getTime()-b.getTime(),y=Math.floor(N/(1e3*60)),ne=Math.floor(N/(1e3*60*60));return ne>0?`${ne}h ago`:y>0?`${y}m ago`:"Just now"};return a.jsx("div",{className:"w-full h-full bg-app",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-ink-tertiary uppercase font-bold tracking-widest mb-2",children:[a.jsx("span",{children:"Dashboard"}),a.jsx("span",{children:"/"}),a.jsx("span",{children:"Projects"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-ink-primary",children:e})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-4xl font-bold text-ink-primary",children:e}),a.jsxs("div",{className:"flex items-center gap-2",children:[g?a.jsx(dc,{size:16,className:"text-green-500"}):a.jsx(Vu,{size:16,className:"text-red-500"}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${g?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g?"Online":"Offline"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-ink-secondary",children:[a.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle font-semibold text-ink-primary",children:"Status: Active"}),a.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle text-ink-primary",children:"Due: TBD"}),a.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle text-ink-primary",children:"Owner: Creative"}),a.jsxs("span",{className:`px-3 py-1 rounded-full border text-xs ${$.status==="saving"?"bg-blue-100 border-blue-300 text-blue-800":$.status==="saved"?"bg-green-100 border-green-300 text-green-800":"bg-subtle border-border-subtle text-ink-primary"}`,children:[$.status==="saving"&&a.jsx(vn,{size:12,className:"inline mr-1 animate-spin"}),$.status==="saved"&&a.jsx(Sr,{size:12,className:"inline mr-1"}),j?`Saved ${x(j)}`:"Draft"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{size:16,className:"text-ink-tertiary"}),a.jsxs("div",{className:"flex -space-x-2",children:[E.slice(0,3).map(b=>a.jsxs("div",{className:"relative w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white text-xs font-medium border-2 border-white",title:`${b.name} (${b.status})`,children:[b.name.split(" ").map(S=>S[0]).join(""),a.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white ${w(b.status)}`})]},b.id)),E.length>3&&a.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white text-xs font-medium border-2 border-white",children:["+",E.length-3]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(_t,{size:"sm",variant:"secondary",onClick:o,children:"View Moodboard"}),a.jsx(_t,{size:"sm",variant:"primary",onClick:i,children:"Open Writer's Room"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs(Qt,{level:"lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Creative Brief"}),a.jsxs("div",{className:"flex items-center gap-2",children:[$.status==="saving"&&a.jsx(vn,{size:14,className:"text-blue-500 animate-spin"}),$.status==="saved"&&a.jsx(Sr,{size:14,className:"text-green-500"}),!c&&a.jsx("button",{onClick:()=>d(!0),className:"p-2 hover:bg-white/10 rounded-[16px] transition-colors text-ink-tertiary","aria-label":"Edit brief",title:"Edit brief (âŒ˜E)",children:a.jsx(Io,{size:16})})]})]}),c?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Cn,{value:h,onChange:b=>B(b.target.value),placeholder:"Enter your creative brief...",rows:6,variant:"secondary",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_t,{size:"sm",variant:"primary",onClick:V,leftIcon:a.jsx(Sr,{size:14}),children:"Save Brief (âŒ˜S)"}),a.jsx(_t,{size:"sm",variant:"ghost",onClick:()=>{f(s),d(!1)},children:"Cancel (Esc)"})]})]}):a.jsx("div",{className:"prose-like text-sm text-ink-secondary leading-relaxed",children:h||a.jsx("p",{className:"text-ink-tertiary italic",children:"No brief yet. Click edit to add one."})})]}),a.jsxs(Qt,{level:"lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-ink-primary flex items-center gap-2",children:[a.jsx(In,{size:16}),"Activity Feed"]}),a.jsx("button",{className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Refresh activities",children:a.jsx(vn,{size:14,className:"text-ink-tertiary"})})]}),a.jsx("div",{ref:H,className:"space-y-3 max-h-64 overflow-y-auto",children:T.map(b=>a.jsxs("div",{className:"flex items-start gap-3 p-2 hover:bg-white/5 rounded-lg transition-colors",children:[a.jsx("div",{className:"p-1.5 rounded-full bg-primary/10 text-primary flex-shrink-0",children:m(b.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm text-ink-primary",children:[a.jsx("span",{className:"font-medium",children:b.user})," ",b.message]}),a.jsx("p",{className:"text-xs text-ink-tertiary mt-0.5",children:x(b.timestamp)})]})]},b.id))})]}),a.jsxs(Qt,{level:"lg",children:[a.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-4",children:"Mood & Tone"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide block mb-2",children:"Mood Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Cinematic","Minimalist","Bold","Elegant"].map(b=>a.jsx("button",{className:"px-3 py-1.5 rounded-[24px] bg-primary-tint text-primary text-xs font-medium hover:bg-primary hover:text-white transition-colors",children:b},b))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide block mb-2",children:"Do's & Don'ts"}),a.jsx(Cn,{placeholder:"List visual and tonal guidelines...",rows:3,variant:"secondary"})]})]})]}),a.jsxs(Qt,{level:"lg",children:[a.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-3",children:"Risks & Blockers"}),a.jsxs("ul",{className:"space-y-2 text-sm text-ink-secondary",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"mt-1 w-2 h-2 rounded-full bg-amber-500"}),"Clarify deliverable scope and final runtime."]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"mt-1 w-2 h-2 rounded-full bg-amber-500"}),"Secure reference assets for visual direction."]})]})]})]}),a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[a.jsxs(Qt,{level:"lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Project Assets"}),a.jsx(_t,{size:"sm",variant:"secondary",children:"Upload Asset"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((b,S)=>a.jsx("div",{className:"aspect-square bg-subtle border border-border-subtle rounded-lg flex items-center justify-center text-ink-tertiary",children:a.jsx(ss,{size:24})},S))})]}),a.jsxs(Qt,{level:"lg",children:[a.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-6",children:"Project Timeline"}),a.jsx("div",{className:"space-y-4",children:[{phase:"Concept & Planning",status:"completed",date:"Dec 10"},{phase:"Script Development",status:"in-progress",date:"Dec 13"},{phase:"Pre-production",status:"pending",date:"Dec 20"},{phase:"Production",status:"pending",date:"Jan 5"},{phase:"Post-production",status:"pending",date:"Jan 20"}].map((b,S)=>a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${b.status==="completed"?"bg-green-500":b.status==="in-progress"?"bg-blue-500":"bg-gray-400"}`}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`font-medium ${b.status==="completed"?"text-ink-secondary line-through":b.status==="in-progress"?"text-ink-primary":"text-ink-secondary"}`,children:b.phase}),a.jsx("span",{className:"text-sm text-ink-tertiary",children:b.date})]})})]},S))})]})]})]})]})})},Ld=({freelancers:t=[],onSelect:e,onTalentMatch:s})=>{const[n,i]=P.useState(""),[o,c]=P.useState([]),[d,h]=P.useState(t),f=_=>{i(_),v(_,o)},g=_=>{const E=o.includes(_)?o.filter(R=>R!==_):[...o,_];c(E),v(n,E)},v=(_,E)=>{let R=t;_&&(R=R.filter(T=>T.name.toLowerCase().includes(_.toLowerCase())||T.role.toLowerCase().includes(_.toLowerCase())||T.skills.some(L=>L.toLowerCase().includes(_.toLowerCase())))),E.length>0&&(R=R.filter(T=>E.some(L=>T.skills.includes(L)))),h(R)},j=Array.from(new Set(t.flatMap(_=>_.skills))).sort();return a.jsx("div",{className:"w-full h-full bg-app",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-ink-primary mb-2",children:"Freelancers"}),a.jsx("p",{className:"text-ink-secondary",children:"Discover and match creative professionals with your projects"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Us,{placeholder:"Search by name, role, or skill...",icon:a.jsx(Rs,{size:18}),value:n,onChange:_=>f(_.target.value)})}),a.jsxs(_t,{onClick:()=>s==null?void 0:s(n),children:[a.jsx(Co,{size:16,className:"mr-2"}),"AI Talent Match"]})]}),j.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide mb-3",children:"Filter by Skills"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(_=>a.jsx("button",{onClick:()=>g(_),className:`px-3 py-1.5 rounded-[24px] text-xs font-medium transition-all ${o.includes(_)?"bg-primary text-ink-inverse":"bg-subtle text-ink-secondary hover:bg-surface"}`,children:_},_))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.length>0?d.map(_=>a.jsxs(dt,{hoverable:!0,onClick:()=>e==null?void 0:e(_),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-ink-primary",children:_.name}),a.jsx("p",{className:"text-sm text-ink-secondary",children:_.role})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zu,{size:16,className:"text-edge-magenta fill-edge-magenta"}),a.jsx("span",{className:"text-sm font-semibold text-ink-primary",children:_.rating})]})]}),a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-ink-secondary",children:[a.jsx(Hu,{size:14,className:"mr-2"}),_.location]}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-semibold text-primary",children:["$",_.rate]}),a.jsx("span",{className:"text-ink-secondary",children:"/hour"})]})]}),_.bio&&a.jsx("p",{className:"text-sm text-ink-secondary mb-4 line-clamp-2",children:_.bio}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.skills.slice(0,3).map(E=>a.jsx("span",{className:"px-2 py-1 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:E},E)),_.skills.length>3&&a.jsxs("span",{className:"px-2 py-1 text-xs text-ink-tertiary",children:["+",_.skills.length-3," more"]})]})}),a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-[12px] ${_.availability==="available"?"bg-state-success-bg text-state-success":"bg-state-warning-bg text-state-warning"}`,children:_.availability==="available"?"âœ“ Available":"Limited Availability"})}),a.jsx(_t,{variant:"secondary",className:"w-full",children:"View Profile"})]},_.id)):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx(Co,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),a.jsx("p",{className:"text-ink-secondary",children:"No freelancers match your criteria"})]})})]})})},Vo=[{label:"New Project",path:"/projects",category:"Create",keywords:["campaign","brief"]},{label:"New Freelancer",path:"/freelancers",category:"Create",keywords:["roster","freelancer"]},{label:"Add Moodboard Item",path:"/moodboard",category:"Create",keywords:["moodboard","visuals","asset"]}],zo=[{label:"Dashboard",path:"/",category:"Navigation",keywords:["home","overview"]},{label:"Projects",path:"/projects",category:"Navigation",keywords:["campaigns","briefs"]},{label:"Moodboard",path:"/moodboard",category:"Navigation",keywords:["inspiration","moodboard","assets"]},{label:"Freelancers",path:"/freelancers",category:"Navigation",keywords:["freelancers","roster","talent"]},{label:"Writers Room",path:"/writers-room",category:"Navigation",keywords:["ai","chat","creative"]}],Md=()=>{const[t,e]=P.useState(!1),[s,n]=P.useState(!1),[i,o]=P.useState(""),c=Cu(),d=cs(),h=P.useMemo(()=>[...Vo,...zo],[]),f=P.useMemo(()=>{const _=i.trim().toLowerCase();return _?h.filter(E=>{var R;return E.label.toLowerCase().includes(_)||((R=E.keywords)==null?void 0:R.some(T=>T.toLowerCase().includes(_)))}):zo},[h,i]),g=_=>{_!=="#"&&(c?d(_):window.location.href=_,e(!1),n(!1))},v=_=>{_.preventDefault(),e(!0)},j=(_=!1)=>t&&a.jsx("div",{className:`absolute ${_?"bottom-36 left-4 right-4":"bottom-20 left-0 right-0 mx-auto max-w-3xl"} bg-surface border border-border-subtle/50 shadow-elevation rounded-2xl overflow-hidden z-[65] pointer-events-auto animate-in fade-in slide-in-from-bottom-2 duration-300`,role:"listbox","aria-label":"Command palette results",children:f.length===0?a.jsx("div",{className:"px-6 py-4 text-xs font-black uppercase tracking-widest text-ink-tertiary opacity-40",children:"No matches found."}):a.jsx("div",{className:"flex flex-col",children:f.map(E=>a.jsxs("button",{className:"w-full flex items-center justify-between text-left px-6 py-4 hover:bg-subtle transition-colors group focus:outline-none focus:bg-subtle",onClick:()=>g(E.path),role:"option",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-black text-black tracking-tight group-hover:translate-x-1 transition-transform",children:E.label}),a.jsx("span",{className:"text-[9px] uppercase tracking-[0.3em] font-black text-ink-tertiary opacity-40 mt-1",children:E.category})]}),a.jsx($s,{size:14,className:"text-ink-tertiary opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all","aria-hidden":"true"})]},E.label))})});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:flex fixed bottom-8 left-72 right-0 justify-center z-[60] px-8 pointer-events-none",children:a.jsxs("div",{className:"glass-bar pointer-events-auto w-full max-w-3xl h-16 rounded-pill flex items-center justify-between px-2 pr-3 shadow-lg hover:shadow-xl transition-shadow relative",children:[a.jsxs("form",{onSubmit:v,className:"flex items-center pl-4 w-full gap-4",children:[a.jsx(Ro,{size:18,className:"text-ink-secondary","aria-hidden":"true"}),a.jsx("label",{htmlFor:"command-input",className:"sr-only",children:"Search projects, assets, or run AI command"}),a.jsx("input",{id:"command-input",type:"text",value:i,onChange:_=>{o(_.target.value),e(!0)},placeholder:"INTENT SEARCH...",className:"bg-transparent border-none outline-none h-full w-full text-xs font-black tracking-[0.2em] text-black placeholder:text-ink-tertiary/40 uppercase focus:placeholder:opacity-0 transition-opacity",role:"searchbox","aria-label":"Search projects, assets, or run AI command",autoComplete:"off",onFocus:()=>e(!0),onBlur:()=>setTimeout(()=>e(!1),100)})]}),a.jsxs("div",{className:"flex items-center gap-4 shrink-0 px-2",children:[a.jsx("div",{className:"hidden lg:flex text-[9px] font-black text-ink-tertiary bg-subtle px-2 py-1 rounded-md border border-border-subtle tracking-tighter opacity-40",children:"CMD K"}),a.jsx("button",{className:"w-10 h-10 rounded-full bg-black text-white flex items-center justify-center hover:scale-105 transition-all shadow-elevation focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2","aria-label":"Create new item",type:"button",title:"Create new item (Ctrl+N)",onClick:()=>n(_=>!_),children:a.jsx(ns,{size:18,"aria-hidden":"true"})})]}),j(!1),s&&a.jsxs("div",{className:"absolute bottom-20 right-6 w-64 bg-surface border border-border-subtle rounded-xl shadow-xl p-3 z-[66]",children:[a.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-ink-tertiary mb-2 font-bold",children:"Quick Create"}),a.jsx("div",{className:"flex flex-col gap-1",children:Vo.map(_=>a.jsx("button",{onClick:()=>g(_.path),className:"px-3 py-2 rounded-lg hover:bg-subtle text-sm font-semibold text-ink-primary transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 text-left",children:_.label},_.label))})]})]})}),a.jsx("div",{className:"md:hidden fixed bottom-20 left-4 right-4 flex justify-center z-[60] pointer-events-none",children:a.jsxs("div",{className:"pointer-events-auto w-full max-w-md h-14 rounded-pill flex items-center justify-between px-3 pr-3 bg-surface/95 backdrop-blur-xl border border-border-subtle shadow-lg hover:shadow-xl transition-shadow relative",children:[a.jsxs("form",{onSubmit:v,className:"flex items-center w-full gap-3",children:[a.jsx(Ro,{size:16,className:"text-ink-secondary","aria-hidden":"true"}),a.jsx("label",{htmlFor:"mobile-command-input",className:"sr-only",children:"Search or run command"}),a.jsx("input",{id:"mobile-command-input",type:"text",value:i,onChange:_=>{o(_.target.value),e(!0)},placeholder:"INTENT SEARCH...",className:"bg-transparent border-none outline-none h-full w-full text-xs font-black tracking-[0.2em] text-black placeholder:text-ink-tertiary/40 uppercase focus:placeholder:opacity-0 transition-opacity",role:"searchbox","aria-label":"Search or run command",autoComplete:"off",onFocus:()=>e(!0),onBlur:()=>setTimeout(()=>e(!1),100)})]}),a.jsx("button",{className:"w-10 h-10 rounded-full bg-black text-white flex items-center justify-center hover:scale-105 transition-all shadow-elevation focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-1","aria-label":"Create new item",type:"button",title:"Create new item",onClick:()=>n(_=>!_),children:a.jsx(ns,{size:18,"aria-hidden":"true"})}),j(!0)]})})]})},Hr=[{path:"/",label:"Dashboard",icon:qu,description:"Main dashboard with project overview and quick actions",metadata:{title:"Dashboard - Studio Roster",keywords:["dashboard","overview","projects"]}},{path:"/projects",label:"Projects",icon:Do,description:"Project management hub with creation and listing",metadata:{title:"Projects - Studio Roster",keywords:["projects","management","client"]}},{path:"/projects/:id",label:"Project Dashboard",icon:Do,description:"Individual project workspace with brief, assets, and tools",metadata:{title:"Project Dashboard - Studio Roster",keywords:["project","dashboard","brief","assets"]}},{path:"/moodboard",label:"Moodboard",icon:Gu,description:"Visual inspiration and moodboard management",metadata:{title:"Moodboard - Studio Roster",keywords:["moodboard","visuals","inspiration","assets"]}},{path:"/freelancers",label:"Freelancers",icon:Ur,description:"Freelancer roster and talent management",metadata:{title:"Freelancers - Studio Roster",keywords:["freelancers","roster","hiring","talent"]}},{path:"/writers-room",label:"Writers Room",icon:Sn,description:"Lumina-powered creative collaboration and chat interface",metadata:{title:"Writers Room - Studio Roster",keywords:["writers room","lumina","firebase ai","gemini","ai chat","collaboration","creative"]}}],En=t=>["/projects/:id"].some(s=>{const n=s.replace(/:[^/]+/g,"[^/]+");return new RegExp(`^${n}$`).test(t)})?Hr.find(s=>s.path==="/projects/:id"):Hr.find(s=>s.path===t),Fd=()=>Hr.filter(t=>["/","/projects","/moodboard","/freelancers","/writers-room"].includes(t.path)),$d=t=>{const e=[];if(t.split("/").filter(Boolean).length===0)return[En("/")];e.push(En("/"));const n=En(t);return n&&t!=="/"&&e.push(n),e},Ud=t=>t.startsWith("/projects"),Bd=t=>{const e=t.match(/^\/projects\/([^/]+)$/);return e?e[1]:null},Vd=()=>{const t=cs(),e=Fd(),s=()=>{t("/")},n=()=>{console.log("Settings clicked")};return a.jsxs("nav",{className:"fixed left-0 top-0 bottom-0 w-72 flex flex-col py-8 bg-sidebar border-r border-border-subtle z-50",children:[a.jsxs("div",{className:"px-8 mt-4 mb-20 flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:s,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),s())},children:[a.jsx("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center text-white",children:a.jsx("div",{className:"w-3 h-3 bg-white rounded-sm","aria-hidden":"true"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-black text-2xl tracking-tighter text-black leading-none",children:"Studio."}),a.jsx("p",{className:"text-[9px] text-ink-tertiary font-black tracking-[0.3em] uppercase mt-1 opacity-40",children:"System OS"})]})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto px-6 space-y-2","aria-label":"Main navigation",children:[a.jsx("div",{className:"nav-label",children:"Core Modules"}),e.map(i=>{const o=i.icon;return a.jsxs(Ru,{to:i.path,className:({isActive:c})=>`nav-item ${c?"active":""}`,"aria-label":`Navigate to ${i.label}`,children:[a.jsx(o,{size:18,strokeWidth:2,"aria-hidden":"true"}),a.jsx("span",{children:i.label})]},i.path)})]}),a.jsxs("div",{className:"px-6 mt-auto pt-10 flex flex-col gap-4",children:[a.jsxs("button",{className:"nav-item w-full text-xs font-black uppercase tracking-widest opacity-40 hover:opacity-100 transition-opacity","aria-label":"Open system configuration settings",tabIndex:0,onClick:n,children:[a.jsx(Wu,{size:14,"aria-hidden":"true"}),"Config"]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-subtle/50 cursor-pointer hover:bg-subtle transition-colors group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex-shrink-0 grayscale group-hover:grayscale-0 transition-all",children:a.jsx("img",{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop",className:"w-full h-full object-cover",alt:"Profile picture of Alex Director"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[11px] font-black text-black uppercase tracking-wider",children:"Alex Director"}),a.jsx("div",{className:"text-[9px] text-ink-tertiary font-bold uppercase tracking-widest",children:"Online"})]})]})]})]})};let _c=class extends P.Component{constructor(s){super(s);xe(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){var i,o;console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n}),(o=(i=this.props).onError)==null||o.call(i,s,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:a.jsxs("div",{className:"max-w-md w-full text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-6",children:a.jsx(Ku,{className:"w-8 h-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:this.handleRetry,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(vn,{className:"w-4 h-4"}),"Try Again"]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Refresh Page"})]}),!1]})}):this.props.children}};const zd={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},Ho={primary:"text-blue-600",secondary:"text-gray-600",white:"text-white"},Hd=({size:t="md",color:e="primary",text:s,className:n=""})=>a.jsxs("div",{className:`flex items-center justify-center gap-2 ${n}`,children:[a.jsx(uc,{className:`${zd[t]} ${Ho[e]} animate-spin`}),s&&a.jsx("span",{className:`text-sm ${Ho[e]}`,children:s})]});function Ec(t,e){return function(){return t.apply(e,arguments)}}const{toString:qd}=Object.prototype,{getPrototypeOf:di}=Object,{iterator:Vn,toStringTag:Nc}=Symbol,zn=(t=>e=>{const s=qd.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ve=t=>(t=t.toLowerCase(),e=>zn(e)===t),Hn=t=>e=>typeof e===t,{isArray:ls}=Array,rs=Hn("undefined");function Hs(t){return t!==null&&!rs(t)&&t.constructor!==null&&!rs(t.constructor)&&je(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kc=Ve("ArrayBuffer");function Gd(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kc(t.buffer),e}const Wd=Hn("string"),je=Hn("function"),jc=Hn("number"),qs=t=>t!==null&&typeof t=="object",Kd=t=>t===!0||t===!1,Nn=t=>{if(zn(t)!=="object")return!1;const e=di(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Nc in t)&&!(Vn in t)},Jd=t=>{if(!qs(t)||Hs(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},Xd=Ve("Date"),Yd=Ve("File"),Qd=Ve("Blob"),Zd=Ve("FileList"),eh=t=>qs(t)&&je(t.pipe),th=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||je(t.append)&&((e=zn(t))==="formdata"||e==="object"&&je(t.toString)&&t.toString()==="[object FormData]"))},sh=Ve("URLSearchParams"),[nh,rh,ih,oh]=["ReadableStream","Request","Response","Headers"].map(Ve),ah=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gs(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t=="undefined")return;let n,i;if(typeof t!="object"&&(t=[t]),ls(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Hs(t))return;const o=s?Object.getOwnPropertyNames(t):Object.keys(t),c=o.length;let d;for(n=0;n<c;n++)d=o[n],e.call(null,t[d],d,t)}}function Ac(t,e){if(Hs(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const Tt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Tc=t=>!rs(t)&&t!==Tt;function qr(){const{caseless:t,skipUndefined:e}=Tc(this)&&this||{},s={},n=(i,o)=>{const c=t&&Ac(s,o)||o;Nn(s[c])&&Nn(i)?s[c]=qr(s[c],i):Nn(i)?s[c]=qr({},i):ls(i)?s[c]=i.slice():(!e||!rs(i))&&(s[c]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Gs(arguments[i],n);return s}const ch=(t,e,s,{allOwnKeys:n}={})=>(Gs(e,(i,o)=>{s&&je(i)?t[o]=Ec(i,s):t[o]=i},{allOwnKeys:n}),t),lh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uh=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},dh=(t,e,s,n)=>{let i,o,c;const d={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)c=i[o],(!n||n(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=s!==!1&&di(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},hh=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},fh=t=>{if(!t)return null;if(ls(t))return t;let e=t.length;if(!jc(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},ph=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&di(Uint8Array)),mh=(t,e)=>{const n=(t&&t[Vn]).call(t);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},gh=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},yh=Ve("HTMLFormElement"),bh=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),qo=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),xh=Ve("RegExp"),Ic=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Gs(s,(i,o)=>{let c;(c=e(i,o,t))!==!1&&(n[o]=c||i)}),Object.defineProperties(t,n)},wh=t=>{Ic(t,(e,s)=>{if(je(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(je(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},vh=(t,e)=>{const s={},n=i=>{i.forEach(o=>{s[o]=!0})};return ls(t)?n(t):n(String(t).split(e)),s},Sh=()=>{},_h=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Eh(t){return!!(t&&je(t.append)&&t[Nc]==="FormData"&&t[Vn])}const Nh=t=>{const e=new Array(10),s=(n,i)=>{if(qs(n)){if(e.indexOf(n)>=0)return;if(Hs(n))return n;if(!("toJSON"in n)){e[i]=n;const o=ls(n)?[]:{};return Gs(n,(c,d)=>{const h=s(c,i+1);!rs(h)&&(o[d]=h)}),e[i]=void 0,o}}return n};return s(t,0)},kh=Ve("AsyncFunction"),jh=t=>t&&(qs(t)||je(t))&&je(t.then)&&je(t.catch),Cc=((t,e)=>t?setImmediate:e?((s,n)=>(Tt.addEventListener("message",({source:i,data:o})=>{i===Tt&&o===s&&n.length&&n.shift()()},!1),i=>{n.push(i),Tt.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",je(Tt.postMessage)),Ah=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Tt):typeof process!="undefined"&&process.nextTick||Cc,Th=t=>t!=null&&je(t[Vn]),I={isArray:ls,isArrayBuffer:kc,isBuffer:Hs,isFormData:th,isArrayBufferView:Gd,isString:Wd,isNumber:jc,isBoolean:Kd,isObject:qs,isPlainObject:Nn,isEmptyObject:Jd,isReadableStream:nh,isRequest:rh,isResponse:ih,isHeaders:oh,isUndefined:rs,isDate:Xd,isFile:Yd,isBlob:Qd,isRegExp:xh,isFunction:je,isStream:eh,isURLSearchParams:sh,isTypedArray:ph,isFileList:Zd,forEach:Gs,merge:qr,extend:ch,trim:ah,stripBOM:lh,inherits:uh,toFlatObject:dh,kindOf:zn,kindOfTest:Ve,endsWith:hh,toArray:fh,forEachEntry:mh,matchAll:gh,isHTMLForm:yh,hasOwnProperty:qo,hasOwnProp:qo,reduceDescriptors:Ic,freezeMethods:wh,toObjectSet:vh,toCamelCase:bh,noop:Sh,toFiniteNumber:_h,findKey:Ac,global:Tt,isContextDefined:Tc,isSpecCompliantForm:Eh,toJSONObject:Nh,isAsyncFn:kh,isThenable:jh,setImmediate:Cc,asap:Ah,isIterable:Th};function W(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const Rc=W.prototype,Dc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Dc[t]={value:t}});Object.defineProperties(W,Dc);Object.defineProperty(Rc,"isAxiosError",{value:!0});W.from=(t,e,s,n,i,o)=>{const c=Object.create(Rc);I.toFlatObject(t,c,function(g){return g!==Error.prototype},f=>f!=="isAxiosError");const d=t&&t.message?t.message:"Error",h=e==null&&t?t.code:e;return W.call(c,d,h,s,n,i),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",o&&Object.assign(c,o),c};const Ih=null;function Gr(t){return I.isPlainObject(t)||I.isArray(t)}function Oc(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function Go(t,e,s){return t?t.concat(e).map(function(i,o){return i=Oc(i),!s&&o?"["+i+"]":i}).join(s?".":""):e}function Ch(t){return I.isArray(t)&&!t.some(Gr)}const Rh=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function qn(t,e,s){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=I.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,T){return!I.isUndefined(T[R])});const n=s.metaTokens,i=s.visitor||g,o=s.dots,c=s.indexes,h=(s.Blob||typeof Blob!="undefined"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function f(E){if(E===null)return"";if(I.isDate(E))return E.toISOString();if(I.isBoolean(E))return E.toString();if(!h&&I.isBlob(E))throw new W("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(E)||I.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function g(E,R,T){let L=E;if(E&&!T&&typeof E=="object"){if(I.endsWith(R,"{}"))R=n?R:R.slice(0,-2),E=JSON.stringify(E);else if(I.isArray(E)&&Ch(E)||(I.isFileList(E)||I.endsWith(R,"[]"))&&(L=I.toArray(E)))return R=Oc(R),L.forEach(function($,D){!(I.isUndefined($)||$===null)&&e.append(c===!0?Go([R],D,o):c===null?R:R+"[]",f($))}),!1}return Gr(E)?!0:(e.append(Go(T,R,o),f(E)),!1)}const v=[],j=Object.assign(Rh,{defaultVisitor:g,convertValue:f,isVisitable:Gr});function _(E,R){if(!I.isUndefined(E)){if(v.indexOf(E)!==-1)throw Error("Circular reference detected in "+R.join("."));v.push(E),I.forEach(E,function(L,H){(!(I.isUndefined(L)||L===null)&&i.call(e,L,I.isString(H)?H.trim():H,R,j))===!0&&_(L,R?R.concat(H):[H])}),v.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return _(t),e}function Wo(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function hi(t,e){this._pairs=[],t&&qn(t,this,e)}const Pc=hi.prototype;Pc.append=function(e,s){this._pairs.push([e,s])};Pc.toString=function(e){const s=e?function(n){return e.call(this,n,Wo)}:Wo;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Dh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Lc(t,e,s){if(!e)return t;const n=s&&s.encode||Dh;I.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let o;if(i?o=i(e,s):o=I.isURLSearchParams(e)?e.toString():new hi(e,s).toString(n),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Ko{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Mc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oh=typeof URLSearchParams!="undefined"?URLSearchParams:hi,Ph=typeof FormData!="undefined"?FormData:null,Lh=typeof Blob!="undefined"?Blob:null,Mh={isBrowser:!0,classes:{URLSearchParams:Oh,FormData:Ph,Blob:Lh},protocols:["http","https","file","blob","url","data"]},fi=typeof window!="undefined"&&typeof document!="undefined",Wr=typeof navigator=="object"&&navigator||void 0,Fh=fi&&(!Wr||["ReactNative","NativeScript","NS"].indexOf(Wr.product)<0),$h=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uh=fi&&window.location.href||"http://localhost",Bh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fi,hasStandardBrowserEnv:Fh,hasStandardBrowserWebWorkerEnv:$h,navigator:Wr,origin:Uh},Symbol.toStringTag,{value:"Module"})),we=M(M({},Bh),Mh);function Vh(t,e){return qn(t,new we.classes.URLSearchParams,M({visitor:function(s,n,i,o){return we.isNode&&I.isBuffer(s)?(this.append(n,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function zh(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Hh(t){const e={},s=Object.keys(t);let n;const i=s.length;let o;for(n=0;n<i;n++)o=s[n],e[o]=t[o];return e}function Fc(t){function e(s,n,i,o){let c=s[o++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=o>=s.length;return c=!c&&I.isArray(i)?i.length:c,h?(I.hasOwnProp(i,c)?i[c]=[i[c],n]:i[c]=n,!d):((!i[c]||!I.isObject(i[c]))&&(i[c]=[]),e(s,n,i[c],o)&&I.isArray(i[c])&&(i[c]=Hh(i[c])),!d)}if(I.isFormData(t)&&I.isFunction(t.entries)){const s={};return I.forEachEntry(t,(n,i)=>{e(zh(n),i,s,0)}),s}return null}function qh(t,e,s){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const Ws={transitional:Mc,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,o=I.isObject(e);if(o&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return i?JSON.stringify(Fc(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e)||I.isReadableStream(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Vh(e,this.formSerializer).toString();if((d=I.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return qn(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(s.setContentType("application/json",!1),qh(e)):e}],transformResponse:[function(e){const s=this.transitional||Ws.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(e)||I.isReadableStream(e))return e;if(e&&I.isString(e)&&(n&&!this.responseType||i)){const c=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?W.from(d,W.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{Ws.headers[t]={}});const Gh=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wh=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),s=c.substring(0,i).trim().toLowerCase(),n=c.substring(i+1).trim(),!(!s||e[s]&&Gh[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Jo=Symbol("internals");function Cs(t){return t&&String(t).trim().toLowerCase()}function kn(t){return t===!1||t==null?t:I.isArray(t)?t.map(kn):String(t)}function Kh(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const Jh=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Er(t,e,s,n,i){if(I.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!I.isString(e)){if(I.isString(n))return e.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(e)}}function Xh(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function Yh(t,e){const s=I.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,o,c){return this[n].call(this,e,i,o,c)},configurable:!0})})}let Ae=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function o(d,h,f){const g=Cs(h);if(!g)throw new Error("header name must be a non-empty string");const v=I.findKey(i,g);(!v||i[v]===void 0||f===!0||f===void 0&&i[v]!==!1)&&(i[v||h]=kn(d))}const c=(d,h)=>I.forEach(d,(f,g)=>o(f,g,h));if(I.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(I.isString(e)&&(e=e.trim())&&!Jh(e))c(Wh(e),s);else if(I.isObject(e)&&I.isIterable(e)){let d={},h,f;for(const g of e){if(!I.isArray(g))throw TypeError("Object iterator must return a key-value pair");d[f=g[0]]=(h=d[f])?I.isArray(h)?[...h,g[1]]:[h,g[1]]:g[1]}c(d,s)}else e!=null&&o(s,e,n);return this}get(e,s){if(e=Cs(e),e){const n=I.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return Kh(i);if(I.isFunction(s))return s.call(this,i,n);if(I.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Cs(e),e){const n=I.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Er(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function o(c){if(c=Cs(c),c){const d=I.findKey(n,c);d&&(!s||Er(n,n[d],d,s))&&(delete n[d],i=!0)}}return I.isArray(e)?e.forEach(o):o(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const o=s[n];(!e||Er(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const s=this,n={};return I.forEach(this,(i,o)=>{const c=I.findKey(n,o);if(c){s[c]=kn(i),delete s[o];return}const d=e?Xh(o):String(o).trim();d!==o&&delete s[o],s[d]=kn(i),n[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return I.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&I.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Jo]=this[Jo]={accessors:{}}).accessors,i=this.prototype;function o(c){const d=Cs(c);n[d]||(Yh(i,c),n[d]=!0)}return I.isArray(e)?e.forEach(o):o(e),this}};Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Ae.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});I.freezeMethods(Ae);function Nr(t,e){const s=this||Ws,n=e||s,i=Ae.from(n.headers);let o=n.data;return I.forEach(t,function(d){o=d.call(s,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function $c(t){return!!(t&&t.__CANCEL__)}function us(t,e,s){W.call(this,t==null?"canceled":t,W.ERR_CANCELED,e,s),this.name="CanceledError"}I.inherits(us,W,{__CANCEL__:!0});function Uc(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new W("Request failed with status code "+s.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Qh(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Zh(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,o=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),g=n[o];c||(c=f),s[i]=h,n[i]=f;let v=o,j=0;for(;v!==i;)j+=s[v++],v=v%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),f-c<e)return;const _=g&&f-g;return _?Math.round(j*1e3/_):void 0}}function ef(t,e){let s=0,n=1e3/e,i,o;const c=(f,g=Date.now())=>{s=g,i=null,o&&(clearTimeout(o),o=null),t(...f)};return[(...f)=>{const g=Date.now(),v=g-s;v>=n?c(f,g):(i=f,o||(o=setTimeout(()=>{o=null,c(i)},n-v)))},()=>i&&c(i)]}const Rn=(t,e,s=3)=>{let n=0;const i=Zh(50,250);return ef(o=>{const c=o.loaded,d=o.lengthComputable?o.total:void 0,h=c-n,f=i(h),g=c<=d;n=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&g?(d-c)/f:void 0,event:o,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(v)},s)},Xo=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},Yo=t=>(...e)=>I.asap(()=>t(...e)),tf=we.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,we.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(we.origin),we.navigator&&/(msie|trident)/i.test(we.navigator.userAgent)):()=>!0,sf=we.hasStandardBrowserEnv?{write(t,e,s,n,i,o,c){if(typeof document=="undefined")return;const d=[`${t}=${encodeURIComponent(e)}`];I.isNumber(s)&&d.push(`expires=${new Date(s).toUTCString()}`),I.isString(n)&&d.push(`path=${n}`),I.isString(i)&&d.push(`domain=${i}`),o===!0&&d.push("secure"),I.isString(c)&&d.push(`SameSite=${c}`),document.cookie=d.join("; ")},read(t){if(typeof document=="undefined")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nf(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function rf(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bc(t,e,s){let n=!nf(e);return t&&(n||s==!1)?rf(t,e):e}const Qo=t=>t instanceof Ae?M({},t):t;function Ft(t,e){e=e||{};const s={};function n(f,g,v,j){return I.isPlainObject(f)&&I.isPlainObject(g)?I.merge.call({caseless:j},f,g):I.isPlainObject(g)?I.merge({},g):I.isArray(g)?g.slice():g}function i(f,g,v,j){if(I.isUndefined(g)){if(!I.isUndefined(f))return n(void 0,f,v,j)}else return n(f,g,v,j)}function o(f,g){if(!I.isUndefined(g))return n(void 0,g)}function c(f,g){if(I.isUndefined(g)){if(!I.isUndefined(f))return n(void 0,f)}else return n(void 0,g)}function d(f,g,v){if(v in e)return n(f,g);if(v in t)return n(void 0,f)}const h={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,g,v)=>i(Qo(f),Qo(g),v,!0)};return I.forEach(Object.keys(M(M({},t),e)),function(g){const v=h[g]||i,j=v(t[g],e[g],g);I.isUndefined(j)&&v!==d||(s[g]=j)}),s}const Vc=t=>{const e=Ft({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:c,auth:d}=e;if(e.headers=c=Ae.from(c),e.url=Lc(Bc(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),I.isFormData(s)){if(we.hasStandardBrowserEnv||we.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(I.isFunction(s.getHeaders)){const h=s.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([g,v])=>{f.includes(g.toLowerCase())&&c.set(g,v)})}}if(we.hasStandardBrowserEnv&&(n&&I.isFunction(n)&&(n=n(e)),n||n!==!1&&tf(e.url))){const h=i&&o&&sf.read(o);h&&c.set(i,h)}return e},of=typeof XMLHttpRequest!="undefined",af=of&&function(t){return new Promise(function(s,n){const i=Vc(t);let o=i.data;const c=Ae.from(i.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=i,g,v,j,_,E;function R(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function L(){if(!T)return;const $=Ae.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),V={data:!d||d==="text"||d==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:$,config:t,request:T};Uc(function(w){s(w),R()},function(w){n(w),R()},V),T=null}"onloadend"in T?T.onloadend=L:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(L)},T.onabort=function(){T&&(n(new W("Request aborted",W.ECONNABORTED,t,T)),T=null)},T.onerror=function(D){const V=D&&D.message?D.message:"Network Error",B=new W(V,W.ERR_NETWORK,t,T);B.event=D||null,n(B),T=null},T.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const V=i.transitional||Mc;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),n(new W(D,V.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,t,T)),T=null},o===void 0&&c.setContentType(null),"setRequestHeader"in T&&I.forEach(c.toJSON(),function(D,V){T.setRequestHeader(V,D)}),I.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),d&&d!=="json"&&(T.responseType=i.responseType),f&&([j,E]=Rn(f,!0),T.addEventListener("progress",j)),h&&T.upload&&([v,_]=Rn(h),T.upload.addEventListener("progress",v),T.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(g=$=>{T&&(n(!$||$.type?new us(null,t,T):$),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const H=Qh(i.url);if(H&&we.protocols.indexOf(H)===-1){n(new W("Unsupported protocol "+H+":",W.ERR_BAD_REQUEST,t));return}T.send(o||null)})},cf=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const o=function(f){if(!i){i=!0,d();const g=f instanceof Error?f:this.reason;n.abort(g instanceof W?g:new us(g instanceof Error?g.message:g))}};let c=e&&setTimeout(()=>{c=null,o(new W(`timeout ${e} of ms exceeded`,W.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),t=null)};t.forEach(f=>f.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>I.asap(d),h}},lf=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},uf=function(t,e){return hn(this,null,function*(){try{for(var s=Ao(df(t)),n,i,o;n=!(i=yield new ut(s.next())).done;n=!1){const c=i.value;yield*vr(lf(c,e))}}catch(i){o=[i]}finally{try{n&&(i=s.return)&&(yield new ut(i.call(s)))}finally{if(o)throw o[0]}}})},df=function(t){return hn(this,null,function*(){if(t[Symbol.asyncIterator]){yield*vr(t);return}const e=t.getReader();try{for(;;){const{done:s,value:n}=yield new ut(e.read());if(s)break;yield n}}finally{yield new ut(e.cancel())}})},Zo=(t,e,s,n)=>{const i=uf(t,e);let o=0,c,d=f=>{c||(c=!0,n&&n(f))};return new ReadableStream({pull(f){return A(this,null,function*(){try{const{done:g,value:v}=yield i.next();if(g){d(),f.close();return}let j=v.byteLength;if(s){let _=o+=j;s(_)}f.enqueue(new Uint8Array(v))}catch(g){throw d(g),g}})},cancel(f){return d(f),i.return()}},{highWaterMark:2})},ea=64*1024,{isFunction:mn}=I,hf=(({Request:t,Response:e})=>({Request:t,Response:e}))(I.global),{ReadableStream:ta,TextEncoder:sa}=I.global,na=(t,...e)=>{try{return!!t(...e)}catch(s){return!1}},ff=t=>{t=I.merge.call({skipUndefined:!0},hf,t);const{fetch:e,Request:s,Response:n}=t,i=e?mn(e):typeof fetch=="function",o=mn(s),c=mn(n);if(!i)return!1;const d=i&&mn(ta),h=i&&(typeof sa=="function"?(E=>R=>E.encode(R))(new sa):E=>A(null,null,function*(){return new Uint8Array(yield new s(E).arrayBuffer())})),f=o&&d&&na(()=>{let E=!1;const R=new s(we.origin,{body:new ta,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!R}),g=c&&d&&na(()=>I.isReadableStream(new n("").body)),v={stream:g&&(E=>E.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!v[E]&&(v[E]=(R,T)=>{let L=R&&R[E];if(L)return L.call(R);throw new W(`Response type '${E}' is not supported`,W.ERR_NOT_SUPPORT,T)})});const j=E=>A(null,null,function*(){if(E==null)return 0;if(I.isBlob(E))return E.size;if(I.isSpecCompliantForm(E))return(yield new s(we.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(I.isArrayBufferView(E)||I.isArrayBuffer(E))return E.byteLength;if(I.isURLSearchParams(E)&&(E=E+""),I.isString(E))return(yield h(E)).byteLength}),_=(E,R)=>A(null,null,function*(){const T=I.toFiniteNumber(E.getContentLength());return T==null?j(R):T});return E=>A(null,null,function*(){let{url:R,method:T,data:L,signal:H,cancelToken:$,timeout:D,onDownloadProgress:V,onUploadProgress:B,responseType:w,headers:m,withCredentials:x="same-origin",fetchOptions:b}=Vc(E),S=e||fetch;w=w?(w+"").toLowerCase():"text";let N=cf([H,$&&$.toAbortSignal()],D),y=null;const ne=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let pe;try{if(B&&f&&T!=="get"&&T!=="head"&&(pe=yield _(m,L))!==0){let z=new s(R,{method:"POST",body:L,duplex:"half"}),Z;if(I.isFormData(L)&&(Z=z.headers.get("content-type"))&&m.setContentType(Z),z.body){const[oe,ue]=Xo(pe,Rn(Yo(B)));L=Zo(z.body,ea,oe,ue)}}I.isString(x)||(x=x?"include":"omit");const ie=o&&"credentials"in s.prototype,Te=G(M({},b),{signal:N,method:T.toUpperCase(),headers:m.normalize().toJSON(),body:L,duplex:"half",credentials:ie?x:void 0});y=o&&new s(R,Te);let ye=yield o?S(y,b):S(R,Te);const Oe=g&&(w==="stream"||w==="response");if(g&&(V||Oe&&ne)){const z={};["status","statusText","headers"].forEach(ze=>{z[ze]=ye[ze]});const Z=I.toFiniteNumber(ye.headers.get("content-length")),[oe,ue]=V&&Xo(Z,Rn(Yo(V),!0))||[];ye=new n(Zo(ye.body,ea,oe,()=>{ue&&ue(),ne&&ne()}),z)}w=w||"text";let K=yield v[I.findKey(v,w)||"text"](ye,E);return!Oe&&ne&&ne(),yield new Promise((z,Z)=>{Uc(z,Z,{data:K,headers:Ae.from(ye.headers),status:ye.status,statusText:ye.statusText,config:E,request:y})})}catch(ie){throw ne&&ne(),ie&&ie.name==="TypeError"&&/Load failed|fetch/i.test(ie.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,E,y),{cause:ie.cause||ie}):W.from(ie,ie&&ie.code,E,y)}})},pf=new Map,zc=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:i}=e,o=[n,i,s];let c=o.length,d=c,h,f,g=pf;for(;d--;)h=o[d],f=g.get(h),f===void 0&&g.set(h,f=d?new Map:ff(e)),g=f;return f};zc();const pi={http:Ih,xhr:af,fetch:{get:zc}};I.forEach(pi,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(s){}Object.defineProperty(t,"adapterName",{value:e})}});const ra=t=>`- ${t}`,mf=t=>I.isFunction(t)||t===null||t===!1;function gf(t,e){t=I.isArray(t)?t:[t];const{length:s}=t;let n,i;const o={};for(let c=0;c<s;c++){n=t[c];let d;if(i=n,!mf(n)&&(i=pi[(d=String(n)).toLowerCase()],i===void 0))throw new W(`Unknown adapter '${d}'`);if(i&&(I.isFunction(i)||(i=i.get(e))))break;o[d||"#"+c]=i}if(!i){const c=Object.entries(o).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=s?c.length>1?`since :
`+c.map(ra).join(`
`):" "+ra(c[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i}const Hc={getAdapter:gf,adapters:pi};function kr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new us(null,t)}function ia(t){return kr(t),t.headers=Ae.from(t.headers),t.data=Nr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Hc.getAdapter(t.adapter||Ws.adapter,t)(t).then(function(n){return kr(t),n.data=Nr.call(t,t.transformResponse,n),n.headers=Ae.from(n.headers),n},function(n){return $c(n)||(kr(t),n&&n.response&&(n.response.data=Nr.call(t,t.transformResponse,n.response),n.response.headers=Ae.from(n.response.headers))),Promise.reject(n)})}const qc="1.13.2",Gn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Gn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const oa={};Gn.transitional=function(e,s,n){function i(o,c){return"[Axios v"+qc+"] Transitional option '"+o+"'"+c+(n?". "+n:"")}return(o,c,d)=>{if(e===!1)throw new W(i(c," has been removed"+(s?" in "+s:"")),W.ERR_DEPRECATED);return s&&!oa[c]&&(oa[c]=!0,console.warn(i(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(o,c,d):!0}};Gn.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function yf(t,e,s){if(typeof t!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const o=n[i],c=e[o];if(c){const d=t[o],h=d===void 0||c(d,o,t);if(h!==!0)throw new W("option "+o+" must be "+h,W.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new W("Unknown option "+o,W.ERR_BAD_OPTION)}}const jn={assertOptions:yf,validators:Gn},Ge=jn.validators;let Ot=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ko,response:new Ko}}request(e,s){return A(this,null,function*(){try{return yield this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch(c){}}throw n}})}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Ft(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:o}=s;n!==void 0&&jn.assertOptions(n,{silentJSONParsing:Ge.transitional(Ge.boolean),forcedJSONParsing:Ge.transitional(Ge.boolean),clarifyTimeoutError:Ge.transitional(Ge.boolean)},!1),i!=null&&(I.isFunction(i)?s.paramsSerializer={serialize:i}:jn.assertOptions(i,{encode:Ge.function,serialize:Ge.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),jn.assertOptions(s,{baseUrl:Ge.spelling("baseURL"),withXsrfToken:Ge.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=o&&I.merge(o.common,o[s.method]);o&&I.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),s.headers=Ae.concat(c,o);const d=[];let h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(s)===!1||(h=h&&R.synchronous,d.unshift(R.fulfilled,R.rejected))});const f=[];this.interceptors.response.forEach(function(R){f.push(R.fulfilled,R.rejected)});let g,v=0,j;if(!h){const E=[ia.bind(this),void 0];for(E.unshift(...d),E.push(...f),j=E.length,g=Promise.resolve(s);v<j;)g=g.then(E[v++],E[v++]);return g}j=d.length;let _=s;for(;v<j;){const E=d[v++],R=d[v++];try{_=E(_)}catch(T){R.call(this,T);break}}try{g=ia.call(this,_)}catch(E){return Promise.reject(E)}for(v=0,j=f.length;v<j;)g=g.then(f[v++],f[v++]);return g}getUri(e){e=Ft(this.defaults,e);const s=Bc(e.baseURL,e.url,e.allowAbsoluteUrls);return Lc(s,e.params,e.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(e){Ot.prototype[e]=function(s,n){return this.request(Ft(n||{},{method:e,url:s,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(e){function s(n){return function(o,c,d){return this.request(Ft(d||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}Ot.prototype[e]=s(),Ot.prototype[e+"Form"]=s(!0)});let bf=class Gc{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const c=new Promise(d=>{n.subscribe(d),o=d}).then(i);return c.cancel=function(){n.unsubscribe(o)},c},e(function(o,c,d){n.reason||(n.reason=new us(o,c,d),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Gc(function(i){e=i}),cancel:e}}};function xf(t){return function(s){return t.apply(null,s)}}function wf(t){return I.isObject(t)&&t.isAxiosError===!0}const Kr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Kr).forEach(([t,e])=>{Kr[e]=t});function Wc(t){const e=new Ot(t),s=Ec(Ot.prototype.request,e);return I.extend(s,Ot.prototype,e,{allOwnKeys:!0}),I.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Wc(Ft(t,i))},s}const fe=Wc(Ws);fe.Axios=Ot;fe.CanceledError=us;fe.CancelToken=bf;fe.isCancel=$c;fe.VERSION=qc;fe.toFormData=qn;fe.AxiosError=W;fe.Cancel=fe.CanceledError;fe.all=function(e){return Promise.all(e)};fe.spread=xf;fe.isAxiosError=wf;fe.mergeConfig=Ft;fe.AxiosHeaders=Ae;fe.formToJSON=t=>Fc(I.isHTMLForm(t)?new FormData(t):t);fe.getAdapter=Hc.getAdapter;fe.HttpStatusCode=Kr;fe.default=fe;const{Axios:bx,AxiosError:xx,CanceledError:wx,isCancel:vx,CancelToken:Sx,VERSION:_x,all:Ex,Cancel:Nx,isAxiosError:kx,spread:jx,toFormData:Ax,AxiosHeaders:Tx,HttpStatusCode:Ix,formToJSON:Cx,getAdapter:Rx,mergeConfig:Dx}=fe,jr={baseURL:"http://localhost:3000/api",timeout:1e4,headers:{"Content-Type":"application/json"}},vf=t=>{t.interceptors.request.use(e=>(e.metadata={startTime:new Date},e),e=>Promise.reject(e))},Sf=t=>{t.interceptors.response.use(e=>{var o;const s=new Date,i=(o=e.config.metadata)==null?void 0:o.startTime;if(i){const c=s.getTime()-i.getTime();console.log(`API Response Time: ${c}ms for ${e.config.url}`)}return e},e=>{var s,n;return((s=e.response)==null?void 0:s.status)===403&&console.warn("Access denied:",(n=e.response.data)==null?void 0:n.message),Promise.reject(e)})},re=fe.create({baseURL:jr.baseURL,timeout:jr.timeout,headers:jr.headers});vf(re);Sf(re);class _f{static getFreelancers(e=1,s=10,n){return A(this,null,function*(){const i=new URLSearchParams({page:e.toString(),limit:s.toString()});return n!=null&&n.availability&&i.append("availability",n.availability),n!=null&&n.role&&i.append("role",n.role),n!=null&&n.skills&&i.append("skills",n.skills.join(",")),n!=null&&n.location&&i.append("location",n.location),n!=null&&n.search&&i.append("search",n.search),n!=null&&n.minRate&&i.append("minRate",n.minRate.toString()),n!=null&&n.maxRate&&i.append("maxRate",n.maxRate.toString()),(yield re.get(`/freelancers?${i}`)).data})}static getFreelancer(e){return A(this,null,function*(){return(yield re.get(`/freelancers/${e}`)).data.data})}static createFreelancer(e){return A(this,null,function*(){return(yield re.post("/freelancers",e)).data.data})}static updateFreelancer(e,s){return A(this,null,function*(){return(yield re.put(`/freelancers/${e}`,s)).data.data})}static deleteFreelancer(e){return A(this,null,function*(){yield re.delete(`/freelancers/${e}`)})}static getFreelancersByAvailability(e){return A(this,null,function*(){return(yield re.get(`/freelancers/availability/${e}`)).data.data})}static getFreelancersByRole(e){return A(this,null,function*(){return(yield re.get(`/freelancers/role/${e}`)).data.data})}static searchFreelancers(e){return A(this,null,function*(){return(yield re.get(`/freelancers/search?q=${encodeURIComponent(e)}`)).data.data})}static getFreelancersBySkills(e){return A(this,null,function*(){return(yield re.get(`/freelancers/skills?skills=${e.join(",")}`)).data.data})}static getFreelancerStats(){return A(this,null,function*(){return(yield re.get("/freelancers/stats")).data.data})}static getPopularSkills(){return A(this,null,function*(){return(yield re.get("/freelancers/skills/popular")).data.data})}static getFreelancersByLocation(e){return A(this,null,function*(){return(yield re.get(`/freelancers/location/${encodeURIComponent(e)}`)).data.data})}static rateFreelancer(e,s,n){return A(this,null,function*(){return(yield re.post(`/freelancers/${e}/rate`,{rating:s,review:n})).data.data})}}class aa{static getMoodboardItems(e,s=1,n=20){return A(this,null,function*(){const i=new URLSearchParams({projectId:e,page:s.toString(),limit:n.toString()});return(yield re.get(`/moodboard?${i}`)).data})}static getMoodboardItem(e){return A(this,null,function*(){return(yield re.get(`/moodboard/${e}`)).data.data})}static createMoodboardItem(e){return A(this,null,function*(){return(yield re.post("/moodboard",e)).data.data})}static updateMoodboardItem(e,s){return A(this,null,function*(){return(yield re.put(`/moodboard/${e}`,s)).data.data})}static deleteMoodboardItem(e){return A(this,null,function*(){yield re.delete(`/moodboard/${e}`)})}static searchMoodboardItems(e,s){return A(this,null,function*(){const n=new URLSearchParams({q:e});return s&&n.append("projectId",s),(yield re.get(`/moodboard/search?${n}`)).data.data})}static getMoodboardItemsByMood(e,s){return A(this,null,function*(){const n=new URLSearchParams({mood:e});return s&&n.append("projectId",s),(yield re.get(`/moodboard/mood?${n}`)).data.data})}static getMoodboardItemsByTags(e,s){return A(this,null,function*(){const n=new URLSearchParams({tags:e.join(",")});return s&&n.append("projectId",s),(yield re.get(`/moodboard/tags?${n}`)).data.data})}static uploadMoodboardItem(e,s,n){return A(this,null,function*(){const i=new FormData;return i.append("file",s),i.append("projectId",e),n.tags&&i.append("tags",JSON.stringify(n.tags)),n.moods&&i.append("moods",JSON.stringify(n.moods)),n.colors&&i.append("colors",JSON.stringify(n.colors)),n.shotType&&i.append("shotType",n.shotType),(yield re.post("/moodboard/upload",i,{headers:{"Content-Type":"multipart/form-data"}})).data.data})}}class Wn{static getProjects(e=1,s=10,n){return A(this,null,function*(){const i=new URLSearchParams({page:e.toString(),limit:s.toString()});return n!=null&&n.status&&i.append("status",n.status),n!=null&&n.client&&i.append("client",n.client),n!=null&&n.search&&i.append("search",n.search),(yield re.get(`/projects?${i}`)).data})}static getProject(e){return A(this,null,function*(){return(yield re.get(`/projects/${e}`)).data.data})}static createProject(e){return A(this,null,function*(){return(yield re.post("/projects",e)).data.data})}static updateProject(e,s){return A(this,null,function*(){return(yield re.put(`/projects/${e}`,s)).data.data})}static deleteProject(e){return A(this,null,function*(){yield re.delete(`/projects/${e}`)})}static getProjectsByStatus(e){return A(this,null,function*(){return(yield re.get(`/projects/status/${e}`)).data.data})}static getProjectsByClient(e){return A(this,null,function*(){return(yield re.get(`/projects/client/${e}`)).data.data})}static searchProjects(e){return A(this,null,function*(){return(yield re.get(`/projects/search?q=${encodeURIComponent(e)}`)).data.data})}static getProjectStats(){return A(this,null,function*(){return(yield re.get("/projects/stats")).data.data})}}const Ef=({text:t,isOnline:e=!0})=>a.jsxs("span",{className:"px-3 py-1 bg-surface border border-border-subtle rounded-lg text-[11px] font-bold uppercase tracking-widest text-ink-secondary shadow-sm flex items-center gap-2",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${e?"animate-pulse status-indicator":"bg-gray-400"}`}),t]}),Nf=({onNotificationsClick:t,onNewProjectClick:e})=>a.jsxs("header",{className:"mb-12 flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsx(Ef,{text:"Studio Online"})}),a.jsx("h1",{className:"text-6xl md:text-7xl font-bold tracking-tighter text-ink-primary mb-3 kinetic-text",children:"Good Morning."}),a.jsxs("p",{className:"text-ink-secondary text-xl font-light tracking-tight",children:["The studio focus is nominal."," ",a.jsx("span",{className:"text-ink-primary font-medium border-b border-border-subtle pb-0.5",children:"2 deadlines approaching."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{className:"h-10 w-10 rounded-full bg-surface border border-border-subtle flex items-center justify-center text-ink-secondary hover:text-ink-primary hover:border-ink-primary transition-colors",onClick:t,"aria-label":"View notifications",children:a.jsx(Ju,{size:18})}),a.jsx("button",{className:"h-10 px-5 rounded-full text-white text-xs font-bold tracking-wider transition-shadow new-project-button",onClick:e,"aria-label":"Create a new project",children:"Create Project"})]})]}),tt=i=>{var o=i,{children:t,className:e="",noPadding:s=!1}=o,n=Ze(o,["children","className","noPadding"]);return a.jsx("div",G(M({},n),{className:`bg-surface border border-subtle-alpha rounded-xl ${s?"":"p-8"} transition-all duration-500 ease-out hover:shadow-lg hover:-translate-y-[2px] ${e}`,children:t}))},kf=({imageSrc:t,priorityLabel:e="Priority One",title:s,description:n,className:i=""})=>{const[o,c]=U.useState(!1);return a.jsxs(tt,{className:`relative overflow-hidden group border-0 shadow-2xl min-h-[360px] ${i}`,noPadding:!0,children:[!o&&t?a.jsx("img",{src:t,className:"w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105",alt:`${s} - ${n}`,loading:"lazy",onError:()=>c(!0)}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-ink-primary/80 via-ink-primary to-black/70","aria-hidden":"true"}),a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent p-10 flex flex-col justify-end",role:"article",children:[a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsx("span",{className:"px-3 py-1 bg-white/10 backdrop-blur-md rounded-full text-[10px] font-bold text-white uppercase tracking-wider border border-white/20",children:e})}),a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-2 tracking-tight",children:s}),a.jsx("p",{className:"text-white/70 text-sm md:text-base line-clamp-2 max-w-md leading-relaxed",children:n})]})]})},jf=[{id:"1",user:{name:"Alex Director"},action:"updated brief for",target:"Nebula Phase II",timestamp:"2m ago",type:"upload"},{id:"2",user:{name:"Sarah Editor"},action:"commented on",target:"Rough Cut v3",timestamp:"15m ago",type:"comment"},{id:"3",user:{name:"Mike Color"},action:"pushed changes to",target:"Grading Workflow",timestamp:"1h ago",type:"commit"},{id:"4",user:{name:"Client"},action:"approved",target:"Final Deliverable",timestamp:"2h ago",type:"review"}],Af=({className:t=""})=>a.jsxs(tt,{className:`flex flex-col h-full bg-surface border-border-subtle ${t}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-ink-primary",children:[a.jsx(In,{size:18}),a.jsx("h3",{className:"font-bold text-sm",children:"Team Activity"})]}),a.jsx("button",{className:"text-xs text-ink-tertiary hover:text-ink-primary transition-colors",children:"View All"})]}),a.jsx("div",{className:"flex-1 space-y-4",children:jf.map(e=>a.jsxs("div",{className:"flex gap-3 items-start group",children:[a.jsxs("div",{className:"w-8 h-8 rounded-full bg-subtle flex items-center justify-center text-ink-secondary border border-border-subtle shrink-0",children:[e.type==="commit"&&a.jsx(Xu,{size:14}),e.type==="comment"&&a.jsx(In,{size:14}),e.type==="upload"&&a.jsx(Yu,{size:14}),e.type==="review"&&a.jsx(hc,{size:14})]}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("p",{className:"text-xs text-ink-primary leading-relaxed",children:[a.jsx("span",{className:"font-bold",children:e.user.name})," ",a.jsx("span",{className:"text-ink-secondary",children:e.action})," ",a.jsx("span",{className:"font-medium text-primary",children:e.target})]}),a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-ink-tertiary",children:[a.jsx(lc,{size:10}),a.jsx("span",{children:e.timestamp})]})]})]},e.id))})]}),Tf=[1,2,3,4].map(t=>({id:t,name:`Render_${t}.png`})),If=({artifact:t,onClick:e})=>{const[s,n]=P.useState(!1),i=()=>e==null?void 0:e(t),o=t.imageSrc&&!s;return a.jsx("li",{role:"gridcell",children:a.jsxs("button",{type:"button",className:"rounded-2xl bg-subtle border border-border-subtle relative group overflow-hidden cursor-pointer aspect-[4/3] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary w-full h-full text-left",onClick:i,"aria-label":`Open artifact ${t.name}`,children:[o?a.jsx("img",{src:t.imageSrc,alt:t.name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>n(!0)}):a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-ink-tertiary group-hover:scale-110 transition-transform duration-500",children:a.jsx(ss,{size:24})}),a.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-surface/90 backdrop-blur-md px-3 py-2 rounded-xl translate-y-full group-hover:translate-y-0 transition-transform duration-300 border border-border-subtle shadow-sm",children:a.jsx("div",{className:"text-[10px] font-bold truncate text-ink-primary",children:t.name})})]})})},Cf=({artifacts:t=Tf,onViewGallery:e,onArtifactClick:s,className:n="",loading:i=!1})=>{const o=t.length>0,c=i?"Loading recent artifacts":o?`Showing ${t.length} recent artifact${t.length===1?"":"s"}`:"No artifacts yet";return a.jsxs(tt,{className:`flex flex-col shadow-md border-border-subtle bg-surface h-full ${n}`,"aria-busy":i,children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-ink-secondary",children:"Recent Artifacts"}),a.jsx("button",{className:"text-xs font-bold text-ink-primary hover:opacity-70 transition-opacity",onClick:e,children:"View Gallery"})]}),a.jsx("span",{className:"sr-only","aria-live":"polite",children:c}),i?a.jsx("ul",{className:"flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 list-none p-0 m-0","aria-label":"Loading artifacts","aria-busy":"true",role:"grid",children:[0,1,2,3].map(d=>a.jsx("li",{role:"gridcell",className:"rounded-2xl bg-subtle border border-border-subtle aspect-[4/3] animate-pulse","aria-hidden":"true"},d))}):o?a.jsx("ul",{className:"flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 list-none p-0 m-0","aria-label":"Recent artifacts",role:"grid",children:t.map(d=>a.jsx(If,{artifact:d,onClick:s},d.id.toString()))}):a.jsxs("div",{className:"flex-1 rounded-xl bg-subtle border border-border-subtle p-6 flex flex-col items-start justify-center gap-3",role:"status","aria-live":"polite",children:[a.jsx("div",{className:"text-sm font-medium text-ink-primary",children:"No artifacts yet"}),a.jsx("p",{className:"text-xs text-ink-secondary",children:"Generate with Lumina or upload a render to populate this space."}),a.jsx("button",{className:"text-xs font-bold text-ink-primary hover:opacity-70 transition-opacity underline-offset-2 underline",onClick:e,children:"Open Gallery"})]})]})},Rf=[{label:"CPU",value:42,unit:"%",icon:Qu,color:"text-blue-500"},{label:"Storage",value:68,unit:"%",icon:Zu,color:"text-purple-500"},{label:"Network",value:24,unit:"ms",icon:dc,color:"text-emerald-500"}],Df=({className:t=""})=>a.jsxs(tt,{className:`bg-surface border-border-subtle ${t}`,children:[a.jsx("h3",{className:"font-bold text-sm text-ink-primary mb-4",children:"System Status"}),a.jsx("div",{className:"space-y-4",children:Rf.map(e=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-end justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-ink-secondary text-xs font-medium",children:[a.jsx(e.icon,{size:14,className:e.color}),e.label]}),a.jsxs("div",{className:"text-xs font-bold text-ink-primary",children:[e.value,e.unit]})]}),a.jsx("div",{className:"h-1.5 w-full bg-subtle rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${e.color.replace("text-","bg-")}`,style:{width:`${e.value}%`}})})]},e.label))})]}),gn={accent:{primary:"#2463E6"},state:{success:"#34C759",warning:"#FF9500",danger:"#FF3B30"}},Of=[gn.state.danger,gn.state.warning,"#FFCC00",gn.state.success,gn.accent.primary],Pf=({paletteName:t="PALETTE_NEON_04",colors:e=Of,onColorSelect:s,className:n="",selectedColor:i})=>a.jsxs(tt,{className:`flex flex-col relative overflow-hidden shadow-lg border-0 bg-surface ${n}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-ink-primary",children:"Daily Vibe"}),a.jsx(ed,{size:20,className:"text-ink-tertiary"})]}),a.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-3",children:[a.jsx("div",{className:"flex gap-2 h-12",role:"group","aria-label":"Color palette selection",children:e.map((o,c)=>a.jsx("button",{className:`palette-color palette-color-${c}`,onClick:()=>s==null?void 0:s(o),"aria-label":`Select color ${o}`,"aria-pressed":i?i.toLowerCase()===o.toLowerCase():void 0,style:{backgroundColor:o,transitionDelay:`${c*40}ms`,boxShadow:i&&i.toLowerCase()===o.toLowerCase()?"0 0 0 3px var(--dashboard-accent, #2463E6)":void 0,borderColor:i&&i.toLowerCase()===o.toLowerCase()?"var(--dashboard-accent, #2463E6)":void 0},children:a.jsxs("span",{className:"sr-only",children:["Color ",o]})},o))}),a.jsx("span",{className:"text-xs text-ink-tertiary font-mono text-center mt-2",children:t})]})]}),An={HERO_PROJECT:{IMAGE:"https://images.unsplash.com/photo-1492551557933-34265f7af79e?q=80&w=2670&auto=format&fit=crop",TITLE:"Nebula Phase II",DESCRIPTION:"Comprehensive rebrand focusing on kinetic typography and zero-gravity aesthetics. Client review in 4 hours."},LOADING_DELAY:350},Lf=()=>({id:"hero-1",imageSrc:An.HERO_PROJECT.IMAGE,priorityLabel:"Priority One",title:An.HERO_PROJECT.TITLE,description:An.HERO_PROJECT.DESCRIPTION}),Mf=()=>[{id:"art-1",name:"Nebula_Launch.png",imageSrc:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=800&auto=format&fit=crop"},{id:"art-2",name:"Typography_Grid.png",imageSrc:"https://images.unsplash.com/photo-1471357674240-e1a485acb3e1?w=800&auto=format&fit=crop"},{id:"art-3",name:"ZeroG_Mock.png",imageSrc:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&auto=format&fit=crop"},{id:"art-4",name:"Palette_V04.png",imageSrc:"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=800&auto=format&fit=crop"}],Ff=()=>{const[t,e]=U.useState(null),[s,n]=U.useState([]),[i,o]=U.useState(!0),[c,d]=U.useState(!0),[h,f]=U.useState(null),[g,v]=U.useState(null),{addToast:j}=oi(),_=U.useCallback(()=>{o(!0),d(!0),f(null),v(null);const T=setTimeout(()=>{try{const L=Lf();e(L),o(!1);const H=Mf();n(H),d(!1)}catch(L){console.error("Failed to load dashboard data:",L),f("Failed to load hero project"),v("Failed to load artifacts"),o(!1),d(!1),j("Failed to load dashboard data","info")}},An.LOADING_DELAY);return()=>clearTimeout(T)},[j]),E=U.useCallback(T=>{n(L=>[T,...L].slice(0,8))},[]),R=U.useCallback(()=>{_()},[_]);return U.useEffect(()=>_(),[_]),{heroProject:t,artifacts:s,loadingHero:i,loadingArtifacts:c,errorHero:h,errorArtifacts:g,refetch:R,addArtifact:E}},ca=160,$f=({onSubmitPrompt:t,className:e=""})=>{const[s,n]=P.useState(""),i=P.useId(),o="var(--dashboard-accent, #2463E6)",c=ca-s.length,d=h=>{h.preventDefault();const f=s.trim();f&&(t==null||t(f),n(""))};return a.jsxs(tt,{className:`flex flex-col justify-between text-white border-0 shadow-xl relative overflow-hidden ${e}`,style:{background:`radial-gradient(120% 120% at 100% 0%, rgba(255,255,255,0.08), transparent 45%), ${o}`},children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/20 blur-3xl rounded-full pointer-events-none"}),a.jsxs("div",{className:"flex justify-between items-start z-10",children:[a.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-sm",children:a.jsx(td,{size:20,className:"text-white"})}),a.jsx("span",{className:"text-[10px] font-mono text-white/40",children:"AI v4.0"})]}),a.jsxs("div",{className:"z-10",children:[a.jsxs("h3",{className:"text-lg font-medium mb-4 leading-tight",children:["Lumina",a.jsx("br",{}),"Intelligence."]}),a.jsxs("form",{onSubmit:d,className:"relative group/input",children:[a.jsx("label",{htmlFor:"ai-prompt",className:"sr-only",children:"Enter a concept prompt for AI generation"}),a.jsx("input",{id:"ai-prompt",placeholder:"Ask Lumina...",value:s,onChange:h=>n(h.target.value),className:"w-full bg-white/20 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white placeholder-white/60 outline-none focus:bg-white/30 focus:border-white/30 transition-all pr-10",maxLength:ca,"aria-describedby":i}),a.jsxs("button",{type:"submit",className:"absolute right-2 top-2 p-1.5 text-white/50 hover:text-white bg-white/5 hover:bg-white/20 rounded-lg transition-all disabled:opacity-50",disabled:!s.trim(),"aria-label":"Submit prompt",children:[a.jsx("span",{className:"sr-only",children:"Submit prompt"}),a.jsx($s,{size:14})]})]}),a.jsxs("div",{id:i,className:"mt-2 text-[11px] text-white/70 flex items-center justify-between",children:[a.jsx("span",{children:"Anchor with concrete nouns and tone cues."}),a.jsxs("span",{"aria-live":"polite",children:[c," left"]})]})]})]})},Uf=({onNavigateToGallery:t})=>{var $,D,V;const[e,s]=U.useState("#2463E6"),{toasts:n,addToast:i}=oi(),{heroProject:o,artifacts:c,loadingHero:d,loadingArtifacts:h,errorHero:f,addArtifact:g}=Ff();U.useEffect(()=>(document.documentElement.style.setProperty("--dashboard-accent",e),()=>{document.documentElement.style.removeProperty("--dashboard-accent")}),[e]);const v=U.useCallback(()=>{i("Notifications panel is coming soon.","info")},[i]),j=U.useCallback(()=>{i("New Project modal will open here.","success")},[i]),_=U.useCallback(B=>{const w=B.trim();if(!w){i("Please enter a prompt","info");return}if(w.length>1e3){i("Prompt is too long (max 1000 characters)","info");return}i(`Prompt sent: "${w}"`,"success");const m=w.slice(0,12),x={id:`gen-${Date.now()}`,name:`${m.replace(/\s+/g,"_")}.png`,imageSrc:""};g(x)},[i,g]),E=U.useCallback(B=>{s(B),i(`Accent updated to ${B}`,"info")},[i]),R=U.useCallback(()=>{i("Opening gallery...","info"),t==null||t()},[i,t]),T=U.useCallback(B=>{i(`Opening ${B.name}`,"info")},[i]),L=U.useMemo(()=>`${e}1A`,[e]),H=U.useMemo(()=>({"--dashboard-accent":e,backgroundImage:`radial-gradient(120% 120% at 100% 0%, ${L}, transparent 40%)`}),[e,L]);return a.jsxs("main",{className:"animate-in fade-in duration-700 pb-32 pt-12 px-12 max-w-[1600px] mx-auto",style:H,role:"main","aria-label":"Dashboard home page",children:[a.jsx("div",{className:"fixed top-6 right-6 z-50 space-y-3",children:n.map(B=>a.jsxs("div",{className:"bg-surface border border-border-subtle rounded-xl shadow-lg px-4 py-3 text-sm text-ink-primary w-72 flex items-start gap-2",style:{borderColor:B.type==="success"?e:void 0,boxShadow:B.type==="success"?"0 10px 30px rgba(36, 99, 230, 0.15)":void 0},role:"status","aria-live":"polite",children:[a.jsx("span",{className:"mt-1 block w-2 h-2 rounded-full",style:{backgroundColor:e}}),a.jsx("span",{className:"flex-1",children:B.message})]},B.id))}),a.jsx(Nf,{onNotificationsClick:v,onNewProjectClick:j}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 auto-rows-min",children:[d?a.jsx("div",{className:"lg:col-span-6 w-full h-full","aria-label":"Loading hero project",children:a.jsx("div",{className:"h-[360px] lg:h-full rounded-2xl bg-subtle border border-border-subtle animate-pulse"})}):f?a.jsx("div",{className:"lg:col-span-6 w-full h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center p-8 rounded-2xl bg-error/10 border border-error/20",children:[a.jsx("p",{className:"text-error font-medium mb-2",children:"Failed to load project"}),a.jsx("p",{className:"text-sm text-error/70",children:f})]})}):a.jsx(kf,{imageSrc:($=o==null?void 0:o.imageSrc)!=null?$:"",priorityLabel:o==null?void 0:o.priorityLabel,title:(D=o==null?void 0:o.title)!=null?D:"",description:(V=o==null?void 0:o.description)!=null?V:"",className:"lg:col-span-6 w-full h-full"}),a.jsxs("div",{className:"lg:col-span-6 grid grid-cols-1 sm:grid-cols-2 gap-6 content-start",children:[a.jsx($f,{onSubmitPrompt:_,className:"sm:col-span-2 lg:col-span-1 min-h-[220px]"}),a.jsx(Pf,{onColorSelect:E,className:"sm:col-span-2 lg:col-span-1",selectedColor:e}),a.jsx(Cf,{artifacts:c,loading:h,onViewGallery:R,onArtifactClick:T,className:"sm:col-span-2"}),a.jsx(Af,{className:"sm:col-span-1 min-h-[220px]"}),a.jsx(Df,{className:"sm:col-span-1 min-h-[220px]"})]})]})]})},Bf=()=>({config:{apiKey:"AIzaSyAONjMz5IWshDt_spZEpGI_gnNDD7izGsA",appId:"1:893670545674:web:0e49068bd1dd30b58842f3",authDomain:"gen-lang-client-0704991831.firebaseapp.com",databaseURL:"https://gen-lang-client-0704991831-default-rtdb.firebaseio.com",messagingSenderId:"893670545674",projectId:"gen-lang-client-0704991831",storageBucket:"gen-lang-client-0704991831.firebasestorage.app"},emulatorHosts:{}});var la={};const Kc=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},Vf=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const i=t[s++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[s++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[s++],c=t[s++],d=t[s++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=t[s++],c=t[s++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Jc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,d=c?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,g=o>>2,v=(o&3)<<4|d>>4;let j=(d&15)<<2|f>>6,_=f&63;h||(_=64,c||(j=64)),n.push(s[g],s[v],s[j],s[_])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kc(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=s[t.charAt(i++)],d=i<t.length?s[t.charAt(i)]:0;++i;const f=i<t.length?s[t.charAt(i)]:64;++i;const v=i<t.length?s[t.charAt(i)]:64;if(++i,o==null||d==null||f==null||v==null)throw new zf;const j=o<<2|d>>4;if(n.push(j),f!==64){const _=d<<4&240|f>>2;if(n.push(_),v!==64){const E=f<<6&192|v;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hf=function(t){const e=Kc(t);return Jc.encodeByteArray(e,!0)},Dn=function(t){return Hf(t).replace(/\./g,"")},qf=function(t){try{return Jc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gf(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}const Wf=()=>Gf().__FIREBASE_DEFAULTS__,Kf=()=>{if(typeof process=="undefined"||typeof la=="undefined")return;const t=la.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jf=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const e=t&&qf(t[1]);return e&&JSON.parse(e)},Xc=()=>{try{return Bf()||Wf()||Kf()||Jf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xf=t=>{var e,s;return(s=(e=Xc())==null?void 0:e.emulatorHosts)==null?void 0:s[t]},mi=t=>{const e=Xf(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},Yc=()=>{var t;return(t=Xc())==null?void 0:t.config};class Yf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}function Kn(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function gi(t){return A(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function Qc(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=M({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dn(JSON.stringify(s)),Dn(JSON.stringify(c)),""].join(".")}const Os={};function Qf(){const t={prod:[],emulator:[]};for(const e of Object.keys(Os))Os[e]?t.emulator.push(e):t.prod.push(e);return t}function Zf(t){let e=document.getElementById(t),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),s=!0),{created:s,element:e}}let ua=!1;function yi(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!Kn(window.location.host)||Os[t]===e||Os[t]||ua)return;Os[t]=e;function s(j){return`__firebase__banner__${j}`}const n="__firebase__banner",o=Qf().prod.length>0;function c(){const j=document.getElementById(n);j&&j.remove()}function d(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function h(j,_){j.setAttribute("width","24"),j.setAttribute("id",_),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function f(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{ua=!0,c()},j}function g(j,_){j.setAttribute("id",_),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function v(){const j=Zf(n),_=s("text"),E=document.getElementById(_)||document.createElement("span"),R=s("learnmore"),T=document.getElementById(R)||document.createElement("a"),L=s("preprendIcon"),H=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const $=j.element;d($),g(T,R);const D=f();h(H,L),$.append(H,E,T,D),document.body.appendChild($)}o?(E.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function ep(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zc(){try{return typeof indexedDB=="object"}catch(t){return!1}}function el(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(s){e(s)}})}function tp(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}const sp="FirebaseError";class Ye extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=sp,Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jn.prototype.create)}}class Jn{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?np(o,n):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Ye(i,d,n)}}function np(t,e){return t.replace(rp,(s,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const rp=/\{\$([^}]+)}/g;function Bs(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const i of s){if(!n.includes(i))return!1;const o=t[i],c=e[i];if(da(o)&&da(c)){if(!Bs(o,c))return!1}else if(o!==c)return!1}for(const i of n)if(!s.includes(i))return!1;return!0}function da(t){return t!==null&&typeof t=="object"}const ip=1e3,op=2,ap=14400*1e3,cp=.5;function ha(t,e=ip,s=op){const n=e*Math.pow(s,t),i=Math.round(cp*n*(Math.random()-.5)*2);return Math.min(ap,n+i)}function Vt(t){return t&&t._delegate?t._delegate:t}class De{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const St="[DEFAULT]";class lp{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new Yf;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&n.resolve(i)}catch(i){}}return this.instancesDeferred.get(s).promise}getImmediate(e){var i;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(i=e==null?void 0:e.optional)!=null?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dp(e))try{this.getOrInitializeService({instanceIdentifier:St})}catch(s){}for(const[s,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch(o){}}}}clearInstance(e=St){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=St){return this.instances.has(e)}getOptions(e=St){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);n===d&&c.resolve(i)}return i}onInit(e,s){var c;const n=this.normalizeInstanceIdentifier(s),i=(c=this.onInitCallbacks.get(n))!=null?c:new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const i of n)try{i(e,s)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:up(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}return n||null}normalizeInstanceIdentifier(e=St){return this.component?this.component.multipleInstances?e:St:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function up(t){return t===St?void 0:t}function dp(t){return t.instantiationMode==="EAGER"}class hp{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new lp(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const fp={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},pp=ae.INFO,mp={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},gp=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=mp[e];if(i)console[i](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xn{constructor(e){this.name=e,this._logLevel=pp,this._logHandler=gp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const yp=(t,e)=>e.some(s=>t instanceof s);let fa,pa;function bp(){return fa||(fa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xp(){return pa||(pa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tl=new WeakMap,Jr=new WeakMap,sl=new WeakMap,Ar=new WeakMap,bi=new WeakMap;function wp(t){const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{s(ft(t.result)),i()},c=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(s=>{s instanceof IDBCursor&&tl.set(s,t)}).catch(()=>{}),bi.set(e,t),e}function vp(t){if(Jr.has(t))return;const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{s(),i()},c=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});Jr.set(t,e)}let Xr={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Jr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sl.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ft(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sp(t){Xr=t(Xr)}function _p(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Tr(this),e,...s);return sl.set(n,e.sort?e.sort():[e]),ft(n)}:xp().includes(t)?function(...e){return t.apply(Tr(this),e),ft(tl.get(this))}:function(...e){return ft(t.apply(Tr(this),e))}}function Ep(t){return typeof t=="function"?_p(t):(t instanceof IDBTransaction&&vp(t),yp(t,bp())?new Proxy(t,Xr):t)}function ft(t){if(t instanceof IDBRequest)return wp(t);if(Ar.has(t))return Ar.get(t);const e=Ep(t);return e!==t&&(Ar.set(t,e),bi.set(e,t)),e}const Tr=t=>bi.get(t);function nl(t,e,{blocked:s,upgrade:n,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),d=ft(c);return n&&c.addEventListener("upgradeneeded",h=>{n(ft(c.result),h.oldVersion,h.newVersion,ft(c.transaction),h)}),s&&c.addEventListener("blocked",h=>s(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const Np=["get","getKey","getAll","getAllKeys","count"],kp=["put","add","delete","clear"],Ir=new Map;function ma(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ir.get(e))return Ir.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=kp.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Np.includes(s)))return;const o=function(c,...d){return A(this,null,function*(){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return n&&(f=f.index(d.shift())),(yield Promise.all([f[s](...d),i&&h.done]))[0]})};return Ir.set(e,o),o}Sp(t=>G(M({},t),{get:(e,s,n)=>ma(e,s)||t.get(e,s,n),has:(e,s)=>!!ma(e,s)||t.has(e,s)}));class jp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(Ap(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function Ap(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yr="@firebase/app",ga="0.14.6";const st=new Xn("@firebase/app"),Tp="@firebase/app-compat",Ip="@firebase/analytics-compat",Cp="@firebase/analytics",Rp="@firebase/app-check-compat",Dp="@firebase/app-check",Op="@firebase/auth",Pp="@firebase/auth-compat",Lp="@firebase/database",Mp="@firebase/data-connect",Fp="@firebase/database-compat",$p="@firebase/functions",Up="@firebase/functions-compat",Bp="@firebase/installations",Vp="@firebase/installations-compat",zp="@firebase/messaging",Hp="@firebase/messaging-compat",qp="@firebase/performance",Gp="@firebase/performance-compat",Wp="@firebase/remote-config",Kp="@firebase/remote-config-compat",Jp="@firebase/storage",Xp="@firebase/storage-compat",Yp="@firebase/firestore",Qp="@firebase/ai",Zp="@firebase/firestore-compat",em="firebase",tm="12.6.0";const Qr="[DEFAULT]",sm={[Yr]:"fire-core",[Tp]:"fire-core-compat",[Cp]:"fire-analytics",[Ip]:"fire-analytics-compat",[Dp]:"fire-app-check",[Rp]:"fire-app-check-compat",[Op]:"fire-auth",[Pp]:"fire-auth-compat",[Lp]:"fire-rtdb",[Mp]:"fire-data-connect",[Fp]:"fire-rtdb-compat",[$p]:"fire-fn",[Up]:"fire-fn-compat",[Bp]:"fire-iid",[Vp]:"fire-iid-compat",[zp]:"fire-fcm",[Hp]:"fire-fcm-compat",[qp]:"fire-perf",[Gp]:"fire-perf-compat",[Wp]:"fire-rc",[Kp]:"fire-rc-compat",[Jp]:"fire-gcs",[Xp]:"fire-gcs-compat",[Yp]:"fire-fst",[Zp]:"fire-fst-compat",[Qp]:"fire-vertex","fire-js":"fire-js",[em]:"fire-js-all"};const On=new Map,nm=new Map,Zr=new Map;function ya(t,e){try{t.container.addComponent(e)}catch(s){st.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Be(t){const e=t.name;if(Zr.has(e))return st.debug(`There were multiple attempts to register component ${e}.`),!1;Zr.set(e,t);for(const s of On.values())ya(s,t);for(const s of nm.values())ya(s,t);return!0}function gt(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}const rm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pt=new Jn("app","Firebase",rm);class im{constructor(e,s,n){this._isDeleted=!1,this._options=M({},e),this._config=M({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new De("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const rl=tm;function il(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=M({name:Qr,automaticDataCollectionEnabled:!0},e),i=n.name;if(typeof i!="string"||!i)throw pt.create("bad-app-name",{appName:String(i)});if(s||(s=Yc()),!s)throw pt.create("no-options");const o=On.get(i);if(o){if(Bs(s,o.options)&&Bs(n,o.config))return o;throw pt.create("duplicate-app",{appName:i})}const c=new hp(i);for(const h of Zr.values())c.addComponent(h);const d=new im(s,n,c);return On.set(i,d),d}function Ks(t=Qr){const e=On.get(t);if(!e&&t===Qr&&Yc())return il();if(!e)throw pt.create("no-app",{appName:t});return e}function ve(t,e,s){var c;let n=(c=sm[t])!=null?c:t;s&&(n+=`-${s}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const d=[`Unable to register library "${n}" with version "${e}":`];i&&d.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&d.push("and"),o&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),st.warn(d.join(" "));return}Be(new De(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const om="firebase-heartbeat-database",am=1,Vs="firebase-heartbeat-store";let Cr=null;function ol(){return Cr||(Cr=nl(om,am,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vs)}catch(s){console.warn(s)}}}}).catch(t=>{throw pt.create("idb-open",{originalErrorMessage:t.message})})),Cr}function cm(t){return A(this,null,function*(){try{const s=(yield ol()).transaction(Vs),n=yield s.objectStore(Vs).get(al(t));return yield s.done,n}catch(e){if(e instanceof Ye)st.warn(e.message);else{const s=pt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});st.warn(s.message)}}})}function ba(t,e){return A(this,null,function*(){try{const n=(yield ol()).transaction(Vs,"readwrite");yield n.objectStore(Vs).put(e,al(t)),yield n.done}catch(s){if(s instanceof Ye)st.warn(s.message);else{const n=pt.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});st.warn(n.message)}}})}function al(t){return`${t.name}!${t.options.appId}`}const lm=1024,um=30;class dm{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new fm(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return A(this,null,function*(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xa();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>um){const c=pm(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){st.warn(n)}})}getHeartbeatsHeader(){return A(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=xa(),{heartbeatsToSend:n,unsentEntries:i}=hm(this._heartbeatsCache.heartbeats),o=Dn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return st.warn(s),""}})}}function xa(){return new Date().toISOString().substring(0,10)}function hm(t,e=lm){const s=[];let n=t.slice();for(const i of t){const o=s.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),wa(s)>e){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),wa(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class fm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return Zc()?el().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){const s=yield cm(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return ba(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!=null?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return ba(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!=null?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}}function wa(t){return Dn(JSON.stringify({version:2,heartbeats:t})).length}function pm(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let n=1;n<t.length;n++)t[n].date<s&&(s=t[n].date,e=n);return e}function mm(t){Be(new De("platform-logger",e=>new jp(e),"PRIVATE")),Be(new De("heartbeat",e=>new dm(e),"PRIVATE")),ve(Yr,ga,t),ve(Yr,ga,"esm2020"),ve("fire-js","")}mm("");var va="@firebase/ai",ei="2.6.0";const is="AI",Sa="us-central1",gm="firebasevertexai.googleapis.com",Pn="v1beta",_a=ei,ym="gl-js",bm=180*1e3,xm="gemini-2.0-flash-lite";class Q extends Ye{constructor(e,s,n){const i=is,o=`${i}/${e}`,c=`${i}: ${s} (${o})`;super(e,c),this.code=e,this.customErrorData=n,Error.captureStackTrace&&Error.captureStackTrace(this,Q),Object.setPrototypeOf(this,Q.prototype),this.toString=()=>c}}const Ea=["user","model","function","system"],cl={HARM_SEVERITY_UNSUPPORTED:"HARM_SEVERITY_UNSUPPORTED"},Na={SAFETY:"SAFETY",RECITATION:"RECITATION"},It={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud",PREFER_IN_CLOUD:"prefer_in_cloud"},ht={ON_DEVICE:"on_device",IN_CLOUD:"in_cloud"};const J={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};const nt={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};class ll{constructor(e){this.backendType=e}}class xi extends ll{constructor(){super(nt.GOOGLE_AI)}_getModelPath(e,s){return`/${Pn}/projects/${e}/${s}`}_getTemplatePath(e,s){return`/${Pn}/projects/${e}/templates/${s}`}}class Qn extends ll{constructor(e=Sa){super(nt.VERTEX_AI),e?this.location=e:this.location=Sa}_getModelPath(e,s){return`/${Pn}/projects/${e}/locations/${this.location}/${s}`}_getTemplatePath(e,s){return`/${Pn}/projects/${e}/locations/${this.location}/templates/${s}`}}function wm(t){if(t instanceof xi)return`${is}/googleai`;if(t instanceof Qn)return`${is}/vertexai/${t.location}`;throw new Q(J.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function vm(t){const e=t.split("/");if(e[0]!==is)throw new Q(J.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const n=e[2];if(!n)throw new Q(J.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new Qn(n);case"googleai":return new xi;default:throw new Q(J.ERROR,`Invalid instance identifier string: '${t}'`)}}const ke=new Xn("@firebase/vertexai");var Et;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(Et||(Et={}));const Rr=[{type:"image"}];class Me{constructor(e,s,n){this.languageModelProvider=e,this.mode=s,this.isDownloading=!1,this.onDeviceParams={createOptions:{expectedInputs:Rr}},n&&(this.onDeviceParams=n,this.onDeviceParams.createOptions?this.onDeviceParams.createOptions.expectedInputs||(this.onDeviceParams.createOptions.expectedInputs=Rr):this.onDeviceParams.createOptions={expectedInputs:Rr})}isAvailable(e){return A(this,null,function*(){if(!this.mode)return ke.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===It.ONLY_IN_CLOUD)return ke.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const s=yield this.downloadIfAvailable();if(this.mode===It.ONLY_ON_DEVICE){if(s===Et.UNAVAILABLE)throw new Q(J.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(s===Et.DOWNLOADABLE||s===Et.DOWNLOADING)&&(ke.debug("Waiting for download of LanguageModel to complete."),yield this.downloadPromise),!0}return s!==Et.AVAILABLE?(ke.debug(`On-device inference unavailable because availability is "${s}".`),!1):Me.isOnDeviceRequest(e)?!0:(ke.debug("On-device inference unavailable because request is incompatible."),!1)})}generateContent(e){return A(this,null,function*(){const s=yield this.createSession(),n=yield Promise.all(e.contents.map(Me.toLanguageModelMessage)),i=yield s.prompt(n,this.onDeviceParams.promptOptions);return Me.toResponse(i)})}generateContentStream(e){return A(this,null,function*(){const s=yield this.createSession(),n=yield Promise.all(e.contents.map(Me.toLanguageModelMessage)),i=s.promptStreaming(n,this.onDeviceParams.promptOptions);return Me.toStreamResponse(i)})}countTokens(e){return A(this,null,function*(){throw new Q(J.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")})}static isOnDeviceRequest(e){if(e.contents.length===0)return ke.debug("Empty prompt rejected for on-device inference."),!1;for(const s of e.contents){if(s.role==="function")return ke.debug('"Function" role rejected for on-device inference.'),!1;for(const n of s.parts)if(n.inlineData&&Me.SUPPORTED_MIME_TYPES.indexOf(n.inlineData.mimeType)===-1)return ke.debug(`Unsupported mime type "${n.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}downloadIfAvailable(){return A(this,null,function*(){var s;const e=yield(s=this.languageModelProvider)==null?void 0:s.availability(this.onDeviceParams.createOptions);return e===Et.DOWNLOADABLE&&this.download(),e})}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static toLanguageModelMessage(e){return A(this,null,function*(){const s=yield Promise.all(e.parts.map(Me.toLanguageModelMessageContent));return{role:Me.toLanguageModelMessageRole(e.role),content:s}})}static toLanguageModelMessageContent(e){return A(this,null,function*(){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const n=yield(yield fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:yield createImageBitmap(n)}}throw new Q(J.REQUEST_ERROR,"Processing of this Part type is not currently supported.")})}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}createSession(){return A(this,null,function*(){if(!this.languageModelProvider)throw new Q(J.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=yield this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e})}static toResponse(e){return{json:()=>A(null,null,function*(){return{candidates:[{content:{parts:[{text:e}]}}]}})}}static toStreamResponse(e){const s=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(n,i){const o=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:n}]}}]});i.enqueue(s.encode(`data: ${o}

`))}}))}}}Me.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function Sm(t,e,s){if(typeof e!="undefined"&&t)return new Me(e.LanguageModel,t,s)}class _m{constructor(e,s,n,i,o){this.app=e,this.backend=s,this.chromeAdapterFactory=o;const c=i==null?void 0:i.getImmediate({optional:!0}),d=n==null?void 0:n.getImmediate({optional:!0});this.auth=d||null,this.appCheck=c||null,s instanceof Qn?this.location=s.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}}function Em(t,{instanceIdentifier:e}){if(!e)throw new Q(J.ERROR,"AIService instance identifier is undefined.");const s=vm(e),n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new _m(n,s,i,o,Sm)}function Nm(t){var s,n,i,o,c,d,h;if((n=(s=t.app)==null?void 0:s.options)!=null&&n.apiKey)if((o=(i=t.app)==null?void 0:i.options)!=null&&o.projectId){if(!((d=(c=t.app)==null?void 0:c.options)!=null&&d.appId))throw new Q(J.NO_APP_ID,'The "appId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid app ID.')}else throw new Q(J.NO_PROJECT_ID,'The "projectId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid project ID.');else throw new Q(J.NO_API_KEY,'The "apiKey" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid API key.');const e={apiKey:t.app.options.apiKey,project:t.app.options.projectId,appId:t.app.options.appId,automaticDataCollectionEnabled:t.app.automaticDataCollectionEnabled,location:t.location,backend:t.backend};if(Yn(t.app)&&t.app.settings.appCheckToken){const f=t.app.settings.appCheckToken;e.getAppCheckToken=()=>Promise.resolve({token:f})}else t.appCheck&&((h=t.options)!=null&&h.useLimitedUseAppCheckTokens?e.getAppCheckToken=()=>t.appCheck.getLimitedUseToken():e.getAppCheckToken=()=>t.appCheck.getToken());return t.auth&&(e.getAuthToken=()=>t.auth.getToken()),e}class Ps{constructor(e,s){this._apiSettings=Nm(e),this.model=Ps.normalizeModelName(s,this._apiSettings.backend.backendType)}static normalizeModelName(e,s){return s===nt.GOOGLE_AI?Ps.normalizeGoogleAIModelName(e):Ps.normalizeVertexAIModelName(e)}static normalizeGoogleAIModelName(e){return`models/${e}`}static normalizeVertexAIModelName(e){let s;return e.includes("/")?e.startsWith("models/")?s=`publishers/google/${e}`:s=e:s=`publishers/google/models/${e}`,s}}class km{constructor(e){this.params=e}toString(){const e=new URL(this.baseUrl);return e.pathname=this.pathname,e.search=this.queryParams.toString(),e.toString()}get pathname(){return this.params.templateId?`${this.params.apiSettings.backend._getTemplatePath(this.params.apiSettings.project,this.params.templateId)}:${this.params.task}`:`${this.params.apiSettings.backend._getModelPath(this.params.apiSettings.project,this.params.model)}:${this.params.task}`}get baseUrl(){var e,s;return(s=(e=this.params.requestOptions)==null?void 0:e.baseUrl)!=null?s:`https://${gm}`}get queryParams(){const e=new URLSearchParams;return this.params.stream&&e.set("alt","sse"),e}}function jm(){const t=[];return t.push(`${ym}/${_a}`),t.push(`fire/${_a}`),t.join(" ")}function Am(t){return A(this,null,function*(){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",jm()),e.append("x-goog-api-key",t.params.apiSettings.apiKey),t.params.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.params.apiSettings.appId),t.params.apiSettings.getAppCheckToken){const s=yield t.params.apiSettings.getAppCheckToken();s&&(e.append("X-Firebase-AppCheck",s.token),s.error&&ke.warn(`Unable to obtain a valid App Check token: ${s.error.message}`))}if(t.params.apiSettings.getAuthToken){const s=yield t.params.apiSettings.getAuthToken();s&&e.append("Authorization",`Firebase ${s.accessToken}`)}return e})}function wi(t,e){return A(this,null,function*(){var o;const s=new km(t);let n,i;try{const c={method:"POST",headers:yield Am(s),body:e},d=((o=t.requestOptions)==null?void 0:o.timeout)!=null&&t.requestOptions.timeout>=0?t.requestOptions.timeout:bm,h=new AbortController;if(i=setTimeout(()=>h.abort(),d),c.signal=h.signal,n=yield fetch(s.toString(),c),!n.ok){let f="",g;try{const v=yield n.json();f=v.error.message,v.error.details&&(f+=` ${JSON.stringify(v.error.details)}`,g=v.error.details)}catch(v){}throw n.status===403&&g&&g.some(v=>v.reason==="SERVICE_DISABLED")&&g.some(v=>{var j,_;return(_=(j=v.links)==null?void 0:j[0])==null?void 0:_.description.includes("Google developers console API activation")})?new Q(J.API_NOT_ENABLED,`The Firebase AI SDK requires the Firebase AI API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${s.params.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:n.status,statusText:n.statusText,errorDetails:g}):new Q(J.FETCH_ERROR,`Error fetching from ${s}: [${n.status} ${n.statusText}] ${f}`,{status:n.status,statusText:n.statusText,errorDetails:g})}}catch(c){let d=c;throw c.code!==J.FETCH_ERROR&&c.code!==J.API_NOT_ENABLED&&c instanceof Error&&(d=new Q(J.ERROR,`Error fetching from ${s.toString()}: ${c.message}`),d.stack=c.stack),d}finally{i&&clearTimeout(i)}return n})}function yn(t){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&ke.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ul(t.candidates[0]))throw new Q(J.RESPONSE_ERROR,`Response error: ${Ct(t)}. Response body stored in error.response`,{response:t});return!0}else return!1}function Ln(t,e=ht.IN_CLOUD){t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0);const s=Tm(t);return s.inferenceSource=e,s}function Tm(t){return t.text=()=>{if(yn(t))return ka(t,e=>!e.thought);if(t.promptFeedback)throw new Q(J.RESPONSE_ERROR,`Text not available. ${Ct(t)}`,{response:t});return""},t.thoughtSummary=()=>{if(yn(t)){const e=ka(t,s=>!!s.thought);return e===""?void 0:e}else if(t.promptFeedback)throw new Q(J.RESPONSE_ERROR,`Thought summary not available. ${Ct(t)}`,{response:t})},t.inlineDataParts=()=>{if(yn(t))return Cm(t);if(t.promptFeedback)throw new Q(J.RESPONSE_ERROR,`Data not available. ${Ct(t)}`,{response:t})},t.functionCalls=()=>{if(yn(t))return Im(t);if(t.promptFeedback)throw new Q(J.RESPONSE_ERROR,`Function call not available. ${Ct(t)}`,{response:t})},t}function ka(t,e){var n,i,o,c;const s=[];if((i=(n=t.candidates)==null?void 0:n[0].content)!=null&&i.parts)for(const d of(c=(o=t.candidates)==null?void 0:o[0].content)==null?void 0:c.parts)d.text&&e(d)&&s.push(d.text);return s.length>0?s.join(""):""}function Im(t){var s,n,i,o;const e=[];if((n=(s=t.candidates)==null?void 0:s[0].content)!=null&&n.parts)for(const c of(o=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:o.parts)c.functionCall&&e.push(c.functionCall);if(e.length>0)return e}function Cm(t){var s,n,i,o;const e=[];if((n=(s=t.candidates)==null?void 0:s[0].content)!=null&&n.parts)for(const c of(o=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:o.parts)c.inlineData&&e.push(c);if(e.length>0)return e}const Rm=[Na.RECITATION,Na.SAFETY];function ul(t){return!!t.finishReason&&Rm.some(e=>e===t.finishReason)}function Ct(t){var s,n,i;let e="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)e+="Response was blocked",(s=t.promptFeedback)!=null&&s.blockReason&&(e+=` due to ${t.promptFeedback.blockReason}`),(n=t.promptFeedback)!=null&&n.blockReasonMessage&&(e+=`: ${t.promptFeedback.blockReasonMessage}`);else if((i=t.candidates)!=null&&i[0]){const o=t.candidates[0];ul(o)&&(e+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(e+=`: ${o.finishMessage}`))}return e}function dl(t){var e,s;if((e=t.safetySettings)==null||e.forEach(n=>{if(n.method)throw new Q(J.UNSUPPORTED,"SafetySetting.method is not supported in the the Gemini Developer API. Please remove this property.")}),(s=t.generationConfig)!=null&&s.topK){const n=Math.round(t.generationConfig.topK);n!==t.generationConfig.topK&&(ke.warn("topK in GenerationConfig has been rounded to the nearest integer to match the format for requests to the Gemini Developer API."),t.generationConfig.topK=n)}return t}function vi(t){return{candidates:t.candidates?Om(t.candidates):void 0,prompt:t.promptFeedback?Pm(t.promptFeedback):void 0,usageMetadata:t.usageMetadata}}function Dm(t,e){return{generateContentRequest:M({model:e},t)}}function Om(t){const e=[];let s;return e&&t.forEach(n=>{var c,d;let i;if(n.citationMetadata&&(i={citations:n.citationMetadata.citationSources}),n.safetyRatings&&(s=n.safetyRatings.map(h=>{var f,g,v;return G(M({},h),{severity:(f=h.severity)!=null?f:cl.HARM_SEVERITY_UNSUPPORTED,probabilityScore:(g=h.probabilityScore)!=null?g:0,severityScore:(v=h.severityScore)!=null?v:0})})),(d=(c=n.content)==null?void 0:c.parts)!=null&&d.some(h=>h==null?void 0:h.videoMetadata))throw new Q(J.UNSUPPORTED,"Part.videoMetadata is not supported in the Gemini Developer API. Please remove this property.");const o={index:n.index,content:n.content,finishReason:n.finishReason,finishMessage:n.finishMessage,safetyRatings:s,citationMetadata:i,groundingMetadata:n.groundingMetadata,urlContextMetadata:n.urlContextMetadata};e.push(o)}),e}function Pm(t){const e=[];return t.safetyRatings.forEach(n=>{var i,o,c;e.push({category:n.category,probability:n.probability,severity:(i=n.severity)!=null?i:cl.HARM_SEVERITY_UNSUPPORTED,probabilityScore:(o=n.probabilityScore)!=null?o:0,severityScore:(c=n.severityScore)!=null?c:0,blocked:n.blocked})}),{blockReason:t.blockReason,safetyRatings:e,blockReasonMessage:t.blockReasonMessage}}const ja=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Lm(t,e,s){const n=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=$m(n),[o,c]=i.tee();return{stream:Fm(o,e,s),response:Mm(c,e,s)}}function Mm(t,e,s){return A(this,null,function*(){const n=[],i=t.getReader();for(;;){const{done:o,value:c}=yield i.read();if(o){let d=Um(n);return e.backend.backendType===nt.GOOGLE_AI&&(d=vi(d)),Ln(d,s)}n.push(c)}})}function Fm(t,e,s){return hn(this,null,function*(){var i,o;const n=t.getReader();for(;;){const{value:c,done:d}=yield new ut(n.read());if(d)break;let h;e.backend.backendType===nt.GOOGLE_AI?h=Ln(vi(c),s):h=Ln(c,s);const f=(i=h.candidates)==null?void 0:i[0];!((o=f==null?void 0:f.content)!=null&&o.parts)&&!(f!=null&&f.finishReason)&&!(f!=null&&f.citationMetadata)&&!(f!=null&&f.urlContextMetadata)||(yield h)}})}function $m(t){const e=t.getReader();return new ReadableStream({start(n){let i="";return o();function o(){return e.read().then(({value:c,done:d})=>{if(d){if(i.trim()){n.error(new Q(J.PARSE_FAILED,"Failed to parse stream"));return}n.close();return}i+=c;let h=i.match(ja),f;for(;h;){try{f=JSON.parse(h[1])}catch(g){n.error(new Q(J.PARSE_FAILED,`Error parsing JSON response: "${h[1]}`));return}n.enqueue(f),i=i.substring(h[0].length),h=i.match(ja)}return o()})}}})}function Um(t){const e=t[t.length-1],s={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t)if(n.candidates)for(const i of n.candidates){const o=i.index||0;s.candidates||(s.candidates=[]),s.candidates[o]||(s.candidates[o]={index:i.index}),s.candidates[o].citationMetadata=i.citationMetadata,s.candidates[o].finishReason=i.finishReason,s.candidates[o].finishMessage=i.finishMessage,s.candidates[o].safetyRatings=i.safetyRatings,s.candidates[o].groundingMetadata=i.groundingMetadata;const c=i.urlContextMetadata;if(typeof c=="object"&&c!==null&&Object.keys(c).length>0&&(s.candidates[o].urlContextMetadata=c),i.content){if(!i.content.parts)continue;s.candidates[o].content||(s.candidates[o].content={role:i.content.role||"user",parts:[]});for(const d of i.content.parts){const h=M({},d);d.text!==""&&Object.keys(h).length>0&&s.candidates[o].content.parts.push(h)}}}return s}const Bm=[J.FETCH_ERROR,J.ERROR,J.API_NOT_ENABLED];function hl(t,e,s,n){return A(this,null,function*(){if(!e)return{response:yield n(),inferenceSource:ht.IN_CLOUD};switch(e.mode){case It.ONLY_ON_DEVICE:if(yield e.isAvailable(t))return{response:yield s(),inferenceSource:ht.ON_DEVICE};throw new Q(J.UNSUPPORTED,"Inference mode is ONLY_ON_DEVICE, but an on-device model is not available.");case It.ONLY_IN_CLOUD:return{response:yield n(),inferenceSource:ht.IN_CLOUD};case It.PREFER_IN_CLOUD:try{return{response:yield n(),inferenceSource:ht.IN_CLOUD}}catch(i){if(i instanceof Q&&Bm.includes(i.code))return{response:yield s(),inferenceSource:ht.ON_DEVICE};throw i}case It.PREFER_ON_DEVICE:return(yield e.isAvailable(t))?{response:yield s(),inferenceSource:ht.ON_DEVICE}:{response:yield n(),inferenceSource:ht.IN_CLOUD};default:throw new Q(J.ERROR,`Unexpected infererence mode: ${e.mode}`)}})}function Vm(t,e,s,n){return A(this,null,function*(){return t.backend.backendType===nt.GOOGLE_AI&&(s=dl(s)),wi({task:"streamGenerateContent",model:e,apiSettings:t,stream:!0,requestOptions:n},JSON.stringify(s))})}function fl(t,e,s,n,i){return A(this,null,function*(){const o=yield hl(s,n,()=>n.generateContentStream(s),()=>Vm(t,e,s,i));return Lm(o.response,t)})}function zm(t,e,s,n){return A(this,null,function*(){return t.backend.backendType===nt.GOOGLE_AI&&(s=dl(s)),wi({model:e,task:"generateContent",apiSettings:t,stream:!1,requestOptions:n},JSON.stringify(s))})}function pl(t,e,s,n,i){return A(this,null,function*(){const o=yield hl(s,n,()=>n.generateContent(s),()=>zm(t,e,s,i)),c=yield Hm(o.response,t);return{response:Ln(c,o.inferenceSource)}})}function Hm(t,e){return A(this,null,function*(){const s=yield t.json();return e.backend.backendType===nt.GOOGLE_AI?vi(s):s})}function ml(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function ti(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const s of t)typeof s=="string"?e.push({text:s}):e.push(s);return qm(e)}function qm(t){const e={role:"user",parts:[]},s={role:"function",parts:[]};let n=!1,i=!1;for(const o of t)"functionResponse"in o?(s.parts.push(o),i=!0):(e.parts.push(o),n=!0);if(n&&i)throw new Q(J.INVALID_CONTENT,"Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!n&&!i)throw new Q(J.INVALID_CONTENT,"No Content is provided for sending chat message.");return n?e:s}function Dr(t){let e;return t.contents?e=t:e={contents:[ti(t)]},t.systemInstruction&&(e.systemInstruction=ml(t.systemInstruction)),e}const Aa=["text","inlineData","functionCall","functionResponse","thought","thoughtSignature"],Gm={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","thought","thoughtSignature"],system:["text"]},Ta={user:["model"],function:["model"],model:["user","function"],system:[]};function Wm(t){let e=null;for(const s of t){const{role:n,parts:i}=s;if(!e&&n!=="user")throw new Q(J.INVALID_CONTENT,`First Content should be with role 'user', got ${n}`);if(!Ea.includes(n))throw new Q(J.INVALID_CONTENT,`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(Ea)}`);if(!Array.isArray(i))throw new Q(J.INVALID_CONTENT,"Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Q(J.INVALID_CONTENT,"Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,thought:0,thoughtSignature:0,executableCode:0,codeExecutionResult:0};for(const d of i)for(const h of Aa)h in d&&(o[h]+=1);const c=Gm[n];for(const d of Aa)if(!c.includes(d)&&o[d]>0)throw new Q(J.INVALID_CONTENT,`Content with role '${n}' can't contain '${d}' part`);if(e&&!Ta[n].includes(e.role))throw new Q(J.INVALID_CONTENT,`Content with role '${n}' can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(Ta)}`);e=s}}const Ia="SILENT_ERROR";class Km{constructor(e,s,n,i,o){this.model=s,this.chromeAdapter=n,this.params=i,this.requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,i!=null&&i.history&&(Wm(i.history),this._history=i.history)}getHistory(){return A(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(e){return A(this,null,function*(){var o,c,d,h,f;yield this._sendPromise;const s=ti(e),n={safetySettings:(o=this.params)==null?void 0:o.safetySettings,generationConfig:(c=this.params)==null?void 0:c.generationConfig,tools:(d=this.params)==null?void 0:d.tools,toolConfig:(h=this.params)==null?void 0:h.toolConfig,systemInstruction:(f=this.params)==null?void 0:f.systemInstruction,contents:[...this._history,s]};let i={};return this._sendPromise=this._sendPromise.then(()=>pl(this._apiSettings,this.model,n,this.chromeAdapter,this.requestOptions)).then(g=>{var v,j;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(s);const _={parts:((v=g.response.candidates)==null?void 0:v[0].content.parts)||[],role:((j=g.response.candidates)==null?void 0:j[0].content.role)||"model"};this._history.push(_)}else{const _=Ct(g.response);_&&ke.warn(`sendMessage() was unsuccessful. ${_}. Inspect response object for details.`)}i=g}),yield this._sendPromise,i})}sendMessageStream(e){return A(this,null,function*(){var o,c,d,h,f;yield this._sendPromise;const s=ti(e),n={safetySettings:(o=this.params)==null?void 0:o.safetySettings,generationConfig:(c=this.params)==null?void 0:c.generationConfig,tools:(d=this.params)==null?void 0:d.tools,toolConfig:(h=this.params)==null?void 0:h.toolConfig,systemInstruction:(f=this.params)==null?void 0:f.systemInstruction,contents:[...this._history,s]},i=fl(this._apiSettings,this.model,n,this.chromeAdapter,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>i).catch(g=>{throw new Error(Ia)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(s);const v=M({},g.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=Ct(g);v&&ke.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(g=>{g.message!==Ia&&ke.error(g)}),i})}}function Jm(t,e,s,n){return A(this,null,function*(){let i="";if(t.backend.backendType===nt.GOOGLE_AI){const c=Dm(s,e);i=JSON.stringify(c)}else i=JSON.stringify(s);return(yield wi({model:e,task:"countTokens",apiSettings:t,stream:!1,requestOptions:n},i)).json()})}function Xm(t,e,s,n,i){return A(this,null,function*(){if((n==null?void 0:n.mode)===It.ONLY_ON_DEVICE)throw new Q(J.UNSUPPORTED,"countTokens() is not supported for on-device models.");return Jm(t,e,s,i)})}class Ym extends Ps{constructor(e,s,n,i){super(e,s.model),this.chromeAdapter=i,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=ml(s.systemInstruction),this.requestOptions=n||{}}generateContent(e){return A(this,null,function*(){const s=Dr(e);return pl(this._apiSettings,this.model,M({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},s),this.chromeAdapter,this.requestOptions)})}generateContentStream(e){return A(this,null,function*(){const s=Dr(e);return fl(this._apiSettings,this.model,M({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},s),this.chromeAdapter,this.requestOptions)})}startChat(e){return new Km(this._apiSettings,this.model,this.chromeAdapter,M({tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,generationConfig:this.generationConfig,safetySettings:this.safetySettings},e),this.requestOptions)}countTokens(e){return A(this,null,function*(){const s=Dr(e);return Xm(this._apiSettings,this.model,s,this.chromeAdapter)})}}function Qm(t=Ks(),e){var d,h;t=Vt(t);const s=gt(t,is),n=(d=e==null?void 0:e.backend)!=null?d:new xi,i={useLimitedUseAppCheckTokens:(h=e==null?void 0:e.useLimitedUseAppCheckTokens)!=null?h:!1},o=wm(n),c=s.getImmediate({identifier:o});return c.options=i,c}function Zm(t,e,s){var c;const n=e;let i;if(n.mode?i=n.inCloudParams||{model:xm}:i=e,!i.model)throw new Q(J.NO_MODEL,"Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");const o=(c=t.chromeAdapterFactory)==null?void 0:c.call(t,n.mode,typeof window=="undefined"?void 0:window,n.onDeviceParams);return new Ym(t,i,s,o)}function eg(){Be(new De(is,Em,"PUBLIC").setMultipleInstances(!0)),ve(va,ei),ve(va,ei,"esm2020")}eg();const gl="@firebase/installations",Si="0.6.19";const yl=1e4,bl=`w:${Si}`,xl="FIS_v2",tg="https://firebaseinstallations.googleapis.com/v1",sg=3600*1e3,ng="installations",rg="Installations";const ig={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$t=new Jn(ng,rg,ig);function wl(t){return t instanceof Ye&&t.code.includes("request-failed")}function vl({projectId:t}){return`${tg}/projects/${t}/installations`}function Sl(t){return{token:t.token,requestStatus:2,expiresIn:ag(t.expiresIn),creationTime:Date.now()}}function _l(t,e){return A(this,null,function*(){const n=(yield e.json()).error;return $t.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})}function El({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function og(t,{refreshToken:e}){const s=El(t);return s.append("Authorization",cg(e)),s}function Nl(t){return A(this,null,function*(){const e=yield t();return e.status>=500&&e.status<600?t():e})}function ag(t){return Number(t.replace("s","000"))}function cg(t){return`${xl} ${t}`}function lg(n,i){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const o=vl(t),c=El(t),d=e.getImmediate({optional:!0});if(d){const v=yield d.getHeartbeatsHeader();v&&c.append("x-firebase-client",v)}const h={fid:s,authVersion:xl,appId:t.appId,sdkVersion:bl},f={method:"POST",headers:c,body:JSON.stringify(h)},g=yield Nl(()=>fetch(o,f));if(g.ok){const v=yield g.json();return{fid:v.fid||s,registrationStatus:2,refreshToken:v.refreshToken,authToken:Sl(v.authToken)}}else throw yield _l("Create Installation",g)})}function kl(t){return new Promise(e=>{setTimeout(e,t)})}function ug(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const dg=/^[cdef][\w-]{21}$/,si="";function hg(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=fg(t);return dg.test(s)?s:si}catch(t){return si}}function fg(t){return ug(t).substr(0,22)}function Zn(t){return`${t.appName}!${t.appId}`}const jl=new Map;function Al(t,e){const s=Zn(t);Tl(s,e),pg(s,e)}function Tl(t,e){const s=jl.get(t);if(s)for(const n of s)n(e)}function pg(t,e){const s=mg();s&&s.postMessage({key:t,fid:e}),gg()}let Rt=null;function mg(){return!Rt&&"BroadcastChannel"in self&&(Rt=new BroadcastChannel("[Firebase] FID Change"),Rt.onmessage=t=>{Tl(t.data.key,t.data.fid)}),Rt}function gg(){jl.size===0&&Rt&&(Rt.close(),Rt=null)}const yg="firebase-installations-database",bg=1,Ut="firebase-installations-store";let Or=null;function _i(){return Or||(Or=nl(yg,bg,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ut)}}})),Or}function Mn(t,e){return A(this,null,function*(){const s=Zn(t),i=(yield _i()).transaction(Ut,"readwrite"),o=i.objectStore(Ut),c=yield o.get(s);return yield o.put(e,s),yield i.done,(!c||c.fid!==e.fid)&&Al(t,e.fid),e})}function Il(t){return A(this,null,function*(){const e=Zn(t),n=(yield _i()).transaction(Ut,"readwrite");yield n.objectStore(Ut).delete(e),yield n.done})}function er(t,e){return A(this,null,function*(){const s=Zn(t),i=(yield _i()).transaction(Ut,"readwrite"),o=i.objectStore(Ut),c=yield o.get(s),d=e(c);return d===void 0?yield o.delete(s):yield o.put(d,s),yield i.done,d&&(!c||c.fid!==d.fid)&&Al(t,d.fid),d})}function Ei(t){return A(this,null,function*(){let e;const s=yield er(t.appConfig,n=>{const i=xg(n),o=wg(t,i);return e=o.registrationPromise,o.installationEntry});return s.fid===si?{installationEntry:yield e}:{installationEntry:s,registrationPromise:e}})}function xg(t){const e=t||{fid:hg(),registrationStatus:0};return Cl(e)}function wg(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject($t.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=vg(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Sg(t)}:{installationEntry:e}}function vg(t,e){return A(this,null,function*(){try{const s=yield lg(t,e);return Mn(t.appConfig,s)}catch(s){throw wl(s)&&s.customData.serverCode===409?yield Il(t.appConfig):yield Mn(t.appConfig,{fid:e.fid,registrationStatus:0}),s}})}function Sg(t){return A(this,null,function*(){let e=yield Ca(t.appConfig);for(;e.registrationStatus===1;)yield kl(100),e=yield Ca(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=yield Ei(t);return n||s}return e})}function Ca(t){return er(t,e=>{if(!e)throw $t.create("installation-not-found");return Cl(e)})}function Cl(t){return _g(t)?{fid:t.fid,registrationStatus:0}:t}function _g(t){return t.registrationStatus===1&&t.registrationTime+yl<Date.now()}function Eg(n,i){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},s){const o=Ng(t,s),c=og(t,s),d=e.getImmediate({optional:!0});if(d){const v=yield d.getHeartbeatsHeader();v&&c.append("x-firebase-client",v)}const h={installation:{sdkVersion:bl,appId:t.appId}},f={method:"POST",headers:c,body:JSON.stringify(h)},g=yield Nl(()=>fetch(o,f));if(g.ok){const v=yield g.json();return Sl(v)}else throw yield _l("Generate Auth Token",g)})}function Ng(t,{fid:e}){return`${vl(t)}/${e}/authTokens:generate`}function Ni(t,e=!1){return A(this,null,function*(){let s;const n=yield er(t.appConfig,o=>{if(!Rl(o))throw $t.create("not-registered");const c=o.authToken;if(!e&&Ag(c))return o;if(c.requestStatus===1)return s=kg(t,e),o;{if(!navigator.onLine)throw $t.create("app-offline");const d=Ig(o);return s=jg(t,d),d}});return s?yield s:n.authToken})}function kg(t,e){return A(this,null,function*(){let s=yield Ra(t.appConfig);for(;s.authToken.requestStatus===1;)yield kl(100),s=yield Ra(t.appConfig);const n=s.authToken;return n.requestStatus===0?Ni(t,e):n})}function Ra(t){return er(t,e=>{if(!Rl(e))throw $t.create("not-registered");const s=e.authToken;return Cg(s)?G(M({},e),{authToken:{requestStatus:0}}):e})}function jg(t,e){return A(this,null,function*(){try{const s=yield Eg(t,e),n=G(M({},e),{authToken:s});return yield Mn(t.appConfig,n),s}catch(s){if(wl(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))yield Il(t.appConfig);else{const n=G(M({},e),{authToken:{requestStatus:0}});yield Mn(t.appConfig,n)}throw s}})}function Rl(t){return t!==void 0&&t.registrationStatus===2}function Ag(t){return t.requestStatus===2&&!Tg(t)}function Tg(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+sg}function Ig(t){const e={requestStatus:1,requestTime:Date.now()};return G(M({},t),{authToken:e})}function Cg(t){return t.requestStatus===1&&t.requestTime+yl<Date.now()}function Rg(t){return A(this,null,function*(){const e=t,{installationEntry:s,registrationPromise:n}=yield Ei(e);return n?n.catch(console.error):Ni(e).catch(console.error),s.fid})}function Dg(t,e=!1){return A(this,null,function*(){const s=t;return yield Og(s),(yield Ni(s,e)).token})}function Og(t){return A(this,null,function*(){const{registrationPromise:e}=yield Ei(t);e&&(yield e)})}function Pg(t){if(!t||!t.options)throw Pr("App Configuration");if(!t.name)throw Pr("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw Pr(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Pr(t){return $t.create("missing-app-config-values",{valueName:t})}const Dl="installations",Lg="installations-internal",Mg=t=>{const e=t.getProvider("app").getImmediate(),s=Pg(e),n=gt(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},Fg=t=>{const e=t.getProvider("app").getImmediate(),s=gt(e,Dl).getImmediate();return{getId:()=>Rg(s),getToken:i=>Dg(s,i)}};function $g(){Be(new De(Dl,Mg,"PUBLIC")),Be(new De(Lg,Fg,"PRIVATE"))}$g();ve(gl,Si);ve(gl,Si,"esm2020");const Fn="analytics",Ug="firebase_id",Bg="origin",Vg=60*1e3,zg="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ki="https://www.googletagmanager.com/gtag/js";const Ee=new Xn("@firebase/analytics");const Hg={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ie=new Jn("analytics","Analytics",Hg);function qg(t){if(!t.startsWith(ki)){const e=Ie.create("invalid-gtag-resource",{gtagURL:t});return Ee.warn(e.message),""}return t}function Ol(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function Gg(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function Wg(t,e){const s=Gg("firebase-js-sdk-policy",{createScriptURL:qg}),n=document.createElement("script"),i=`${ki}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function Kg(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Jg(t,e,s,n,i,o){return A(this,null,function*(){const c=n[i];try{if(c)yield e[c];else{const h=(yield Ol(s)).find(f=>f.measurementId===i);h&&(yield e[h.appId])}}catch(d){Ee.error(d)}t("config",i,o)})}function Xg(t,e,s,n,i){return A(this,null,function*(){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const d=yield Ol(s);for(const h of c){const f=d.find(v=>v.measurementId===h),g=f&&e[f.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",n,i||{})}catch(o){Ee.error(o)}})}function Yg(t,e,s,n){function i(o,...c){return A(this,null,function*(){try{if(o==="event"){const[d,h]=c;yield Xg(t,e,s,d,h)}else if(o==="config"){const[d,h]=c;yield Jg(t,e,s,n,d,h)}else if(o==="consent"){const[d,h]=c;t("consent",d,h)}else if(o==="get"){const[d,h,f]=c;t("get",d,h,f)}else if(o==="set"){const[d]=c;t("set",d)}else t(o,...c)}catch(d){Ee.error(d)}})}return i}function Qg(t,e,s,n,i){let o=function(...c){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Yg(o,t,e,s),{gtagCore:o,wrappedGtag:window[i]}}function Zg(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(ki)&&s.src.includes(t))return s;return null}const ey=30,ty=1e3;class sy{constructor(e={},s=ty){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Pl=new sy;function ny(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function ry(t){return A(this,null,function*(){var c;const{appId:e,apiKey:s}=t,n={method:"GET",headers:ny(s)},i=zg.replace("{app-id}",e),o=yield fetch(i,n);if(o.status!==200&&o.status!==304){let d="";try{const h=yield o.json();(c=h.error)!=null&&c.message&&(d=h.error.message)}catch(h){}throw Ie.create("config-fetch-failed",{httpStatus:o.status,responseMessage:d})}return o.json()})}function iy(n){return A(this,arguments,function*(t,e=Pl,s){const{appId:i,apiKey:o,measurementId:c}=t.options;if(!i)throw Ie.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:i};throw Ie.create("no-api-key")}const d=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new cy;return setTimeout(()=>A(null,null,function*(){h.abort()}),Vg),Ll({appId:i,apiKey:o,measurementId:c},d,h,e)})}function Ll(o,c,d){return A(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:s},n,i=Pl){var g;const{appId:h,measurementId:f}=t;try{yield oy(n,e)}catch(v){if(f)return Ee.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v==null?void 0:v.message}]`),{appId:h,measurementId:f};throw v}try{const v=yield ry(t);return i.deleteThrottleMetadata(h),v}catch(v){const j=v;if(!ay(j)){if(i.deleteThrottleMetadata(h),f)return Ee.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${j==null?void 0:j.message}]`),{appId:h,measurementId:f};throw v}const _=Number((g=j==null?void 0:j.customData)==null?void 0:g.httpStatus)===503?ha(s,i.intervalMillis,ey):ha(s,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:s+1};return i.setThrottleMetadata(h,E),Ee.debug(`Calling attemptFetch again in ${_} millis`),Ll(t,E,n,i)}})}function oy(t,e){return new Promise((s,n)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(s,i);t.addEventListener(()=>{clearTimeout(o),n(Ie.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ay(t){if(!(t instanceof Ye)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class cy{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function ly(t,e,s,n,i){return A(this,null,function*(){if(i&&i.global){t("event",s,n);return}else{const o=yield e,c=G(M({},n),{send_to:o});t("event",s,c)}})}function uy(t,e,s,n){return A(this,null,function*(){if(n&&n.global){const i={};for(const o of Object.keys(s))i[`user_properties.${o}`]=s[o];return t("set",i),Promise.resolve()}else{const i=yield e;t("config",i,{update:!0,user_properties:s})}})}function dy(){return A(this,null,function*(){if(Zc())try{yield el()}catch(t){return Ee.warn(Ie.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ee.warn(Ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function hy(t,e,s,n,i,o,c){return A(this,null,function*(){var j;const d=iy(t);d.then(_=>{s[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Ee.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ee.error(_)),e.push(d);const h=dy().then(_=>{if(_)return n.getId()}),[f,g]=yield Promise.all([d,h]);Zg(o)||Wg(o,f.measurementId),i("js",new Date);const v=(j=c==null?void 0:c.config)!=null?j:{};return v[Bg]="firebase",v.update=!0,g!=null&&(v[Ug]=g),i("config",f.measurementId,v),f.measurementId})}class fy{constructor(e){this.app=e}_delete(){return delete es[this.app.options.appId],Promise.resolve()}}let es={},Da=[];const Oa={};let Lr="dataLayer",py="gtag",Pa,ji,La=!1;function my(){const t=[];if(ep()&&t.push("This is a browser extension environment."),tp()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),s=Ie.create("invalid-analytics-context",{errorInfo:e});Ee.warn(s.message)}}function gy(t,e,s){my();const n=t.options.appId;if(!n)throw Ie.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ee.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ie.create("no-api-key");if(es[n]!=null)throw Ie.create("already-exists",{id:n});if(!La){Kg(Lr);const{wrappedGtag:o,gtagCore:c}=Qg(es,Da,Oa,Lr,py);ji=o,Pa=c,La=!0}return es[n]=hy(t,Da,Oa,e,Pa,Lr,s),new fy(t)}function yy(t=Ks()){t=Vt(t);const e=gt(t,Fn);return e.isInitialized()?e.getImmediate():by(t)}function by(t,e={}){const s=gt(t,Fn);if(s.isInitialized()){const i=s.getImmediate();if(Bs(e,s.getOptions()))return i;throw Ie.create("already-initialized")}return s.initialize({options:e})}function xy(t,e,s){t=Vt(t),uy(ji,es[t.app.options.appId],e,s).catch(n=>Ee.error(n))}function wy(t,e,s,n){t=Vt(t),ly(ji,es[t.app.options.appId],e,s,n).catch(i=>Ee.error(i))}const Ma="@firebase/analytics",Fa="0.10.19";function vy(){Be(new De(Fn,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return gy(n,i,s)},"PUBLIC")),Be(new De("analytics-internal",t,"PRIVATE")),ve(Ma,Fa),ve(Ma,Fa,"esm2020");function t(e){try{const s=e.getProvider(Fn).getImmediate();return{logEvent:(n,i,o)=>wy(s,n,i,o),setUserProperties:(n,i)=>xy(s,n,i)}}catch(s){throw Ie.create("interop-component-reg-failed",{reason:s})}}}vy();var Sy="firebase",_y="12.6.0";ve(Sy,_y,"app");var $a=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var Ai;(function(){var t;function e(w,m){function x(){}x.prototype=m.prototype,w.F=m.prototype,w.prototype=new x,w.prototype.constructor=w,w.D=function(b,S,N){for(var y=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)y[ne-2]=arguments[ne];return m.prototype[S].apply(b,y)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,s),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,x){x||(x=0);const b=Array(16);if(typeof m=="string")for(var S=0;S<16;++S)b[S]=m.charCodeAt(x++)|m.charCodeAt(x++)<<8|m.charCodeAt(x++)<<16|m.charCodeAt(x++)<<24;else for(S=0;S<16;++S)b[S]=m[x++]|m[x++]<<8|m[x++]<<16|m[x++]<<24;m=w.g[0],x=w.g[1],S=w.g[2];let N=w.g[3],y;y=m+(N^x&(S^N))+b[0]+3614090360&4294967295,m=x+(y<<7&4294967295|y>>>25),y=N+(S^m&(x^S))+b[1]+3905402710&4294967295,N=m+(y<<12&4294967295|y>>>20),y=S+(x^N&(m^x))+b[2]+606105819&4294967295,S=N+(y<<17&4294967295|y>>>15),y=x+(m^S&(N^m))+b[3]+3250441966&4294967295,x=S+(y<<22&4294967295|y>>>10),y=m+(N^x&(S^N))+b[4]+4118548399&4294967295,m=x+(y<<7&4294967295|y>>>25),y=N+(S^m&(x^S))+b[5]+1200080426&4294967295,N=m+(y<<12&4294967295|y>>>20),y=S+(x^N&(m^x))+b[6]+2821735955&4294967295,S=N+(y<<17&4294967295|y>>>15),y=x+(m^S&(N^m))+b[7]+4249261313&4294967295,x=S+(y<<22&4294967295|y>>>10),y=m+(N^x&(S^N))+b[8]+1770035416&4294967295,m=x+(y<<7&4294967295|y>>>25),y=N+(S^m&(x^S))+b[9]+2336552879&4294967295,N=m+(y<<12&4294967295|y>>>20),y=S+(x^N&(m^x))+b[10]+4294925233&4294967295,S=N+(y<<17&4294967295|y>>>15),y=x+(m^S&(N^m))+b[11]+2304563134&4294967295,x=S+(y<<22&4294967295|y>>>10),y=m+(N^x&(S^N))+b[12]+1804603682&4294967295,m=x+(y<<7&4294967295|y>>>25),y=N+(S^m&(x^S))+b[13]+4254626195&4294967295,N=m+(y<<12&4294967295|y>>>20),y=S+(x^N&(m^x))+b[14]+2792965006&4294967295,S=N+(y<<17&4294967295|y>>>15),y=x+(m^S&(N^m))+b[15]+1236535329&4294967295,x=S+(y<<22&4294967295|y>>>10),y=m+(S^N&(x^S))+b[1]+4129170786&4294967295,m=x+(y<<5&4294967295|y>>>27),y=N+(x^S&(m^x))+b[6]+3225465664&4294967295,N=m+(y<<9&4294967295|y>>>23),y=S+(m^x&(N^m))+b[11]+643717713&4294967295,S=N+(y<<14&4294967295|y>>>18),y=x+(N^m&(S^N))+b[0]+3921069994&4294967295,x=S+(y<<20&4294967295|y>>>12),y=m+(S^N&(x^S))+b[5]+3593408605&4294967295,m=x+(y<<5&4294967295|y>>>27),y=N+(x^S&(m^x))+b[10]+38016083&4294967295,N=m+(y<<9&4294967295|y>>>23),y=S+(m^x&(N^m))+b[15]+3634488961&4294967295,S=N+(y<<14&4294967295|y>>>18),y=x+(N^m&(S^N))+b[4]+3889429448&4294967295,x=S+(y<<20&4294967295|y>>>12),y=m+(S^N&(x^S))+b[9]+568446438&4294967295,m=x+(y<<5&4294967295|y>>>27),y=N+(x^S&(m^x))+b[14]+3275163606&4294967295,N=m+(y<<9&4294967295|y>>>23),y=S+(m^x&(N^m))+b[3]+4107603335&4294967295,S=N+(y<<14&4294967295|y>>>18),y=x+(N^m&(S^N))+b[8]+1163531501&4294967295,x=S+(y<<20&4294967295|y>>>12),y=m+(S^N&(x^S))+b[13]+2850285829&4294967295,m=x+(y<<5&4294967295|y>>>27),y=N+(x^S&(m^x))+b[2]+4243563512&4294967295,N=m+(y<<9&4294967295|y>>>23),y=S+(m^x&(N^m))+b[7]+1735328473&4294967295,S=N+(y<<14&4294967295|y>>>18),y=x+(N^m&(S^N))+b[12]+2368359562&4294967295,x=S+(y<<20&4294967295|y>>>12),y=m+(x^S^N)+b[5]+4294588738&4294967295,m=x+(y<<4&4294967295|y>>>28),y=N+(m^x^S)+b[8]+2272392833&4294967295,N=m+(y<<11&4294967295|y>>>21),y=S+(N^m^x)+b[11]+1839030562&4294967295,S=N+(y<<16&4294967295|y>>>16),y=x+(S^N^m)+b[14]+4259657740&4294967295,x=S+(y<<23&4294967295|y>>>9),y=m+(x^S^N)+b[1]+2763975236&4294967295,m=x+(y<<4&4294967295|y>>>28),y=N+(m^x^S)+b[4]+1272893353&4294967295,N=m+(y<<11&4294967295|y>>>21),y=S+(N^m^x)+b[7]+4139469664&4294967295,S=N+(y<<16&4294967295|y>>>16),y=x+(S^N^m)+b[10]+3200236656&4294967295,x=S+(y<<23&4294967295|y>>>9),y=m+(x^S^N)+b[13]+681279174&4294967295,m=x+(y<<4&4294967295|y>>>28),y=N+(m^x^S)+b[0]+3936430074&4294967295,N=m+(y<<11&4294967295|y>>>21),y=S+(N^m^x)+b[3]+3572445317&4294967295,S=N+(y<<16&4294967295|y>>>16),y=x+(S^N^m)+b[6]+76029189&4294967295,x=S+(y<<23&4294967295|y>>>9),y=m+(x^S^N)+b[9]+3654602809&4294967295,m=x+(y<<4&4294967295|y>>>28),y=N+(m^x^S)+b[12]+3873151461&4294967295,N=m+(y<<11&4294967295|y>>>21),y=S+(N^m^x)+b[15]+530742520&4294967295,S=N+(y<<16&4294967295|y>>>16),y=x+(S^N^m)+b[2]+3299628645&4294967295,x=S+(y<<23&4294967295|y>>>9),y=m+(S^(x|~N))+b[0]+4096336452&4294967295,m=x+(y<<6&4294967295|y>>>26),y=N+(x^(m|~S))+b[7]+1126891415&4294967295,N=m+(y<<10&4294967295|y>>>22),y=S+(m^(N|~x))+b[14]+2878612391&4294967295,S=N+(y<<15&4294967295|y>>>17),y=x+(N^(S|~m))+b[5]+4237533241&4294967295,x=S+(y<<21&4294967295|y>>>11),y=m+(S^(x|~N))+b[12]+1700485571&4294967295,m=x+(y<<6&4294967295|y>>>26),y=N+(x^(m|~S))+b[3]+2399980690&4294967295,N=m+(y<<10&4294967295|y>>>22),y=S+(m^(N|~x))+b[10]+4293915773&4294967295,S=N+(y<<15&4294967295|y>>>17),y=x+(N^(S|~m))+b[1]+2240044497&4294967295,x=S+(y<<21&4294967295|y>>>11),y=m+(S^(x|~N))+b[8]+1873313359&4294967295,m=x+(y<<6&4294967295|y>>>26),y=N+(x^(m|~S))+b[15]+4264355552&4294967295,N=m+(y<<10&4294967295|y>>>22),y=S+(m^(N|~x))+b[6]+2734768916&4294967295,S=N+(y<<15&4294967295|y>>>17),y=x+(N^(S|~m))+b[13]+1309151649&4294967295,x=S+(y<<21&4294967295|y>>>11),y=m+(S^(x|~N))+b[4]+4149444226&4294967295,m=x+(y<<6&4294967295|y>>>26),y=N+(x^(m|~S))+b[11]+3174756917&4294967295,N=m+(y<<10&4294967295|y>>>22),y=S+(m^(N|~x))+b[2]+718787259&4294967295,S=N+(y<<15&4294967295|y>>>17),y=x+(N^(S|~m))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(S+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+S&4294967295,w.g[3]=w.g[3]+N&4294967295}n.prototype.v=function(w,m){m===void 0&&(m=w.length);const x=m-this.blockSize,b=this.C;let S=this.h,N=0;for(;N<m;){if(S==0)for(;N<=x;)i(this,w,N),N+=this.blockSize;if(typeof w=="string"){for(;N<m;)if(b[S++]=w.charCodeAt(N++),S==this.blockSize){i(this,b),S=0;break}}else for(;N<m;)if(b[S++]=w[N++],S==this.blockSize){i(this,b),S=0;break}}this.h=S,this.o+=m},n.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;m=this.o*8;for(var x=w.length-8;x<w.length;++x)w[x]=m&255,m/=256;for(this.v(w),w=Array(16),m=0,x=0;x<4;++x)for(let b=0;b<32;b+=8)w[m++]=this.g[x]>>>b&255;return w};function o(w,m){var x=d;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=m(w)}function c(w,m){this.h=m;const x=[];let b=!0;for(let S=w.length-1;S>=0;S--){const N=w[S]|0;b&&N==m||(x[S]=N,b=!1)}this.g=x}var d={};function h(w){return-128<=w&&w<128?o(w,function(m){return new c([m|0],m<0?-1:0)}):new c([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return v;if(w<0)return T(f(-w));const m=[];let x=1;for(let b=0;w>=x;b++)m[b]=w/x|0,x*=4294967296;return new c(m,0)}function g(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return T(g(w.substring(1),m));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=f(Math.pow(m,8));let b=v;for(let N=0;N<w.length;N+=8){var S=Math.min(8,w.length-N);const y=parseInt(w.substring(N,N+S),m);S<8?(S=f(Math.pow(m,S)),b=b.j(S).add(f(y))):(b=b.j(x),b=b.add(f(y)))}return b}var v=h(0),j=h(1),_=h(16777216);t=c.prototype,t.m=function(){if(R(this))return-T(this).m();let w=0,m=1;for(let x=0;x<this.g.length;x++){const b=this.i(x);w+=(b>=0?b:4294967296+b)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(E(this))return"0";if(R(this))return"-"+T(this).toString(w);const m=f(Math.pow(w,6));var x=this;let b="";for(;;){const S=D(x,m).g;x=L(x,S.j(m));let N=((x.g.length>0?x.g[0]:x.h)>>>0).toString(w);if(x=S,E(x))return N+b;for(;N.length<6;)N="0"+N;b=N+b}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function E(w){if(w.h!=0)return!1;for(let m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=L(this,w),R(w)?-1:E(w)?0:1};function T(w){const m=w.g.length,x=[];for(let b=0;b<m;b++)x[b]=~w.g[b];return new c(x,~w.h).add(j)}t.abs=function(){return R(this)?T(this):this},t.add=function(w){const m=Math.max(this.g.length,w.g.length),x=[];let b=0;for(let S=0;S<=m;S++){let N=b+(this.i(S)&65535)+(w.i(S)&65535),y=(N>>>16)+(this.i(S)>>>16)+(w.i(S)>>>16);b=y>>>16,N&=65535,y&=65535,x[S]=y<<16|N}return new c(x,x[x.length-1]&-2147483648?-1:0)};function L(w,m){return w.add(T(m))}t.j=function(w){if(E(this)||E(w))return v;if(R(this))return R(w)?T(this).j(T(w)):T(T(this).j(w));if(R(w))return T(this.j(T(w)));if(this.l(_)<0&&w.l(_)<0)return f(this.m()*w.m());const m=this.g.length+w.g.length,x=[];for(var b=0;b<2*m;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(let S=0;S<w.g.length;S++){const N=this.i(b)>>>16,y=this.i(b)&65535,ne=w.i(S)>>>16,pe=w.i(S)&65535;x[2*b+2*S]+=y*pe,H(x,2*b+2*S),x[2*b+2*S+1]+=N*pe,H(x,2*b+2*S+1),x[2*b+2*S+1]+=y*ne,H(x,2*b+2*S+1),x[2*b+2*S+2]+=N*ne,H(x,2*b+2*S+2)}for(w=0;w<m;w++)x[w]=x[2*w+1]<<16|x[2*w];for(w=m;w<2*m;w++)x[w]=0;return new c(x,0)};function H(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function $(w,m){this.g=w,this.h=m}function D(w,m){if(E(m))throw Error("division by zero");if(E(w))return new $(v,v);if(R(w))return m=D(T(w),m),new $(T(m.g),T(m.h));if(R(m))return m=D(w,T(m)),new $(T(m.g),m.h);if(w.g.length>30){if(R(w)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var x=j,b=m;b.l(w)<=0;)x=V(x),b=V(b);var S=B(x,1),N=B(b,1);for(b=B(b,2),x=B(x,2);!E(b);){var y=N.add(b);y.l(w)<=0&&(S=S.add(x),N=y),b=B(b,1),x=B(x,1)}return m=L(w,S.j(m)),new $(S,m)}for(S=v;w.l(m)>=0;){for(x=Math.max(1,Math.floor(w.m()/m.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),N=f(x),y=N.j(m);R(y)||y.l(w)>0;)x-=b,N=f(x),y=N.j(m);E(N)&&(N=j),S=S.add(N),w=L(w,y)}return new $(S,w)}t.B=function(w){return D(this,w).h},t.and=function(w){const m=Math.max(this.g.length,w.g.length),x=[];for(let b=0;b<m;b++)x[b]=this.i(b)&w.i(b);return new c(x,this.h&w.h)},t.or=function(w){const m=Math.max(this.g.length,w.g.length),x=[];for(let b=0;b<m;b++)x[b]=this.i(b)|w.i(b);return new c(x,this.h|w.h)},t.xor=function(w){const m=Math.max(this.g.length,w.g.length),x=[];for(let b=0;b<m;b++)x[b]=this.i(b)^w.i(b);return new c(x,this.h^w.h)};function V(w){const m=w.g.length+1,x=[];for(let b=0;b<m;b++)x[b]=w.i(b)<<1|w.i(b-1)>>>31;return new c(x,w.h)}function B(w,m){const x=m>>5;m%=32;const b=w.g.length-x,S=[];for(let N=0;N<b;N++)S[N]=m>0?w.i(N+x)>>>m|w.i(N+x+1)<<32-m:w.i(N+x);return new c(S,w.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,Ai=c}).apply(typeof $a!="undefined"?$a:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var bn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};(function(){var t,e=Object.defineProperty;function s(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof bn=="object"&&bn];for(var l=0;l<r.length;++l){var u=r[l];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var n=s(this);function i(r,l){if(l)e:{var u=n;r=r.split(".");for(var p=0;p<r.length-1;p++){var k=r[p];if(!(k in u))break e;u=u[k]}r=r[r.length-1],p=u[r],l=l(p),l!=p&&l!=null&&e(u,r,{configurable:!0,writable:!0,value:l})}}i("Symbol.dispose",function(r){return r||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(r){return r||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(r){return r||function(l){var u=[],p;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&u.push([p,l[p]]);return u}});var o=o||{},c=this||self;function d(r){var l=typeof r;return l=="object"&&r!=null||l=="function"}function h(r,l,u){return r.call.apply(r.bind,arguments)}function f(r,l,u){return f=h,f.apply(null,arguments)}function g(r,l){var u=Array.prototype.slice.call(arguments,1);return function(){var p=u.slice();return p.push.apply(p,arguments),r.apply(this,p)}}function v(r,l){function u(){}u.prototype=l.prototype,r.Z=l.prototype,r.prototype=new u,r.prototype.constructor=r,r.Ob=function(p,k,C){for(var F=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)F[Y-2]=arguments[Y];return l.prototype[k].apply(p,F)}}var j=typeof AsyncContext!="undefined"&&typeof AsyncContext.Snapshot=="function"?r=>r&&AsyncContext.Snapshot.wrap(r):r=>r;function _(r){const l=r.length;if(l>0){const u=Array(l);for(let p=0;p<l;p++)u[p]=r[p];return u}return[]}function E(r,l){for(let p=1;p<arguments.length;p++){const k=arguments[p];var u=typeof k;if(u=u!="object"?u:k?Array.isArray(k)?"array":u:"null",u=="array"||u=="object"&&typeof k.length=="number"){u=r.length||0;const C=k.length||0;r.length=u+C;for(let F=0;F<C;F++)r[u+F]=k[F]}else r.push(k)}}class R{constructor(l,u){this.i=l,this.j=u,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function T(r){c.setTimeout(()=>{throw r},0)}function L(){var r=w;let l=null;return r.g&&(l=r.g,r.g=r.g.next,r.g||(r.h=null),l.next=null),l}class H{constructor(){this.h=this.g=null}add(l,u){const p=$.get();p.set(l,u),this.h?this.h.next=p:this.g=p,this.h=p}}var $=new R(()=>new D,r=>r.reset());class D{constructor(){this.next=this.g=this.h=null}set(l,u){this.h=l,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let V,B=!1,w=new H,m=()=>{const r=Promise.resolve(void 0);V=()=>{r.then(x)}};function x(){for(var r;r=L();){try{r.h.call(r.g)}catch(u){T(u)}var l=$;l.j(r),l.h<100&&(l.h++,r.next=l.g,l.g=r)}B=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(r,l){this.type=r,this.g=this.target=l,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var r=!1,l=Object.defineProperty({},"passive",{get:function(){r=!0}});try{const u=()=>{};c.addEventListener("test",u,l),c.removeEventListener("test",u,l)}catch(u){}return r})();function y(r){return/^[\s\xa0]*$/.test(r)}function ne(r,l){S.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r&&this.init(r,l)}v(ne,S),ne.prototype.init=function(r,l){const u=this.type=r.type,p=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;this.target=r.target||r.srcElement,this.g=l,l=r.relatedTarget,l||(u=="mouseover"?l=r.fromElement:u=="mouseout"&&(l=r.toElement)),this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=r.pointerType,this.state=r.state,this.i=r,r.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),ie=0;function Te(r,l,u,p,k){this.listener=r,this.proxy=null,this.src=l,this.type=u,this.capture=!!p,this.ha=k,this.key=++ie,this.da=this.fa=!1}function ye(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Oe(r,l,u){for(const p in r)l.call(u,r[p],p,r)}function K(r,l){for(const u in r)l.call(void 0,r[u],u,r)}function z(r){const l={};for(const u in r)l[u]=r[u];return l}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(r,l){let u,p;for(let k=1;k<arguments.length;k++){p=arguments[k];for(u in p)r[u]=p[u];for(let C=0;C<Z.length;C++)u=Z[C],Object.prototype.hasOwnProperty.call(p,u)&&(r[u]=p[u])}}function ue(r){this.src=r,this.g={},this.h=0}ue.prototype.add=function(r,l,u,p,k){const C=r.toString();r=this.g[C],r||(r=this.g[C]=[],this.h++);const F=zt(r,l,p,k);return F>-1?(l=r[F],u||(l.fa=!1)):(l=new Te(l,this.src,C,!!p,k),l.fa=u,r.push(l)),l};function ze(r,l){const u=l.type;if(u in r.g){var p=r.g[u],k=Array.prototype.indexOf.call(p,l,void 0),C;(C=k>=0)&&Array.prototype.splice.call(p,k,1),C&&(ye(l),r.g[u].length==0&&(delete r.g[u],r.h--))}}function zt(r,l,u,p){for(let k=0;k<r.length;++k){const C=r[k];if(!C.da&&C.listener==l&&C.capture==!!u&&C.ha==p)return k}return-1}var ds="closure_lm_"+(Math.random()*1e6|0),Ht={};function hs(r,l,u,p,k){if(Array.isArray(l)){for(let C=0;C<l.length;C++)hs(r,l[C],u,p,k);return null}return u=q(u),r&&r[pe]?r.J(l,u,d(p)?!!p.capture:!1,k):Zs(r,l,u,!1,p,k)}function Zs(r,l,u,p,k,C){if(!l)throw Error("Invalid event type");const F=d(k)?!!k.capture:!!k;let Y=Gt(r);if(Y||(r[ds]=Y=new ue(r)),u=Y.add(l,u,p,F,C),u.proxy)return u;if(p=en(),u.proxy=p,p.src=r,p.listener=u,r.addEventListener)N||(k=F),k===void 0&&(k=!1),r.addEventListener(l.toString(),p,k);else if(r.attachEvent)r.attachEvent(ps(l.toString()),p);else if(r.addListener&&r.removeListener)r.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return u}function en(){function r(u){return l.call(r.src,r.listener,u)}const l=tn;return r}function fs(r,l,u,p,k){if(Array.isArray(l))for(var C=0;C<l.length;C++)fs(r,l[C],u,p,k);else p=d(p)?!!p.capture:!!p,u=q(u),r&&r[pe]?(r=r.i,C=String(l).toString(),C in r.g&&(l=r.g[C],u=zt(l,u,p,k),u>-1&&(ye(l[u]),Array.prototype.splice.call(l,u,1),l.length==0&&(delete r.g[C],r.h--)))):r&&(r=Gt(r))&&(l=r.g[l.toString()],r=-1,l&&(r=zt(l,u,p,k)),(u=r>-1?l[r]:null)&&qt(u))}function qt(r){if(typeof r!="number"&&r&&!r.da){var l=r.src;if(l&&l[pe])ze(l.i,r);else{var u=r.type,p=r.proxy;l.removeEventListener?l.removeEventListener(u,p,r.capture):l.detachEvent?l.detachEvent(ps(u),p):l.addListener&&l.removeListener&&l.removeListener(p),(u=Gt(l))?(ze(u,r),u.h==0&&(u.src=null,l[ds]=null)):ye(r)}}}function ps(r){return r in Ht?Ht[r]:Ht[r]="on"+r}function tn(r,l){if(r.da)r=!0;else{l=new ne(l,this);const u=r.listener,p=r.ha||r.src;r.fa&&qt(r),r=u.call(p,l)}return r}function Gt(r){return r=r[ds],r instanceof ue?r:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function q(r){return typeof r=="function"?r:(r[O]||(r[O]=function(l){return r.handleEvent(l)}),r[O])}function X(){b.call(this),this.i=new ue(this),this.M=this,this.G=null}v(X,b),X.prototype[pe]=!0,X.prototype.removeEventListener=function(r,l,u,p){fs(this,r,l,u,p)};function de(r,l){var u,p=r.G;if(p)for(u=[];p;p=p.G)u.push(p);if(r=r.M,p=l.type||l,typeof l=="string")l=new S(l,r);else if(l instanceof S)l.target=l.target||r;else{var k=l;l=new S(p,r),oe(l,k)}k=!0;let C,F;if(u)for(F=u.length-1;F>=0;F--)C=l.g=u[F],k=Pe(C,p,!0,l)&&k;if(C=l.g=r,k=Pe(C,p,!0,l)&&k,k=Pe(C,p,!1,l)&&k,u)for(F=0;F<u.length;F++)C=l.g=u[F],k=Pe(C,p,!1,l)&&k}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var r=this.i;for(const l in r.g){const u=r.g[l];for(let p=0;p<u.length;p++)ye(u[p]);delete r.g[l],r.h--}}this.G=null},X.prototype.J=function(r,l,u,p){return this.i.add(String(r),l,!1,u,p)},X.prototype.K=function(r,l,u,p){return this.i.add(String(r),l,!0,u,p)};function Pe(r,l,u,p){if(l=r.i.g[String(l)],!l)return!0;l=l.concat();let k=!0;for(let C=0;C<l.length;++C){const F=l[C];if(F&&!F.da&&F.capture==u){const Y=F.listener,ge=F.ha||F.src;F.fa&&ze(r.i,F),k=Y.call(ge,p)!==!1&&k}}return k&&!p.defaultPrevented}function Xl(r,l){if(typeof r!="function")if(r&&typeof r.handleEvent=="function")r=f(r.handleEvent,r);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:c.setTimeout(r,l||0)}function Di(r){r.g=Xl(()=>{r.g=null,r.i&&(r.i=!1,Di(r))},r.l);const l=r.h;r.h=null,r.m.apply(null,l)}class Yl extends b{constructor(l,u){super(),this.m=l,this.l=u,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Di(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(r){b.call(this),this.h=r,this.g={}}v(ms,b);var Oi=[];function Pi(r){Oe(r.g,function(l,u){this.g.hasOwnProperty(u)&&qt(l)},r),r.g={}}ms.prototype.N=function(){ms.Z.N.call(this),Pi(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=c.JSON.stringify,Ql=c.JSON.parse,Zl=class{stringify(r){return c.JSON.stringify(r,void 0)}parse(r){return c.JSON.parse(r,void 0)}};function Li(){}function eu(){}var gs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sr(){S.call(this,"d")}v(sr,S);function nr(){S.call(this,"c")}v(nr,S);var Wt={},Mi=null;function rr(){return Mi=Mi||new X}Wt.Ia="serverreachability";function Fi(r){S.call(this,Wt.Ia,r)}v(Fi,S);function ys(r){const l=rr();de(l,new Fi(l))}Wt.STAT_EVENT="statevent";function $i(r,l){S.call(this,Wt.STAT_EVENT,r),this.stat=l}v($i,S);function Se(r){const l=rr();de(l,new $i(l,r))}Wt.Ja="timingevent";function Ui(r,l){S.call(this,Wt.Ja,r),this.size=l}v(Ui,S);function bs(r,l){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){r()},l)}function xs(){this.g=!0}xs.prototype.ua=function(){this.g=!1};function tu(r,l,u,p,k,C){r.info(function(){if(r.g)if(C){var F="",Y=C.split("&");for(let ce=0;ce<Y.length;ce++){var ge=Y[ce].split("=");if(ge.length>1){const be=ge[0];ge=ge[1];const qe=be.split("_");F=qe.length>=2&&qe[1]=="type"?F+(be+"="+ge+"&"):F+(be+"=redacted&")}}}else F=null;else F=C;return"XMLHTTP REQ ("+p+") [attempt "+k+"]: "+l+`
`+u+`
`+F})}function su(r,l,u,p,k,C,F){r.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+k+"]: "+l+`
`+u+`
`+C+" "+F})}function Kt(r,l,u,p){r.info(function(){return"XMLHTTP TEXT ("+l+"): "+ru(r,u)+(p?" "+p:"")})}function nu(r,l){r.info(function(){return"TIMEOUT: "+l})}xs.prototype.info=function(){};function ru(r,l){if(!r.g)return l;if(!l)return null;try{const C=JSON.parse(l);if(C){for(r=0;r<C.length;r++)if(Array.isArray(C[r])){var u=C[r];if(!(u.length<2)){var p=u[1];if(Array.isArray(p)&&!(p.length<1)){var k=p[0];if(k!="noop"&&k!="stop"&&k!="close")for(let F=1;F<p.length;F++)p[F]=""}}}}return tr(C)}catch(C){return l}}var ir={NO_ERROR:0,TIMEOUT:8},iu={},Bi;function or(){}v(or,Li),or.prototype.g=function(){return new XMLHttpRequest},Bi=new or;function ws(r){return encodeURIComponent(String(r))}function ou(r){var l=1;r=r.split(":");const u=[];for(;l>0&&r.length;)u.push(r.shift()),l--;return r.length&&u.push(r.join(":")),u}function rt(r,l,u,p){this.j=r,this.i=l,this.l=u,this.S=p||1,this.V=new ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}var zi={},ar={};function cr(r,l,u){r.M=1,r.A=nn(He(l)),r.u=u,r.R=!0,Hi(r,null)}function Hi(r,l){r.F=Date.now(),sn(r),r.B=He(r.A);var u=r.B,p=r.S;Array.isArray(p)||(p=[String(p)]),no(u.i,"t",p),r.C=0,u=r.j.L,r.h=new Vi,r.g=So(r.j,u?l:null,!r.u),r.P>0&&(r.O=new Yl(f(r.Y,r,r.g),r.P)),l=r.V,u=r.g,p=r.ba;var k="readystatechange";Array.isArray(k)||(k&&(Oi[0]=k.toString()),k=Oi);for(let C=0;C<k.length;C++){const F=hs(u,k[C],p||l.handleEvent,!1,l.h||l);if(!F)break;l.g[F.key]=F}l=r.J?z(r.J):{},r.u?(r.v||(r.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.B,r.v,r.u,l)):(r.v="GET",r.g.ea(r.B,r.v,null,l)),ys(),tu(r.i,r.v,r.B,r.l,r.S,r.u)}rt.prototype.ba=function(r){r=r.target;const l=this.O;l&&at(r)==3?l.j():this.Y(r)},rt.prototype.Y=function(r){try{if(r==this.g)e:{const Y=at(this.g),ge=this.g.ya(),ce=this.g.ca();if(!(Y<3)&&(Y!=3||this.g&&(this.h.h||this.g.la()||uo(this.g)))){this.K||Y!=4||ge==7||(ge==8||ce<=0?ys(3):ys(2)),lr(this);var l=this.g.ca();this.X=l;var u=au(this);if(this.o=l==200,su(this.i,this.v,this.B,this.l,this.S,Y,l),this.o){if(this.U&&!this.L){t:{if(this.g){var p,k=this.g;if((p=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break t}}C=null}if(r=C)Kt(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ur(this,r);else{this.o=!1,this.m=3,Se(12),yt(this),vs(this);break e}}if(this.R){r=!0;let be;for(;!this.K&&this.C<u.length;)if(be=cu(this,u),be==ar){Y==4&&(this.m=4,Se(14),r=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(be==zi){this.m=4,Se(15),Kt(this.i,this.l,u,"[Invalid Chunk]"),r=!1;break}else Kt(this.i,this.l,be,null),ur(this,be);if(qi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Y!=4||u.length!=0||this.h.h||(this.m=1,Se(16),r=!1),this.o=this.o&&r,!r)Kt(this.i,this.l,u,"[Invalid Chunked Response]"),yt(this),vs(this);else if(u.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+u.length),br(F),F.P=!0,Se(11))}}else Kt(this.i,this.l,u,null),ur(this,u);Y==4&&yt(this),this.o&&!this.K&&(Y==4?bo(this.j,this):(this.o=!1,sn(this)))}else Su(this.g),l==400&&u.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),yt(this),vs(this)}}}catch(Y){}finally{}};function au(r){if(!qi(r))return r.g.la();const l=uo(r.g);if(l==="")return"";let u="";const p=l.length,k=at(r.g)==4;if(!r.h.i){if(typeof TextDecoder=="undefined")return yt(r),vs(r),"";r.h.i=new c.TextDecoder}for(let C=0;C<p;C++)r.h.h=!0,u+=r.h.i.decode(l[C],{stream:!(k&&C==p-1)});return l.length=0,r.h.g+=u,r.C=0,r.h.g}function qi(r){return r.g?r.v=="GET"&&r.M!=2&&r.j.Aa:!1}function cu(r,l){var u=r.C,p=l.indexOf(`
`,u);return p==-1?ar:(u=Number(l.substring(u,p)),isNaN(u)?zi:(p+=1,p+u>l.length?ar:(l=l.slice(p,p+u),r.C=p+u,l)))}rt.prototype.cancel=function(){this.K=!0,yt(this)};function sn(r){r.T=Date.now()+r.H,Gi(r,r.H)}function Gi(r,l){if(r.D!=null)throw Error("WatchDog timer not null");r.D=bs(f(r.aa,r),l)}function lr(r){r.D&&(c.clearTimeout(r.D),r.D=null)}rt.prototype.aa=function(){this.D=null;const r=Date.now();r-this.T>=0?(nu(this.i,this.B),this.M!=2&&(ys(),Se(17)),yt(this),this.m=2,vs(this)):Gi(this,this.T-r)};function vs(r){r.j.I==0||r.K||bo(r.j,r)}function yt(r){lr(r);var l=r.O;l&&typeof l.dispose=="function"&&l.dispose(),r.O=null,Pi(r.V),r.g&&(l=r.g,r.g=null,l.abort(),l.dispose())}function ur(r,l){try{var u=r.j;if(u.I!=0&&(u.g==r||dr(u.h,r))){if(!r.L&&dr(u.h,r)&&u.I==3){try{var p=u.Ba.g.parse(l)}catch(ce){p=null}if(Array.isArray(p)&&p.length==3){var k=p;if(k[0]==0){e:if(!u.v){if(u.g)if(u.g.F+3e3<r.F)ln(u),an(u);else break e;yr(u),Se(18)}}else u.xa=k[1],0<u.xa-u.K&&k[2]<37500&&u.F&&u.A==0&&!u.C&&(u.C=bs(f(u.Va,u),6e3));Ji(u.h)<=1&&u.ta&&(u.ta=void 0)}else xt(u,11)}else if((r.L||u.g==r)&&ln(u),!y(l))for(k=u.Ba.g.parse(l),l=0;l<k.length;l++){let ce=k[l];const be=ce[0];if(!(be<=u.K))if(u.K=be,ce=ce[1],u.I==2)if(ce[0]=="c"){u.M=ce[1],u.ba=ce[2];const qe=ce[3];qe!=null&&(u.ka=qe,u.j.info("VER="+u.ka));const wt=ce[4];wt!=null&&(u.za=wt,u.j.info("SVER="+u.za));const ct=ce[5];ct!=null&&typeof ct=="number"&&ct>0&&(p=1.5*ct,u.O=p,u.j.info("backChannelRequestTimeoutMs_="+p)),p=u;const lt=r.g;if(lt){const un=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(un){var C=p.h;C.g||un.indexOf("spdy")==-1&&un.indexOf("quic")==-1&&un.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(hr(C,C.h),C.h=null))}if(p.G){const xr=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;xr&&(p.wa=xr,le(p.J,p.G,xr))}}u.I=3,u.l&&u.l.ra(),u.aa&&(u.T=Date.now()-r.F,u.j.info("Handshake RTT: "+u.T+"ms")),p=u;var F=r;if(p.na=vo(p,p.L?p.ba:null,p.W),F.L){Xi(p.h,F);var Y=F,ge=p.O;ge&&(Y.H=ge),Y.D&&(lr(Y),sn(Y)),p.g=F}else go(p);u.i.length>0&&cn(u)}else ce[0]!="stop"&&ce[0]!="close"||xt(u,7);else u.I==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?xt(u,7):gr(u):ce[0]!="noop"&&u.l&&u.l.qa(ce),u.A=0)}}ys(4)}catch(ce){}}var lu=class{constructor(r,l){this.g=r,this.map=l}};function Wi(r){this.l=r||10,c.PerformanceNavigationTiming?(r=c.performance.getEntriesByType("navigation"),r=r.length>0&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ki(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Ji(r){return r.h?1:r.g?r.g.size:0}function dr(r,l){return r.h?r.h==l:r.g?r.g.has(l):!1}function hr(r,l){r.g?r.g.add(l):r.h=l}function Xi(r,l){r.h&&r.h==l?r.h=null:r.g&&r.g.has(l)&&r.g.delete(l)}Wi.prototype.cancel=function(){if(this.i=Yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const r of this.g.values())r.cancel();this.g.clear()}};function Yi(r){if(r.h!=null)return r.i.concat(r.h.G);if(r.g!=null&&r.g.size!==0){let l=r.i;for(const u of r.g.values())l=l.concat(u.G);return l}return _(r.i)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uu(r,l){if(r){r=r.split("&");for(let u=0;u<r.length;u++){const p=r[u].indexOf("=");let k,C=null;p>=0?(k=r[u].substring(0,p),C=r[u].substring(p+1)):k=r[u],l(k,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function it(r){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;r instanceof it?(this.l=r.l,Ss(this,r.j),this.o=r.o,this.g=r.g,_s(this,r.u),this.h=r.h,fr(this,ro(r.i)),this.m=r.m):r&&(l=String(r).match(Qi))?(this.l=!1,Ss(this,l[1]||"",!0),this.o=Es(l[2]||""),this.g=Es(l[3]||"",!0),_s(this,l[4]),this.h=Es(l[5]||"",!0),fr(this,l[6]||"",!0),this.m=Es(l[7]||"")):(this.l=!1,this.i=new ks(null,this.l))}it.prototype.toString=function(){const r=[];var l=this.j;l&&r.push(Ns(l,Zi,!0),":");var u=this.g;return(u||l=="file")&&(r.push("//"),(l=this.o)&&r.push(Ns(l,Zi,!0),"@"),r.push(ws(u).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.u,u!=null&&r.push(":",String(u))),(u=this.h)&&(this.g&&u.charAt(0)!="/"&&r.push("/"),r.push(Ns(u,u.charAt(0)=="/"?fu:hu,!0))),(u=this.i.toString())&&r.push("?",u),(u=this.m)&&r.push("#",Ns(u,mu)),r.join("")},it.prototype.resolve=function(r){const l=He(this);let u=!!r.j;u?Ss(l,r.j):u=!!r.o,u?l.o=r.o:u=!!r.g,u?l.g=r.g:u=r.u!=null;var p=r.h;if(u)_s(l,r.u);else if(u=!!r.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var k=l.h.lastIndexOf("/");k!=-1&&(p=l.h.slice(0,k+1)+p)}if(k=p,k==".."||k==".")p="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){p=k.lastIndexOf("/",0)==0,k=k.split("/");const C=[];for(let F=0;F<k.length;){const Y=k[F++];Y=="."?p&&F==k.length&&C.push(""):Y==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&F==k.length&&C.push("")):(C.push(Y),p=!0)}p=C.join("/")}else p=k}return u?l.h=p:u=r.i.toString()!=="",u?fr(l,ro(r.i)):u=!!r.m,u&&(l.m=r.m),l};function He(r){return new it(r)}function Ss(r,l,u){r.j=u?Es(l,!0):l,r.j&&(r.j=r.j.replace(/:$/,""))}function _s(r,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);r.u=l}else r.u=null}function fr(r,l,u){l instanceof ks?(r.i=l,gu(r.i,r.l)):(u||(l=Ns(l,pu)),r.i=new ks(l,r.l))}function le(r,l,u){r.i.set(l,u)}function nn(r){return le(r,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),r}function Es(r,l){return r?l?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Ns(r,l,u){return typeof r=="string"?(r=encodeURI(r).replace(l,du),u&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function du(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var Zi=/[#\/\?@]/g,hu=/[#\?:]/g,fu=/[#\?]/g,pu=/[#\?@]/g,mu=/#/g;function ks(r,l){this.h=this.g=null,this.i=r||null,this.j=!!l}function bt(r){r.g||(r.g=new Map,r.h=0,r.i&&uu(r.i,function(l,u){r.add(decodeURIComponent(l.replace(/\+/g," ")),u)}))}t=ks.prototype,t.add=function(r,l){bt(this),this.i=null,r=Jt(this,r);let u=this.g.get(r);return u||this.g.set(r,u=[]),u.push(l),this.h+=1,this};function eo(r,l){bt(r),l=Jt(r,l),r.g.has(l)&&(r.i=null,r.h-=r.g.get(l).length,r.g.delete(l))}function to(r,l){return bt(r),l=Jt(r,l),r.g.has(l)}t.forEach=function(r,l){bt(this),this.g.forEach(function(u,p){u.forEach(function(k){r.call(l,k,p,this)},this)},this)};function so(r,l){bt(r);let u=[];if(typeof l=="string")to(r,l)&&(u=u.concat(r.g.get(Jt(r,l))));else for(r=Array.from(r.g.values()),l=0;l<r.length;l++)u=u.concat(r[l]);return u}t.set=function(r,l){return bt(this),this.i=null,r=Jt(this,r),to(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[l]),this.h+=1,this},t.get=function(r,l){return r?(r=so(this,r),r.length>0?String(r[0]):l):l};function no(r,l,u){eo(r,l),u.length>0&&(r.i=null,r.g.set(Jt(r,l),_(u)),r.h+=u.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],l=Array.from(this.g.keys());for(let p=0;p<l.length;p++){var u=l[p];const k=ws(u);u=so(this,u);for(let C=0;C<u.length;C++){let F=k;u[C]!==""&&(F+="="+ws(u[C])),r.push(F)}}return this.i=r.join("&")};function ro(r){const l=new ks;return l.i=r.i,r.g&&(l.g=new Map(r.g),l.h=r.h),l}function Jt(r,l){return l=String(l),r.j&&(l=l.toLowerCase()),l}function gu(r,l){l&&!r.j&&(bt(r),r.i=null,r.g.forEach(function(u,p){const k=p.toLowerCase();p!=k&&(eo(this,p),no(this,k,u))},r)),r.j=l}function yu(r,l){const u=new xs;if(c.Image){const p=new Image;p.onload=g(ot,u,"TestLoadImage: loaded",!0,l,p),p.onerror=g(ot,u,"TestLoadImage: error",!1,l,p),p.onabort=g(ot,u,"TestLoadImage: abort",!1,l,p),p.ontimeout=g(ot,u,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=r}else l(!1)}function bu(r,l){const u=new xs,p=new AbortController,k=setTimeout(()=>{p.abort(),ot(u,"TestPingServer: timeout",!1,l)},1e4);fetch(r,{signal:p.signal}).then(C=>{clearTimeout(k),C.ok?ot(u,"TestPingServer: ok",!0,l):ot(u,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(k),ot(u,"TestPingServer: error",!1,l)})}function ot(r,l,u,p,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),p(u)}catch(C){}}function xu(){this.g=new Zl}function pr(r){this.i=r.Sb||null,this.h=r.ab||!1}v(pr,Li),pr.prototype.g=function(){return new rn(this.i,this.h)};function rn(r,l){X.call(this),this.H=r,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(rn,X),t=rn.prototype,t.open=function(r,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=r,this.D=l,this.readyState=1,As(this)},t.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};r&&(l.body=r),(this.H||c).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},t.Pa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;io(this)}else r.text().then(this.Oa.bind(this),this.ga.bind(this))};function io(r){r.j.read().then(r.Ma.bind(r)).catch(r.ga.bind(r))}t.Ma=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var l=r.value?r.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!r.done}))&&(this.response=this.responseText+=l)}r.done?js(this):As(this),this.readyState==3&&io(this)}},t.Oa=function(r){this.g&&(this.response=this.responseText=r,js(this))},t.Na=function(r){this.g&&(this.response=r,js(this))},t.ga=function(){this.g&&js(this)};function js(r){r.readyState=4,r.l=null,r.j=null,r.B=null,As(r)}t.setRequestHeader=function(r,l){this.A.append(r,l)},t.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],l=this.h.entries();for(var u=l.next();!u.done;)u=u.value,r.push(u[0]+": "+u[1]),u=l.next();return r.join(`\r
`)};function As(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(rn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function oo(r){let l="";return Oe(r,function(u,p){l+=p,l+=":",l+=u,l+=`\r
`}),l}function mr(r,l,u){e:{for(p in u){var p=!1;break e}p=!0}p||(u=oo(u),typeof r=="string"?u!=null&&ws(u):le(r,l,u))}function he(r){X.call(this),this.headers=new Map,this.L=r||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(he,X);var wu=/^https?$/i,vu=["POST","PUT"];t=he.prototype,t.Fa=function(r){this.H=r},t.ea=function(r,l,u,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);l=l?l.toUpperCase():"GET",this.D=r,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bi.g(),this.g.onreadystatechange=j(f(this.Ca,this));try{this.B=!0,this.g.open(l,String(r),!0),this.B=!1}catch(C){ao(this,C);return}if(r=u||"",u=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var k in p)u.set(k,p[k]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())u.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(u.keys()).find(C=>C.toLowerCase()=="content-type"),k=c.FormData&&r instanceof c.FormData,!(Array.prototype.indexOf.call(vu,l,void 0)>=0)||p||k||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,F]of u)this.g.setRequestHeader(C,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(r),this.v=!1}catch(C){ao(this,C)}};function ao(r,l){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=l,r.o=5,co(r),on(r)}function co(r){r.A||(r.A=!0,de(r,"complete"),de(r,"error"))}t.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=r||7,de(this,"complete"),de(this,"abort"),on(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),on(this,!0)),he.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?lo(this):this.Xa())},t.Xa=function(){lo(this)};function lo(r){if(r.h&&typeof o!="undefined"){if(r.v&&at(r)==4)setTimeout(r.Ca.bind(r),0);else if(de(r,"readystatechange"),at(r)==4){r.h=!1;try{const C=r.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var u;if(!(u=l)){var p;if(p=C===0){let F=String(r.D).match(Qi)[1]||null;!F&&c.self&&c.self.location&&(F=c.self.location.protocol.slice(0,-1)),p=!wu.test(F?F.toLowerCase():"")}u=p}if(u)de(r,"complete"),de(r,"success");else{r.o=6;try{var k=at(r)>2?r.g.statusText:""}catch(F){k=""}r.l=k+" ["+r.ca()+"]",co(r)}}finally{on(r)}}}}function on(r,l){if(r.g){r.m&&(clearTimeout(r.m),r.m=null);const u=r.g;r.g=null,l||de(r,"ready");try{u.onreadystatechange=null}catch(p){}}}t.isActive=function(){return!!this.g};function at(r){return r.g?r.g.readyState:0}t.ca=function(){try{return at(this)>2?this.g.status:-1}catch(r){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},t.La=function(r){if(this.g){var l=this.g.responseText;return r&&l.indexOf(r)==0&&(l=l.substring(r.length)),Ql(l)}};function uo(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.F){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(l){return null}}function Su(r){const l={};r=(r.g&&at(r)>=2&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<r.length;p++){if(y(r[p]))continue;var u=ou(r[p]);const k=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();const C=l[k]||[];l[k]=C,C.push(u)}K(l,function(p){return p.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(r,l,u){return u&&u.internalChannelParams&&u.internalChannelParams[r]||l}function ho(r){this.za=0,this.i=[],this.j=new xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ts("failFast",!1,r),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ts("baseRetryDelayMs",5e3,r),this.Za=Ts("retryDelaySeedMs",1e4,r),this.Ta=Ts("forwardChannelMaxRetries",2,r),this.va=Ts("forwardChannelRequestTimeoutMs",2e4,r),this.ma=r&&r.xmlHttpFactory||void 0,this.Ua=r&&r.Rb||void 0,this.Aa=r&&r.useFetchStreams||!1,this.O=void 0,this.L=r&&r.supportsCrossDomainXhr||!1,this.M="",this.h=new Wi(r&&r.concurrentRequestLimit),this.Ba=new xu,this.S=r&&r.fastHandshake||!1,this.R=r&&r.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=r&&r.Pb||!1,r&&r.ua&&this.j.ua(),r&&r.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&r&&r.detectBufferingProxy||!1,this.ia=void 0,r&&r.longPollingTimeout&&r.longPollingTimeout>0&&(this.ia=r.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ho.prototype,t.ka=8,t.I=1,t.connect=function(r,l,u,p){Se(0),this.W=r,this.H=l||{},u&&p!==void 0&&(this.H.OSID=u,this.H.OAID=p),this.F=this.X,this.J=vo(this,null,this.W),cn(this)};function gr(r){if(fo(r),r.I==3){var l=r.V++,u=He(r.J);if(le(u,"SID",r.M),le(u,"RID",l),le(u,"TYPE","terminate"),Is(r,u),l=new rt(r,r.j,l),l.M=2,l.A=nn(He(u)),u=!1,c.navigator&&c.navigator.sendBeacon)try{u=c.navigator.sendBeacon(l.A.toString(),"")}catch(p){}!u&&c.Image&&(new Image().src=l.A,u=!0),u||(l.g=So(l.j,null),l.g.ea(l.A)),l.F=Date.now(),sn(l)}wo(r)}function an(r){r.g&&(br(r),r.g.cancel(),r.g=null)}function fo(r){an(r),r.v&&(c.clearTimeout(r.v),r.v=null),ln(r),r.h.cancel(),r.m&&(typeof r.m=="number"&&c.clearTimeout(r.m),r.m=null)}function cn(r){if(!Ki(r.h)&&!r.m){r.m=!0;var l=r.Ea;V||m(),B||(V(),B=!0),w.add(l,r),r.D=0}}function _u(r,l){return Ji(r.h)>=r.h.j-(r.m?1:0)?!1:r.m?(r.i=l.G.concat(r.i),!0):r.I==1||r.I==2||r.D>=(r.Sa?0:r.Ta)?!1:(r.m=bs(f(r.Ea,r,l),xo(r,r.D)),r.D++,!0)}t.Ea=function(r){if(this.m)if(this.m=null,this.I==1){if(!r){this.V=Math.floor(Math.random()*1e5),r=this.V++;const k=new rt(this,this.j,r);let C=this.o;if(this.U&&(C?(C=z(C),oe(C,this.U)):C=this.U),this.u!==null||this.R||(k.J=C,C=null),this.S)e:{for(var l=0,u=0;u<this.i.length;u++){t:{var p=this.i[u];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,l>4096){l=u;break e}if(l===4096||u===this.i.length-1){l=u+1;break e}}l=1e3}else l=1e3;l=mo(this,k,l),u=He(this.J),le(u,"RID",r),le(u,"CVER",22),this.G&&le(u,"X-HTTP-Session-Id",this.G),Is(this,u),C&&(this.R?l="headers="+ws(oo(C))+"&"+l:this.u&&mr(u,this.u,C)),hr(this.h,k),this.Ra&&le(u,"TYPE","init"),this.S?(le(u,"$req",l),le(u,"SID","null"),k.U=!0,cr(k,u,null)):cr(k,u,l),this.I=2}}else this.I==3&&(r?po(this,r):this.i.length==0||Ki(this.h)||po(this))};function po(r,l){var u;l?u=l.l:u=r.V++;const p=He(r.J);le(p,"SID",r.M),le(p,"RID",u),le(p,"AID",r.K),Is(r,p),r.u&&r.o&&mr(p,r.u,r.o),u=new rt(r,r.j,u,r.D+1),r.u===null&&(u.J=r.o),l&&(r.i=l.G.concat(r.i)),l=mo(r,u,1e3),u.H=Math.round(r.va*.5)+Math.round(r.va*.5*Math.random()),hr(r.h,u),cr(u,p,l)}function Is(r,l){r.H&&Oe(r.H,function(u,p){le(l,p,u)}),r.l&&Oe({},function(u,p){le(l,p,u)})}function mo(r,l,u){u=Math.min(r.i.length,u);const p=r.l?f(r.l.Ka,r.l,r):null;e:{var k=r.i;let Y=-1;for(;;){const ge=["count="+u];Y==-1?u>0?(Y=k[0].g,ge.push("ofs="+Y)):Y=0:ge.push("ofs="+Y);let ce=!0;for(let be=0;be<u;be++){var C=k[be].g;const qe=k[be].map;if(C-=Y,C<0)Y=Math.max(0,k[be].g-100),ce=!1;else try{C="req"+C+"_"||"";try{var F=qe instanceof Map?qe:Object.entries(qe);for(const[wt,ct]of F){let lt=ct;d(ct)&&(lt=tr(ct)),ge.push(C+wt+"="+encodeURIComponent(lt))}}catch(wt){throw ge.push(C+"type="+encodeURIComponent("_badmap")),wt}}catch(wt){p&&p(qe)}}if(ce){F=ge.join("&");break e}}F=void 0}return r=r.i.splice(0,u),l.G=r,F}function go(r){if(!r.g&&!r.v){r.Y=1;var l=r.Da;V||m(),B||(V(),B=!0),w.add(l,r),r.A=0}}function yr(r){return r.g||r.v||r.A>=3?!1:(r.Y++,r.v=bs(f(r.Da,r),xo(r,r.A)),r.A++,!0)}t.Da=function(){if(this.v=null,yo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var r=4*this.T;this.j.info("BP detection timer enabled: "+r),this.B=bs(f(this.Wa,this),r)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),an(this),yo(this))};function br(r){r.B!=null&&(c.clearTimeout(r.B),r.B=null)}function yo(r){r.g=new rt(r,r.j,"rpc",r.Y),r.u===null&&(r.g.J=r.o),r.g.P=0;var l=He(r.na);le(l,"RID","rpc"),le(l,"SID",r.M),le(l,"AID",r.K),le(l,"CI",r.F?"0":"1"),!r.F&&r.ia&&le(l,"TO",r.ia),le(l,"TYPE","xmlhttp"),Is(r,l),r.u&&r.o&&mr(l,r.u,r.o),r.O&&(r.g.H=r.O);var u=r.g;r=r.ba,u.M=1,u.A=nn(He(l)),u.u=null,u.R=!0,Hi(u,r)}t.Va=function(){this.C!=null&&(this.C=null,an(this),yr(this),Se(19))};function ln(r){r.C!=null&&(c.clearTimeout(r.C),r.C=null)}function bo(r,l){var u=null;if(r.g==l){ln(r),br(r),r.g=null;var p=2}else if(dr(r.h,l))u=l.G,Xi(r.h,l),p=1;else return;if(r.I!=0){if(l.o)if(p==1){u=l.u?l.u.length:0,l=Date.now()-l.F;var k=r.D;p=rr(),de(p,new Ui(p,u)),cn(r)}else go(r);else if(k=l.m,k==3||k==0&&l.X>0||!(p==1&&_u(r,l)||p==2&&yr(r)))switch(u&&u.length>0&&(l=r.h,l.i=l.i.concat(u)),k){case 1:xt(r,5);break;case 4:xt(r,10);break;case 3:xt(r,6);break;default:xt(r,2)}}}function xo(r,l){let u=r.Qa+Math.floor(Math.random()*r.Za);return r.isActive()||(u*=2),u*l}function xt(r,l){if(r.j.info("Error code "+l),l==2){var u=f(r.bb,r),p=r.Ua;const k=!p;p=new it(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ss(p,"https"),nn(p),k?yu(p.toString(),u):bu(p.toString(),u)}else Se(2);r.I=0,r.l&&r.l.pa(l),wo(r),fo(r)}t.bb=function(r){r?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function wo(r){if(r.I=0,r.ja=[],r.l){const l=Yi(r.h);(l.length!=0||r.i.length!=0)&&(E(r.ja,l),E(r.ja,r.i),r.h.i.length=0,_(r.i),r.i.length=0),r.l.oa()}}function vo(r,l,u){var p=u instanceof it?He(u):new it(u);if(p.g!="")l&&(p.g=l+"."+p.g),_s(p,p.u);else{var k=c.location;p=k.protocol,l=l?l+"."+k.hostname:k.hostname,k=+k.port;const C=new it(null);p&&Ss(C,p),l&&(C.g=l),k&&_s(C,k),u&&(C.h=u),p=C}return u=r.G,l=r.wa,u&&l&&le(p,u,l),le(p,"VER",r.ka),Is(r,p),p}function So(r,l,u){if(l&&!r.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=r.Aa&&!r.ma?new he(new pr({ab:u})):new he(r.ma),l.Fa(r.L),l}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _o(){}t=_o.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ce(r,l){X.call(this),this.g=new ho(l),this.l=r,this.h=l&&l.messageUrlParams||null,r=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(r?r["X-WebChannel-Content-Type"]=l.messageContentType:r={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(r?r["X-WebChannel-Client-Profile"]=l.sa:r={"X-WebChannel-Client-Profile":l.sa}),this.g.U=r,(r=l&&l.Qb)&&!y(r)&&(this.g.u=r),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!y(l)&&(this.g.G=l,r=this.h,r!==null&&l in r&&(r=this.h,l in r&&delete r[l])),this.j=new Xt(this)}v(Ce,X),Ce.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ce.prototype.close=function(){gr(this.g)},Ce.prototype.o=function(r){var l=this.g;if(typeof r=="string"){var u={};u.__data__=r,r=u}else this.v&&(u={},u.__data__=tr(r),r=u);l.i.push(new lu(l.Ya++,r)),l.I==3&&cn(l)},Ce.prototype.N=function(){this.g.l=null,delete this.j,gr(this.g),delete this.g,Ce.Z.N.call(this)};function Eo(r){sr.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var l=r.__sm__;if(l){e:{for(const u in l){r=u;break e}r=void 0}(this.i=r)&&(r=this.i,l=l!==null&&r in l?l[r]:void 0),this.data=l}else this.data=r}v(Eo,sr);function No(){nr.call(this),this.status=1}v(No,nr);function Xt(r){this.g=r}v(Xt,_o),Xt.prototype.ra=function(){de(this.g,"a")},Xt.prototype.qa=function(r){de(this.g,new Eo(r))},Xt.prototype.pa=function(r){de(this.g,new No)},Xt.prototype.oa=function(){de(this.g,"b")},Ce.prototype.send=Ce.prototype.o,Ce.prototype.open=Ce.prototype.m,Ce.prototype.close=Ce.prototype.close,ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,iu.COMPLETE="complete",eu.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",X.prototype.listen=X.prototype.J,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa}).apply(typeof bn!="undefined"?bn:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Ua="@firebase/firestore",Ba="4.9.2";class _e{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_e.UNAUTHENTICATED=new _e(null),_e.GOOGLE_CREDENTIALS=new _e("google-credentials-uid"),_e.FIRST_PARTY=new _e("first-party-uid"),_e.MOCK_USER=new _e("mock-user");let Js="12.3.0";const os=new Xn("@firebase/firestore");function $e(t,...e){if(os.logLevel<=ae.DEBUG){const s=e.map(Ti);os.debug(`Firestore (${Js}): ${t}`,...s)}}function Ml(t,...e){if(os.logLevel<=ae.ERROR){const s=e.map(Ti);os.error(`Firestore (${Js}): ${t}`,...s)}}function Ey(t,...e){if(os.logLevel<=ae.WARN){const s=e.map(Ti);os.warn(`Firestore (${Js}): ${t}`,...s)}}function Ti(t){if(typeof t=="string")return t;try{return(function(s){return JSON.stringify(s)})(t)}catch(e){return t}}function zs(t,e,s){let n="Unexpected state";typeof e=="string"?n=e:s=e,Fl(t,n,s)}function Fl(t,e,s){let n=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{n+=" CONTEXT: "+JSON.stringify(s)}catch(i){n+=" CONTEXT: "+s}throw Ml(n),new Error(n)}function Ls(t,e,s,n){let i="Unexpected state";typeof s=="string"?i=s:n=s,t||Fl(e,i,n)}const te={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class se extends Ye{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ms{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}class $l{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ny{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(_e.UNAUTHENTICATED)))}shutdown(){}}class ky{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class jy{constructor(e){this.t=e,this.currentUser=_e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Ls(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,s(h)):Promise.resolve();let o=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ms,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((()=>A(this,null,function*(){yield h.promise,yield i(this.currentUser)})))},d=h=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ms)}}),0),c()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((n=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ls(typeof n.accessToken=="string",31837,{l:n}),new $l(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ls(e===null||typeof e=="string",2055,{h:e}),new _e(e)}}class Ay{constructor(e,s,n){this.P=e,this.T=s,this.I=n,this.type="FirstParty",this.user=_e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ty{constructor(e,s,n){this.P=e,this.T=s,this.I=n}getToken(){return Promise.resolve(new Ay(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(_e.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Va{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iy{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){Ls(this.o===void 0,3512);const n=o=>{o.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const i=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Va(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(Ls(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Va(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cy(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Cy(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<s&&(n+=e.charAt(i[o]%62))}return n}}function mt(t,e){return t<e?-1:t>e?1:0}function Dy(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++){const i=t.charAt(n),o=e.charAt(n);if(i!==o)return Mr(i)===Mr(o)?mt(i,o):Mr(i)?1:-1}return mt(t.length,e.length)}const Oy=55296,Py=57343;function Mr(t){const e=t.charCodeAt(0);return e>=Oy&&e<=Py}const za="__name__";class We{constructor(e,s,n){s===void 0?s=0:s>e.length&&zs(637,{offset:s,range:e.length}),n===void 0?n=e.length-s:n>e.length-s&&zs(1746,{length:n,range:e.length-s}),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return We.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof We?e.forEach((n=>{s.push(n)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let i=0;i<n;i++){const o=We.compareSegments(e.get(i),s.get(i));if(o!==0)return o}return mt(e.length,s.length)}static compareSegments(e,s){const n=We.isNumericId(e),i=We.isNumericId(s);return n&&!i?-1:!n&&i?1:n&&i?We.extractNumericId(e).compare(We.extractNumericId(s)):Dy(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class Fe extends We{construct(e,s,n){return new Fe(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new se(te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter((i=>i.length>0)))}return new Fe(s)}static emptyPath(){return new Fe([])}}const Ly=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends We{construct(e,s,n){return new Nt(e,s,n)}static isValidIdentifier(e){return Ly.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===za}static keyField(){return new Nt([za])}static fromServerFormat(e){const s=[];let n="",i=0;const o=()=>{if(n.length===0)throw new se(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new se(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new se(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(n+=d,i++):(o(),i++)}if(o(),c)throw new se(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(s)}static emptyPath(){return new Nt([])}}class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(Fe.fromString(e))}static fromName(e){return new Dt(Fe.fromString(e).popFirst(5))}static empty(){return new Dt(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Fe.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new Fe(e.slice()))}}function My(t,e,s,n){if(e===!0&&n===!0)throw new se(te.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Fy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $y(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":zs(12329,{type:typeof t})}function Uy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=$y(t);throw new se(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function me(t,e){const s={typeString:t};return e&&(s.value=e),s}function Xs(t,e){if(!Fy(t))throw new se(te.INVALID_ARGUMENT,"JSON must be an object");let s;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){s=`JSON missing required field: '${n}'`;break}const c=t[n];if(i&&typeof c!==i){s=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){s=`Expected '${n}' field to equal '${o.value}'`;break}}if(s)throw new se(te.INVALID_ARGUMENT,s);return!0}const Ha=-62135596800,qa=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor((e-1e3*s)*qa);return new Ke(s,n)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new se(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new se(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Ha)throw new se(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qa}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xs(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ha;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:me("string",Ke._jsonSchemaVersion),seconds:me("number"),nanoseconds:me("number")};function By(t){return t.name==="IndexedDbTransactionError"}class Vy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(o){throw typeof DOMException!="undefined"&&o instanceof DOMException?new Vy("Invalid base64 string: "+o):o}})(e);return new Bt(s)}static fromUint8Array(e){const s=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new Bt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const n=new Uint8Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const ni="(default)";class $n{constructor(e,s){this.projectId=e,this.database=s||ni}static empty(){return new $n("","")}get isDefaultDatabase(){return this.database===ni}isEqual(e){return e instanceof $n&&e.projectId===this.projectId&&e.database===this.database}}class zy{constructor(e,s=null,n=[],i=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hy(t){return new zy(t)}var Ga,ee;(ee=Ga||(Ga={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";new Ai([4294967295,4294967295],0);const qy=41943040;const Gy=1048576;function Fr(){return typeof document!="undefined"?document:null}class Wy{constructor(e,s,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=s,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,s-n);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class Ii{constructor(e,s,n,i,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,i,o){const c=Date.now()+n,d=new Ii(e,s,c,i,o);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Wa,Ka;(Ka=Wa||(Wa={})).Ma="default",Ka.Cache="cache";function Ky(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ja=new Map;const Ul="firestore.googleapis.com",Xa=!0;class Ya{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new se(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ul,this.ssl=Xa}else this.host=e.host,this.ssl=(s=e.ssl)!=null?s:Xa;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gy)throw new se(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}My("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ky((n=e.experimentalLongPollingOptions)!=null?n:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new se(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new se(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new se(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,s,n,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ya({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ya(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Ny;switch(n.type){case"firstParty":return new Ty(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new se(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const n=Ja.get(s);n&&($e("ComponentProvider","Removing Datastore"),Ja.delete(s),n.terminate())})(this),Promise.resolve()}}function Jy(t,e,s,n={}){var f;t=Uy(t,Bl);const i=Kn(e),o=t._getSettings(),c=G(M({},o),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${s}`;i&&(gi(`https://${d}`),yi("Firestore",!0)),o.host!==Ul&&o.host!==d&&Ey("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=G(M({},o),{host:d,ssl:i,emulatorOptions:n});if(!Bs(h,c)&&(t._setSettings(h),n.mockUserToken)){let g,v;if(typeof n.mockUserToken=="string")g=n.mockUserToken,v=_e.MOCK_USER;else{g=Qc(n.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const j=n.mockUserToken.sub||n.mockUserToken.user_id;if(!j)throw new se(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new _e(j)}t._authCredentials=new ky(new $l(g,v))}}class Ci{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class Je{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,n){if(Xs(s,Je._jsonSchema))return new Je(e,n||null,new Dt(Fe.fromString(s.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:me("string",Je._jsonSchemaVersion),referencePath:me("string")};class Ri extends Ci{constructor(e,s,n){super(e,s,Hy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new Dt(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}const Qa="AsyncQueue";class Za{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wy(this,"async_queue_retry"),this._c=()=>{const n=Fr();n&&$e(Qa,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const s=Fr();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Fr();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}lc(){return A(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!By(e))throw e;$e(Qa,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}})}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Ml("INTERNAL UNHANDLED ERROR: ",ec(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=s,s}enqueueAfterDelay(e,s,n){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const i=Ii.createAndSchedule(this,e,s,n,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&zs(47125,{Pc:ec(this.nc)})}verifyOperationInProgress(){}Tc(){return A(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,n)=>s.targetTimeMs-n.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function ec(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xy extends Bl{constructor(e,s,n,i){super(e,s,n,i),this.type="firestore",this._queue=new Za,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Za(e),this._firestoreClient=void 0,yield e}})}}function Yy(t,e){const s=typeof t=="object"?t:Ks(),n=typeof t=="string"?t:ni,i=gt(s,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=mi("firestore");o&&Jy(i,...o)}return i}class et{constructor(e){this._byteString=e}static fromBase64String(e){try{return new et(Bt.fromBase64String(e))}catch(s){throw new se(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new et(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:et._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xs(e,et._jsonSchema))return et.fromBase64String(e.bytes)}}et._jsonSchemaVersion="firestore/bytes/1.0",et._jsonSchema={type:me("string",et._jsonSchemaVersion),bytes:me("string")};class Vl{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new se(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pt{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new se(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new se(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pt._jsonSchemaVersion}}static fromJSON(e){if(Xs(e,Pt._jsonSchema))return new Pt(e.latitude,e.longitude)}}Pt._jsonSchemaVersion="firestore/geoPoint/1.0",Pt._jsonSchema={type:me("string",Pt._jsonSchemaVersion),latitude:me("number"),longitude:me("number")};class Lt{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xs(e,Lt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Lt(e.vectorValues);throw new se(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lt._jsonSchemaVersion="firestore/vectorValue/1.0",Lt._jsonSchema={type:me("string",Lt._jsonSchemaVersion),vectorValues:me("object")};const Qy=new RegExp("[~\\*/\\[\\]]");function Zy(t,e,s){if(e.search(Qy)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new Vl(...e.split("."))._internalPath}catch(n){throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function tc(t,e,s,n,i){let o=`Function ${e}() called with invalid data`;o+=". ";let c="";return new se(te.INVALID_ARGUMENT,o+t+c)}class zl{constructor(e,s,n,i,o){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Hl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class eb extends zl{data(){return super.data()}}function Hl(t,e){return typeof e=="string"?Zy(t,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}class xn{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ts extends zl{constructor(e,s,n,i,o,c){super(e,s,n,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Tn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ts._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",ts._jsonSchema={type:me("string",ts._jsonSchemaVersion),bundleSource:me("string","DocumentSnapshot"),bundleName:me("string"),bundle:me("string")};class Tn extends ts{data(e={}){return super.data(e)}}class Fs{constructor(e,s,n,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new xn(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((n=>{e.call(s,new Tn(this._firestore,this._userDataWriter,n.key,n,new xn(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new se(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Tn(i._firestore,i._userDataWriter,d.doc.key,d.doc,new xn(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Tn(i._firestore,i._userDataWriter,d.doc.key,d.doc,new xn(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:tb(d.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],n=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(s.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zs(61501,{type:t})}}Fs._jsonSchemaVersion="firestore/querySnapshot/1.0",Fs._jsonSchema={type:me("string",Fs._jsonSchemaVersion),bundleSource:me("string","QuerySnapshot"),bundleName:me("string"),bundle:me("string")};(function(e,s=!0){(function(i){Js=i})(rl),Be(new De("firestore",((n,{instanceIdentifier:i,options:o})=>{const c=n.getProvider("app").getImmediate(),d=new Xy(new jy(n.getProvider("auth-internal")),new Iy(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new se(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $n(f.options.projectId,g)})(c,i),c);return o=M({useFetchStreams:s},o),d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),ve(Ua,Ba,e),ve(Ua,Ba,"esm2020")})();const ql="functions";class sb{constructor(e,s,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=s.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||s.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return A(this,null,function*(){if(this.auth)try{const e=yield this.auth.getToken();return e==null?void 0:e.accessToken}catch(e){return}})}getMessagingToken(){return A(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch(e){return}})}getAppCheckToken(e){return A(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const s=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return s.error?null:s.token}return null})}getContext(e){return A(this,null,function*(){const s=yield this.getAuthToken(),n=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:s,messagingToken:n,appCheckToken:i}})}}const ri="us-central1";class nb{constructor(e,s,n,i,o=ri,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new sb(e,s,n,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=ri}catch(d){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const s=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${s}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${s}.cloudfunctions.net/${e}`}}function rb(t,e,s){const n=Kn(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${s}`,n&&(gi(t.emulatorOrigin+"/backends"),yi("Functions",!0))}const sc="@firebase/functions",nc="0.13.1";const ib="auth-internal",ob="app-check-internal",ab="messaging-internal";function cb(t){const e=(s,{instanceIdentifier:n})=>{const i=s.getProvider("app").getImmediate(),o=s.getProvider(ib),c=s.getProvider(ab),d=s.getProvider(ob);return new nb(i,o,c,d,n)};Be(new De(ql,e,"PUBLIC").setMultipleInstances(!0)),ve(sc,nc,t),ve(sc,nc,"esm2020")}function lb(t=Ks(),e=ri){const n=gt(Vt(t),ql).getImmediate({identifier:e}),i=mi("functions");return i&&ub(n,...i),n}function ub(t,e,s){rb(Vt(t),e,s)}cb();const Gl="firebasestorage.googleapis.com",db="storageBucket",hb=120*1e3,fb=600*1e3;class Qe extends Ye{constructor(e,s,n=0){super($r(e),`Firebase Storage: ${s} (${$r(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $r(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function $r(t){return"storage/"+t}function pb(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Xe.UNKNOWN,t)}function mb(){return new Qe(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gb(){return new Qe(Xe.CANCELED,"User canceled the upload/download.")}function yb(t){return new Qe(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function bb(t){return new Qe(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rc(t){return new Qe(Xe.INVALID_ARGUMENT,t)}function Wl(){return new Qe(Xe.APP_DELETED,"The Firebase app was deleted.")}function xb(t){return new Qe(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ue{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=Ue.makeFromUrl(e,s)}catch(i){return new Ue(e,"")}if(n.path==="")return n;throw bb(e)}static makeFromUrl(e,s){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const g="v[A-Za-z0-9_]+",v=s.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",_=new RegExp(`^https?://${v}/${g}/b/${i}/o${j}`,"i"),E={bucket:1,path:3},R=s===Gl?"(?:storage.googleapis.com|storage.cloud.google.com)":s,T="([^?#]*)",L=new RegExp(`^https?://${R}/${i}/${T}`,"i"),$=[{regex:d,indices:h,postModify:o},{regex:_,indices:E,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<$.length;D++){const V=$[D],B=V.regex.exec(e);if(B){const w=B[V.indices.bucket];let m=B[V.indices.path];m||(m=""),n=new Ue(w,m),V.postModify(n);break}}if(n==null)throw yb(e);return n}}class wb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vb(t,e,s){let n=1,i=null,o=null,c=!1,d=0;function h(){return d===2}let f=!1;function g(...T){f||(f=!0,e.apply(null,T))}function v(T){i=setTimeout(()=>{i=null,t(_,h())},T)}function j(){o&&clearTimeout(o)}function _(T,...L){if(f){j();return}if(T){j(),g.call(null,T,...L);return}if(h()||c){j(),g.call(null,T,...L);return}n<64&&(n*=2);let $;d===1?(d=2,$=0):$=(n+Math.random())*1e3,v($)}let E=!1;function R(T){E||(E=!0,j(),!f&&(i!==null?(T||(d=2),clearTimeout(i),v(0)):T||(d=1)))}return v(0),o=setTimeout(()=>{c=!0,R(!0)},s),R}function Sb(t){t(!1)}function _b(t){return t!==void 0}function ic(t,e,s,n){if(n<e)throw rc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw rc(`Invalid value for '${t}'. Expected ${s} or less.`)}function Eb(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);s=s+i+"&"}return s=s.slice(0,-1),s}var Un;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Un||(Un={}));function Nb(t,e){const s=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return s||i||o}class kb{constructor(e,s,n,i,o,c,d,h,f,g,v,j=!0,_=!1){this.url_=e,this.method_=s,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=v,this.retry=j,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,R)=>{this.resolve_=E,this.reject_=R,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new wn(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{const h=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===Un.NO_ERROR,h=o.getStatus();if(!d||Nb(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Un.ABORT;n(!1,new wn(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;n(!0,new wn(f,o))})},s=(n,i)=>{const o=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());_b(h)?o(h):o()}catch(h){c(h)}else if(d!==null){const h=pb();h.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,h)):c(h)}else if(i.canceled){const h=this.appDelete_?Wl():gb();c(h)}else{const h=mb();c(h)}};this.canceled_?s(!1,new wn(!1,null,!0)):this.backoffId_=vb(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wn{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function jb(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ab(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function Tb(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Ib(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Cb(t,e,s,n,i,o,c=!0,d=!1){const h=Eb(t.urlParams),f=t.url+h,g=Object.assign({},t.headers);return Tb(g,e),jb(g,s),Ab(g,o),Ib(g,n),new kb(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,d)}function Rb(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Db(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Bn{constructor(e,s){this._service=e,s instanceof Ue?this._location=s:this._location=Ue.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new Bn(e,s)}get root(){const e=new Ue(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Db(this._location.path)}get storage(){return this._service}get parent(){const e=Rb(this._location.path);if(e===null)return null;const s=new Ue(this._location.bucket,e);return new Bn(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw xb(e)}}function oc(t,e){const s=e==null?void 0:e[db];return s==null?null:Ue.makeFromBucketSpec(s,t)}function Ob(t,e,s,n={}){t.host=`${e}:${s}`;const i=Kn(e);i&&(gi(`https://${t.host}/b`),yi("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=n;o&&(t._overrideAuthToken=typeof o=="string"?o:Qc(o,t.app.options.projectId))}class Pb{constructor(e,s,n,i,o,c=!1){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Gl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hb,this._maxUploadRetryTime=fb,this._requests=new Set,i!=null?this._bucket=Ue.makeFromBucketSpec(i,this._host):this._bucket=oc(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ue.makeFromBucketSpec(this._url,e):this._bucket=oc(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ic("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ic("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return A(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=yield e.getToken();if(s!==null)return s.accessToken}return null})}_getAppCheckToken(){return A(this,null,function*(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bn(this,e)}_makeRequest(e,s,n,i,o=!0){if(this._deleted)return new wb(Wl());{const c=Cb(e,this._appId,n,i,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,s){return A(this,null,function*(){const[n,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,i).getPromise()})}}const ac="@firebase/storage",cc="0.14.0";const Kl="storage";function Lb(t=Ks(),e){t=Vt(t);const n=gt(t,Kl).getImmediate({identifier:e}),i=mi("storage");return i&&Mb(n,...i),n}function Mb(t,e,s,n={}){Ob(t,e,s,n)}function Fb(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Pb(s,n,i,e,rl)}function $b(){Be(new De(Kl,Fb,"PUBLIC").setMultipleInstances(!0)),ve(ac,cc,""),ve(ac,cc,"esm2020")}$b();const Ub={apiKey:"AIzaSyAONjMz5IWshDt_spZEpGI_gnNDD7izGsA",authDomain:"gen-lang-client-0704991831.firebaseapp.com",databaseURL:"https://gen-lang-client-0704991831-default-rtdb.firebaseio.com",projectId:"gen-lang-client-0704991831",storageBucket:"gen-lang-client-0704991831.firebasestorage.app",messagingSenderId:"893670545674",appId:"1:893670545674:web:9fee83296955160e8842f3",measurementId:"G-4L6HZCPSSX"},Ys=il(Ub);yy(Ys);Yy(Ys);Lb(Ys);lb(Ys);const Bb="us-central1",Vb="gemini-2.5-flash",zb=Qm(Ys,{backend:new Qn(Bb)}),Hb=Zm(zb,{model:Vb}),jt=class jt{static getInstance(){return jt.instance||(jt.instance=new jt),jt.instance}generateEnhancedContent(e,s,n,i){return A(this,null,function*(){return this.generateContent(e,{context:s,systemInstruction:n,history:i})})}generateContent(n){return A(this,arguments,function*(e,s={}){const i=[s.context,e].filter(Boolean).join(`

`),c={contents:this.buildContents(s.history,i),systemInstruction:s.systemInstruction},d=yield Hb.generateContent(c);return this.extractText(d)})}buildContents(e,s){const n=[],i=e?e.slice(-12):[];for(const o of i)o.text&&n.push({role:this.normalizeRole(o.role),parts:[{text:o.text}]});return s&&n.push({role:"user",parts:[{text:s}]}),n}normalizeRole(e){return e==="user"?"user":"model"}extractText(e){var o,c,d;const s=e==null?void 0:e.response;if(s!=null&&s.text)return s.text();const n=(o=e==null?void 0:e.response)==null?void 0:o.candidates;return(((d=(c=n==null?void 0:n[0])==null?void 0:c.content)==null?void 0:d.parts)||[]).map(h=>h.text||"").join("").trim()}};xe(jt,"instance",null);let ii=jt;const qb=({project:t,onBack:e})=>{const[s,n]=P.useState(""),[i,o]=P.useState([{role:"system",text:t!=null&&t.title?`I've analyzed the "${t.title}" brief. ${t.description?t.description+" ":""}Would you like me to draft concepts or provide creative direction?`:"Welcome to Writer's Room. I'm Lumina, your AI creative director. How can I help shape your vision today?"}]),[c,d]=P.useState(!1),h=P.useRef(null),f=ii.getInstance(),g=()=>{var R;return t&&[t.title?`Project: ${t.title}`:null,t.description?`Brief: ${t.description}`:null,(R=t.tone)!=null&&R.length?`Tone: ${t.tone.join(", ")}`:null].filter(Boolean).join(`
`)||void 0},v=_=>A(null,null,function*(){const E=(_!=null?_:s).trim();if(!E||c)return;const R={role:"user",text:E},T=i;o(L=>[...L,R]),_||n(""),d(!0);try{const L=t?`You are Lumina, an AI creative director working on "${t.title}". ${t.description?"Project: "+t.description+". ":""}Keep responses concise and focused on film/design direction.`:"You are Lumina, a creative AI director. Keep responses concise and focused on film/design direction.",H=yield f.generateContent(E,{context:g(),systemInstruction:L,history:T});o($=>[...$,{role:"system",text:H}])}catch(L){o(H=>[...H,{role:"system",text:"I'm having trouble connecting right now. Please try again in a moment."}])}finally{d(!1)}}),j=["Draft a scene outline based on this brief.","Turn the brief into a 10-shot storyboard list.","Write a 30-second VO read with a cinematic tone."];return P.useEffect(()=>{var _;(_=h.current)==null||_.scrollIntoView({behavior:"smooth"})},[i]),a.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-8 pb-32 animate-in fade-in pt-8 px-8 max-w-[1800px] mx-auto",children:[a.jsxs("div",{className:"md:hidden flex items-center gap-4 mb-4",children:[a.jsx("button",{onClick:e,className:"text-ink-secondary hover:text-ink-primary","aria-label":"Go back",children:a.jsx($s,{className:"rotate-180",size:24})}),a.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Writer's Room"})]}),a.jsxs("div",{className:"hidden md:flex w-[380px] flex-col gap-6 shrink-0 h-full overflow-y-auto pb-4",children:[a.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-ink-secondary pl-1",children:"Project Context"}),a.jsxs(tt,{className:"bg-surface border-border-subtle shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-ink-primary",children:[a.jsx(Br,{size:18}),a.jsx("h3",{className:"text-sm font-bold",children:"The Brief"})]}),a.jsx("p",{className:"text-sm text-ink-secondary leading-relaxed mb-6 font-medium",children:(t==null?void 0:t.description)||`Creative direction for "${(t==null?void 0:t.title)||"your project"}".`}),(t==null?void 0:t.tone)&&a.jsx("div",{className:"flex gap-2 flex-wrap",children:t.tone.map(_=>a.jsx("span",{className:"px-2.5 py-1 bg-subtle rounded-md text-[11px] font-semibold text-ink-primary border border-border-subtle",children:_},_))})]}),a.jsxs(tt,{className:"bg-surface border-border-subtle shadow-sm flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-ink-primary",children:[a.jsx(ss,{size:18}),a.jsx("h3",{className:"text-sm font-bold",children:"Visual Language"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"aspect-square bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-border-subtle flex flex-col items-center justify-center text-center p-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mb-2",children:a.jsx(ss,{size:16,className:"text-white"})}),a.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Style Guide"})]}),a.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl border border-border-subtle flex flex-col items-center justify-center text-center p-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mb-2",children:a.jsx(Sn,{size:16,className:"text-white"})}),a.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Mood Board"})]}),a.jsxs("div",{className:"aspect-square bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl border border-border-subtle flex flex-col items-center justify-center text-center p-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center mb-2",children:a.jsx(Br,{size:16,className:"text-white"})}),a.jsx("span",{className:"text-xs font-semibold text-green-700 dark:text-green-300",children:"Reference"})]}),a.jsxs("div",{className:"aspect-square border-2 border-dashed border-border-subtle rounded-xl flex flex-col items-center justify-center text-center p-3 hover:border-ink-primary hover:bg-ink-primary/5 transition-all cursor-pointer",children:[a.jsx(ns,{size:20,className:"text-ink-tertiary hover:text-ink-primary mb-1"}),a.jsx("span",{className:"text-xs font-medium text-ink-tertiary hover:text-ink-primary",children:"Add Visual"})]})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-surface rounded-3xl border border-border-subtle shadow-sm relative overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border-subtle bg-surface/80 backdrop-blur-md z-10 sticky top-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2.5 h-2.5 bg-black rounded-full animate-pulse shadow-glow"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-bold text-ink-primary block",children:"Lumina Intelligence"}),a.jsx("span",{className:"text-[10px] text-ink-tertiary font-medium",children:"AI Creative Director"})]})]}),a.jsx("button",{className:"text-xs text-white bg-black hover:bg-black/90 border border-transparent px-4 py-2 rounded-full font-bold transition-all shadow-sm",children:"Export Script"})]}),a.jsx("div",{className:"px-6 pb-2 pt-4 flex flex-wrap gap-2 border-b border-border-subtle",children:j.map(_=>a.jsx("button",{onClick:()=>v(_),className:"px-3 py-2 bg-subtle text-xs font-semibold text-ink-primary rounded-full border border-border-subtle hover:border-ink-primary transition-colors",children:_},_))}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 bg-app",children:[i.map((_,E)=>a.jsxs("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start items-start gap-4"} animate-in slide-in-from-bottom-2`,children:[_.role==="system"&&a.jsx("div",{className:"w-8 h-8 rounded-full bg-surface border border-border-subtle flex items-center justify-center mt-4 flex-shrink-0 shadow-sm text-ink-primary",children:a.jsx(Sn,{size:14})}),a.jsx("div",{className:`max-w-[85%] md:max-w-[70%] ${_.role==="user"?"bubble-user":"bubble-ai"}`,children:_.text})]},E)),c&&a.jsxs("div",{className:"flex justify-start items-start gap-4 animate-in slide-in-from-bottom-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-surface border border-border-subtle flex items-center justify-center mt-4 flex-shrink-0 shadow-sm text-ink-primary",children:a.jsx(Sn,{size:14})}),a.jsx("div",{className:"bubble-ai shimmer",children:"Thinking..."})]}),a.jsx("div",{ref:h})]}),a.jsx("div",{className:"p-6 bg-surface border-t border-border-subtle",children:a.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[a.jsx("input",{value:s,onChange:_=>n(_.target.value),onKeyDown:_=>_.key==="Enter"&&!_.shiftKey&&v(),placeholder:"Message Lumina...",disabled:c,className:"w-full bg-subtle border border-transparent focus:border-border-subtle focus:bg-surface rounded-2xl px-6 py-4 text-sm outline-none transition-all pl-6 pr-14 font-medium placeholder:text-ink-tertiary text-ink-primary disabled:opacity-50"}),a.jsx("button",{onClick:()=>v(),disabled:c||!s.trim(),className:"absolute right-2 top-2 p-2 bg-black text-white rounded-xl hover:scale-105 transition-transform shadow-md disabled:opacity-50 disabled:hover:scale-100","aria-label":"Send message",children:a.jsx($s,{size:18})})]})})]})]})},Gb=({projects:t,onSelect:e})=>{const[s,n]=P.useState("all"),[i,o]=P.useState("recent"),c=P.useMemo(()=>Array.from(new Set(t.map(h=>h.status))).filter(Boolean),[t]),d=P.useMemo(()=>{let h=[...t];return s!=="all"&&(h=h.filter(f=>f.status===s)),i==="title"?h.sort((f,g)=>f.title.localeCompare(g.title)):h.sort((f,g)=>g.id.localeCompare(f.id)),h},[t,i,s]);return a.jsxs("div",{className:"pt-12 px-12 max-w-[1600px] mx-auto animate-in fade-in pb-32",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-ink-primary mb-2",children:"Projects"}),a.jsx("p",{className:"text-ink-secondary text-sm",children:"Active creative engagements."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("select",{value:s,onChange:h=>n(h.target.value),className:"px-3 py-2 bg-surface border border-border-subtle rounded-xl text-xs font-bold hover:border-ink-primary transition-colors",children:[a.jsx("option",{value:"all",children:"All statuses"}),c.map(h=>a.jsx("option",{value:h,children:h},h))]}),a.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"px-3 py-2 bg-surface border border-border-subtle rounded-xl text-xs font-bold hover:border-ink-primary transition-colors",children:[a.jsx("option",{value:"recent",children:"Sort: Recent"}),a.jsx("option",{value:"title",children:"Sort: Title"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"group cursor-pointer min-h-[320px] rounded-xl border-2 border-dashed border-border-subtle flex flex-col items-center justify-center hover:border-ink-primary/30 hover:bg-surface/50 transition-all duration-300",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-surface shadow-md flex items-center justify-center text-ink-secondary group-hover:text-ink-primary group-hover:scale-110 transition-all mb-6",children:a.jsx(ns,{size:32})}),a.jsx("span",{className:"font-medium text-ink-secondary group-hover:text-ink-primary",children:"Create Project"})]}),d.map(h=>a.jsxs(tt,{onClick:()=>e(h),className:"min-h-[320px] flex flex-col justify-between group cursor-pointer hover:border-ink-primary/10",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsxs("span",{className:"px-3 py-1 bg-subtle border border-border-subtle rounded-lg text-[10px] uppercase font-bold tracking-wider text-ink-secondary flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," ",h.status]}),a.jsx("button",{className:"text-ink-tertiary hover:text-ink-primary transition-colors","aria-label":"More options",children:a.jsx(sd,{size:20})})]}),a.jsx("h3",{className:"text-3xl font-bold text-ink-primary mb-3 group-hover:translate-x-1 transition-transform kinetic-text",children:h.title}),a.jsx("p",{className:"text-ink-secondary text-sm line-clamp-2 leading-relaxed",children:h.description})]}),a.jsxs("div",{className:"pt-8 border-t border-border-subtle flex justify-between items-end",children:[a.jsxs("div",{className:"flex -space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-subtle border-2 border-surface"}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-border-subtle border-2 border-surface"})]}),a.jsx("div",{className:"w-12 h-12 rounded-full bg-ink-primary text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transform translate-y-2 group-hover:translate-y-0 transition-all duration-300 shadow-xl",children:a.jsx($s,{size:20})})]})]},h.id))]})]})};function as(t){const[e,s]=P.useState([]),[n,i]=P.useState(!0),[o,c]=P.useState(null),d=P.useCallback(()=>A(null,null,function*(){try{i(!0),c(null);const h=yield t();s(h)}catch(h){c(h instanceof Error?h.message:"An error occurred"),console.error("API fetch error:",h)}finally{i(!1)}}),[t]);return P.useEffect(()=>{d()},[d]),{data:e,loading:n,error:o,refetch:d}}function Wb({project:t}){const e=cs(),s=t.status||"Active",n=s==="In Progress"?"bg-blue-100 text-blue-700":s==="Blocked"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700";return a.jsxs("div",{className:"sticky top-0 z-10 bg-app/95 backdrop-blur border-b border-border-subtle px-10 py-4 flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-ink-primary text-white flex items-center justify-center font-bold",children:t.title.slice(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-ink-tertiary uppercase",children:"Project Context"}),a.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full font-semibold ${n}`,children:s})]}),a.jsx("div",{className:"text-lg font-bold text-ink-primary",children:t.title})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-3 py-2 text-sm rounded-xl border border-border-subtle hover:border-ink-primary transition-colors",onClick:()=>e(`/writers-room?project=${t.id}`),children:"Open Writer's Room"}),a.jsx("button",{className:"px-3 py-2 text-sm rounded-xl border border-border-subtle hover:border-ink-primary transition-colors",onClick:()=>e(`/moodboard?project=${t.id}`),children:"View Moodboard"})]})]})}function Qs({loading:t,error:e,children:s,onRetry:n}){return t?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx(Hd,{size:"lg",text:"Loading data..."})}):e?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(fc,{className:"w-8 h-8 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),a.jsx("p",{className:"text-gray-600 mb-4",children:e}),n&&a.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):a.jsx(a.Fragment,{children:s})}function Kb(){const{id:t}=Pu(),e=cs(),[s,n]=P.useState("Creative direction for a kinetic, zero-gravity inspired brand world."),i=P.useCallback(()=>Wn.getProjects().then(g=>g.data),[]),{data:o,loading:c,error:d,refetch:h}=as(i),f=o.find(g=>g.id===t);return P.useEffect(()=>{!c&&!d&&o.length>0&&!f&&e("/projects",{replace:!0})},[f,c,d,o,e]),f?a.jsxs(a.Fragment,{children:[a.jsx(Wb,{project:f}),a.jsx(Pd,{projectId:f.id,projectTitle:f.title,brief:s,onBriefChange:n,onNavigateToWritersRoom:()=>e(`/writers-room?project=${f.id}`),onNavigateToMoodboard:()=>e(`/moodboard?project=${f.id}`)})]}):a.jsx(Qs,{loading:c,error:d,onRetry:h,children:a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-ink-secondary",children:[a.jsx("div",{className:"w-20 h-20 bg-subtle rounded-xl flex items-center justify-center mb-6",children:a.jsx(fc,{size:32})}),a.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-1",children:"Project Not Found"}),a.jsx("p",{className:"text-sm mb-4",children:"The project you're looking for doesn't exist."}),a.jsx("button",{onClick:()=>e("/projects"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:"Back to Projects"})]})})}function Jb(){const t=cs(),{search:e}=window.location,n=new URLSearchParams(e).get("project"),i=P.useCallback(()=>Wn.getProjects().then(f=>f.data),[]),{data:o,loading:c,error:d}=as(i),h=n?o.find(f=>f.id===n):null;return a.jsx(Qs,{loading:c,error:d,children:a.jsx(qb,{project:h,onBack:()=>{t(h?`/projects/${h.id}`:"/writers-room")}})})}function Xb(){const{search:t}=window.location,s=new URLSearchParams(t).get("project"),n=P.useCallback(()=>s?aa.getMoodboardItems(s).then(_=>_.data):Promise.resolve([]),[s]),i=P.useCallback(()=>Wn.getProjects().then(_=>_.data),[]),{data:o,loading:c,error:d,refetch:h}=as(n),{data:f}=as(i),g=s?f.find(_=>_.id===s):f[0],v=s||(g==null?void 0:g.id)||"",j=_=>A(null,null,function*(){try{yield aa.deleteMoodboardItem(_),h(),console.log("Moodboard item deleted:",_)}catch(E){console.error("Failed to delete moodboard item:",E)}});return a.jsx(Qs,{loading:c,error:d,onRetry:h,children:a.jsx(Ad,{projectId:v,items:o,onItemDelete:j})})}function Yb(){const t=cs(),e=P.useCallback(()=>_f.getFreelancers().then(c=>c.data),[]),{data:s,loading:n,error:i,refetch:o}=as(e);return a.jsx(Qs,{loading:n,error:i,onRetry:o,children:a.jsx(Ld,{freelancers:s,onSelect:()=>t("/writers-room")})})}function Qb({children:t}){return a.jsx(_c,{children:a.jsxs("div",{className:"w-full h-screen bg-app flex relative overflow-hidden text-ink-primary",children:[a.jsx(Vd,{}),a.jsx("main",{className:"flex-1 ml-72 h-full overflow-y-auto relative z-0",children:t}),a.jsx(Md,{})]})})}function Zb(){const t=P.useCallback(()=>Wn.getProjects().then(o=>o.data),[]),{data:e,loading:s,error:n,refetch:i}=as(t);return a.jsx(Qs,{loading:s,error:n,onRetry:i,children:a.jsx(Gb,{projects:e,onSelect:o=>`/projects/${o.id}`})})}function ex(){return a.jsx(_c,{children:a.jsx(Qb,{children:a.jsxs(Du,{children:[a.jsx(vt,{path:"/",element:a.jsx(Uf,{})}),a.jsx(vt,{path:"/projects",element:a.jsx(Zb,{})}),a.jsx(vt,{path:"/projects/:id",element:a.jsx(Kb,{})}),a.jsx(vt,{path:"/moodboard",element:a.jsx(Xb,{})}),a.jsx(vt,{path:"/freelancers",element:a.jsx(Yb,{})}),a.jsx(vt,{path:"/writers-room",element:a.jsx(Jb,{})}),a.jsx(vt,{path:"*",element:a.jsx(Ou,{to:"/",replace:!0})})]})})})}const tx=P.createContext(void 0),sx=({children:t})=>{const e=Lu(),[s,n]=P.useState([]),i=En(e.pathname),o=Ud(e.pathname),c=Bd(e.pathname);P.useEffect(()=>{const h=$d(e.pathname);n(h)},[e.pathname]);const d={currentRoute:i,breadcrumbs:s,isProjectRoute:o,projectId:c,setBreadcrumbs:n};return a.jsx(tx.Provider,{value:d,children:t})};class nx extends U.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Application Error:",e,s)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-app flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md mx-auto text-center p-8",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h1",{className:"text-xl font-bold text-ink-primary mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-ink-secondary mb-4",children:"We encountered an unexpected error. Please refresh the page or try again later."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:"Refresh Page"}),this.state.error&&a.jsxs("details",{className:"mt-4 text-left",children:[a.jsx("summary",{className:"text-sm text-ink-tertiary cursor-pointer",children:"Error Details"}),a.jsx("pre",{className:"text-xs text-red-600 mt-2 p-2 bg-red-50 rounded overflow-auto",children:this.state.error.toString()})]})]})}):this.props.children}}const rx=U.createContext(void 0),ix=({children:t})=>{const[e,s]=U.useState([]),n=U.useCallback(o=>{var f;const c=Math.random().toString(36).substr(2,9),d=G(M({},o),{id:c});s(g=>[...g,d]);const h=(f=o.duration)!=null?f:5e3;setTimeout(()=>{s(g=>g.filter(v=>v.id!==c))},h)},[]),i=U.useCallback(o=>{s(c=>c.filter(d=>d.id!==o))},[]);return a.jsxs(rx.Provider,{value:{addToast:n,removeToast:i,toasts:e},children:[t,a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(o=>a.jsx("div",{className:`
              px-4 py-3 rounded-lg shadow-lg border max-w-sm
              ${o.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":""}
              ${o.type==="error"?"bg-red-50 border-red-200 text-red-800":""}
              ${o.type==="warning"?"bg-amber-50 border-amber-200 text-amber-800":""}
              ${o.type==="info"?"bg-blue-50 border-blue-200 text-blue-800":""}
            `,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:o.message}),a.jsx("button",{onClick:()=>i(o.id),className:"ml-2 text-current opacity-70 hover:opacity-100",children:"Ã—"})]})},o.id))})]})},ox=U.createContext(void 0),ax=({children:t})=>{const[e,s]=U.useState("light"),n=U.useCallback(()=>{s(i=>i==="light"?"dark":"light")},[]);return U.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark")},[e]),a.jsx(ox.Provider,{value:{theme:e,toggleTheme:n},children:t})},cx=({children:t})=>a.jsx(U.StrictMode,{children:a.jsx(nx,{children:a.jsx(Mu,{children:a.jsx(ax,{children:a.jsx(ix,{children:a.jsx(sx,{children:t})})})})})}),Jl=document.getElementById("root");if(!Jl)throw new Error("Could not find root element to mount to");const lx=id.createRoot(Jl);lx.render(a.jsx(cx,{children:a.jsx(ex,{})}))});export default ux();
