var Vt=Object.defineProperty,Ut=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var De=(r,t,s)=>t in r?Vt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,j=(r,t)=>{for(var s in t||(t={}))st.call(t,s)&&De(r,s,t[s]);if(be)for(var s of be(t))rt.call(t,s)&&De(r,s,t[s]);return r},E=(r,t)=>Ut(r,Bt(t));var Y=(r,t)=>{var s={};for(var n in r)st.call(r,n)&&t.indexOf(n)<0&&(s[n]=r[n]);if(r!=null&&be)for(var n of be(r))t.indexOf(n)<0&&rt.call(r,n)&&(s[n]=r[n]);return s};var Kt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var U=(r,t,s)=>De(r,typeof t!="symbol"?t+"":t,s);var D=(r,t,s)=>new Promise((n,a)=>{var o=c=>{try{h(s.next(c))}catch(i){a(i)}},l=c=>{try{h(s.throw(c))}catch(i){a(i)}},h=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,l);h((s=s.apply(r,t)).next())});import{j as e}from"./query-vendor-DMx9jPI6.js";import{b as Ht,g as Wt,R as y,r as u,u as Jt,c as kt,d as St,N as qt,B as Gt}from"./react-vendor-DvXiHf3x.js";import{S as me,H as Yt,T as Qt,I as xe,F as Xt,C as Zt,X as es,P as ue,a as at,L as Pe,W as ts,b as ss,R as Te,c as Re,U as Le,E as nt,A as ot,d as rs,e as Oe,B as it,f as as,M as ns,g as lt,h as fe,i as os,j as ct,G as is,k as Ct,l as ls,m as cs,n as ds,o as us,p as ms,q as hs,r as dt,s as xs,t as fs,u as ps,v as bs,w as gs}from"./ui-vendor-B2RwJXO1.js";var Mr=Kt(ee=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var ge={},ut;function ys(){if(ut)return ge;ut=1;var r=Ht();return ge.createRoot=r.createRoot,ge.hydrateRoot=r.hydrateRoot,ge}var vs=ys();const js=Wt(vs),ze="vvsi7vSuagqV4U4vqcJ8-wgX6bmH_LhbeAwMgbix6VY",ws="https://api.unsplash.com";function ye(){return!!ze}function mt(r,t=12,s=1,n,a){return D(this,null,function*(){try{const o=new URLSearchParams({query:r,per_page:t.toString(),page:s.toString()});n&&o.set("color",n),a&&o.set("orientation",a);const l=yield fetch(`${ws}/search/photos?${o.toString()}`,{headers:{Authorization:`Client-ID ${ze}`}});if(!l.ok)throw new Error(`Unsplash API error: ${l.status} ${l.statusText}`);return yield l.json()}catch(o){throw console.error("Failed to fetch similar images:",o),o}})}function Ns(r){return D(this,null,function*(){var t;if(!((t=r.links)!=null&&t.download_location)){console.warn("No download_location available for tracking");return}try{yield fetch(r.links.download_location,{headers:{Authorization:`Client-ID ${ze}`}})}catch(s){console.error("Failed to track download:",s)}})}const ks=2800,Ve=()=>{const[r,t]=y.useState([]),s=y.useRef({}),n=y.useCallback((a,o="info")=>{const l=Date.now();t(c=>[...c,{id:l,message:a,type:o}]);const h=setTimeout(()=>{t(c=>c.filter(i=>i.id!==l)),delete s.current[l]},ks);s.current[l]=h},[]);return y.useEffect(()=>{const a=s.current;return()=>{Object.values(a).forEach(clearTimeout)}},[]),{toasts:r,addToast:n}},Ss="https://your-firebase-domain.web.app/api/v1",Cs=1e4;function At(r,t){if(!r||typeof r!="string"||r.trim().length===0)throw new Error(`${t} must be a non-empty string`)}function Et(s){return D(this,arguments,function*(r,t={}){const n=new AbortController,a=setTimeout(()=>n.abort(),Cs);try{const o=yield fetch(`${Ss}${r}`,j({headers:j({"Content-Type":"application/json"},t.headers),signal:n.signal},t));if(!o.ok){const l=yield o.text().catch(()=>"");throw new Error(`Request failed (${o.status} ${o.statusText}): ${l||"Unknown error"}`)}return o.status===204?void 0:yield o.json()}catch(o){throw o instanceof Error&&o.name==="AbortError"?new Error("Request timed out"):(console.error("API Request failed:",o),o)}finally{clearTimeout(a)}})}function As(r,t){return D(this,null,function*(){At(r,"projectId");const s={projectId:r,unsplashId:t.id,imageUrl:t.urls.regular,photographerName:t.user.name,photographerUrl:t.user.links.html,description:t.description,altDescription:t.alt_description,color:t.color,width:t.width,height:t.height};yield Et(`/moodboard/${r}/from-unsplash`,{method:"POST",body:JSON.stringify(s)})})}function Es(r,t){return D(this,null,function*(){At(r,"itemId"),yield Et(`/moodboard/${r}/favorite`,{method:"PATCH",body:JSON.stringify({isFavorite:t})})})}const Ue="moodboard_recent_searches",Ds=10;function de(){try{const r=localStorage.getItem(Ue);return r?JSON.parse(r).map(s=>s.query):[]}catch(r){return console.error("Failed to read recent searches:",r),[]}}function ht(r){if(r.trim())try{const s=de().filter(l=>l.toLowerCase()!==r.toLowerCase()),o=[r,...s].slice(0,Ds).map(l=>({query:l,timestamp:Date.now()}));localStorage.setItem(Ue,JSON.stringify(o))}catch(t){console.error("Failed to save recent search:",t)}}function Ts(r){try{const n=de().filter(a=>a!==r).map(a=>({query:a,timestamp:Date.now()}));localStorage.setItem(Ue,JSON.stringify(n))}catch(t){console.error("Failed to remove recent search:",t)}}const Z=({children:r,className:t="",noPadding:s=!1,hoverable:n=!1,glass:a=!1,onClick:o})=>e.jsx("div",{className:`
        bg-surface
        rounded-[24px]
        shadow-ambient
        overflow-hidden
        transition-all duration-200
        ${a?"glass":""}
        ${n?"hover:-translate-y-0.5 hover:shadow-float cursor-pointer":""}
        ${t}
      `,onClick:o,children:e.jsx("div",{className:s?"":"p-6",children:r})});var Rs=r=>r.type==="checkbox",he=r=>r instanceof Date,Be=r=>r==null;const Dt=r=>typeof r=="object";var ne=r=>!Be(r)&&!Array.isArray(r)&&Dt(r)&&!he(r),Is=r=>ne(r)&&r.target?Rs(r.target)?r.target.checked:r.target.value:r,Ps=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,Ls=(r,t)=>r.has(Ps(t)),$s=r=>{const t=r.constructor&&r.constructor.prototype;return ne(t)&&t.hasOwnProperty("isPrototypeOf")},_s=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Tt(r){let t;const s=Array.isArray(r),n=typeof FileList!="undefined"?r instanceof FileList:!1;if(r instanceof Date)t=new Date(r);else if(!(_s&&(r instanceof Blob||n))&&(s||ne(r)))if(t=s?[]:Object.create(Object.getPrototypeOf(r)),!s&&!$s(r))t=r;else for(const a in r)r.hasOwnProperty(a)&&(t[a]=Tt(r[a]));else return r;return t}var Rt=r=>/^\w*$/.test(r),$e=r=>r===void 0,Fs=r=>Array.isArray(r)?r.filter(Boolean):[],It=r=>Fs(r.replace(/["|']|\]/g,"").split(/\.|\[/)),K=(r,t,s)=>{if(!t||!ne(r))return s;const n=(Rt(t)?[t]:It(t)).reduce((a,o)=>Be(a)?a:a[o],r);return $e(n)||n===r?$e(r[t])?s:r[t]:n},Ie=r=>typeof r=="boolean",xt=(r,t,s)=>{let n=-1;const a=Rt(t)?[t]:It(t),o=a.length,l=o-1;for(;++n<o;){const h=a[n];let c=s;if(n!==l){const i=r[h];c=ne(i)||Array.isArray(i)?i:isNaN(+a[n+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;r[h]=c,r=r[h]}};const ft={BLUR:"blur",CHANGE:"change"},pt={all:"all"},Pt=y.createContext(null);Pt.displayName="HookFormContext";const Ke=()=>y.useContext(Pt);var Ms=(r,t,s,n=!0)=>{const a={defaultValues:t._defaultValues};for(const o in r)Object.defineProperty(a,o,{get:()=>{const l=o;return t._proxyFormState[l]!==pt.all&&(t._proxyFormState[l]=!n||pt.all),s&&(s[l]=!0),r[l]}});return a};const Lt=typeof window!="undefined"?y.useLayoutEffect:y.useEffect;function Os(r){const t=Ke(),{control:s=t.control,disabled:n,name:a,exact:o}=r||{},[l,h]=y.useState(s._formState),c=y.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Lt(()=>s._subscribe({name:a,formState:c.current,exact:o,callback:i=>{!n&&h(j(j({},s._formState),i))}}),[a,n,o]),y.useEffect(()=>{c.current.isValid&&s._setValid(!0)},[s]),y.useMemo(()=>Ms(l,s,c.current,!1),[l,s])}var zs=r=>typeof r=="string",bt=(r,t,s,n,a)=>zs(r)?K(s,r,a):Array.isArray(r)?r.map(o=>K(s,o)):s,gt=r=>Be(r)||!Dt(r);function je(r,t,s=new WeakSet){if(gt(r)||gt(t))return Object.is(r,t);if(he(r)&&he(t))return r.getTime()===t.getTime();const n=Object.keys(r),a=Object.keys(t);if(n.length!==a.length)return!1;if(s.has(r)||s.has(t))return!0;s.add(r),s.add(t);for(const o of n){const l=r[o];if(!a.includes(o))return!1;if(o!=="ref"){const h=t[o];if(he(l)&&he(h)||ne(l)&&ne(h)||Array.isArray(l)&&Array.isArray(h)?!je(l,h,s):!Object.is(l,h))return!1}}return!0}function Vs(r){const t=Ke(),{control:s=t.control,name:n,defaultValue:a,disabled:o,exact:l,compute:h}=r||{},c=y.useRef(a),i=y.useRef(h),v=y.useRef(void 0),g=y.useRef(s),p=y.useRef(n);i.current=h;const[d,m]=y.useState(()=>{const b=s._getWatch(n,c.current);return i.current?i.current(b):b}),f=y.useCallback(b=>{const T=bt(n,s._names,b||s._formValues,!1,c.current);return i.current?i.current(T):T},[s._formValues,s._names,n]),w=y.useCallback(b=>{if(!o){const T=bt(n,s._names,b||s._formValues,!1,c.current);if(i.current){const A=i.current(T);je(A,v.current)||(m(A),v.current=A)}else m(T)}},[s._formValues,s._names,o,n]);Lt(()=>((g.current!==s||!je(p.current,n))&&(g.current=s,p.current=n,w()),s._subscribe({name:n,formState:{values:!0},exact:l,callback:b=>{w(b.values)}})),[s,l,n,w]),y.useEffect(()=>s._removeUnmounted());const S=g.current!==s,I=p.current,P=y.useMemo(()=>{if(o)return null;const b=!S&&!je(I,n);return S||b?f():null},[o,S,n,I,f]);return P!==null?P:d}function $t(r){const t=Ke(),{name:s,disabled:n,control:a=t.control,shouldUnregister:o,defaultValue:l,exact:h=!0}=r,c=Ls(a._names.array,s),i=y.useMemo(()=>K(a._formValues,s,K(a._defaultValues,s,l)),[a,s,l]),v=Vs({control:a,name:s,defaultValue:i,exact:h}),g=Os({control:a,name:s,exact:h}),p=y.useRef(r),d=y.useRef(void 0),m=y.useRef(a.register(s,j(E(j({},r.rules),{value:v}),Ie(r.disabled)?{disabled:r.disabled}:{})));p.current=r;const f=y.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!K(g.errors,s)},isDirty:{enumerable:!0,get:()=>!!K(g.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!K(g.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!K(g.validatingFields,s)},error:{enumerable:!0,get:()=>K(g.errors,s)}}),[g,s]),w=y.useCallback(b=>m.current.onChange({target:{value:Is(b),name:s},type:ft.CHANGE}),[s]),S=y.useCallback(()=>m.current.onBlur({target:{value:K(a._formValues,s),name:s},type:ft.BLUR}),[s,a._formValues]),I=y.useCallback(b=>{const T=K(a._fields,s);T&&b&&(T._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:A=>b.setCustomValidity(A),reportValidity:()=>b.reportValidity()})},[a._fields,s]),P=y.useMemo(()=>E(j({name:s,value:v},Ie(n)||g.disabled?{disabled:g.disabled||n}:{}),{onChange:w,onBlur:S,ref:I}),[s,n,g.disabled,w,S,I,v]);return y.useEffect(()=>{const b=a._options.shouldUnregister||o,T=d.current;T&&T!==s&&!c&&a.unregister(T),a.register(s,j(j({},p.current.rules),Ie(p.current.disabled)?{disabled:p.current.disabled}:{}));const A=(L,O)=>{const V=K(a._fields,L);V&&V._f&&(V._f.mount=O)};if(A(s,!0),b){const L=Tt(K(a._options.defaultValues,s,p.current.defaultValue));xt(a._defaultValues,s,L),$e(K(a._formValues,s))&&xt(a._formValues,s,L)}return!c&&a.register(s),d.current=s,()=>{(c?b&&!a._state.action:b)?a.unregister(s):A(s,!1)}},[s,a,c,o]),y.useEffect(()=>{a._setDisabledField({disabled:n,name:s})},[n,s,a]),y.useMemo(()=>({field:P,formState:g,fieldState:f}),[P,g,f])}const pe=y.forwardRef((v,i)=>{var g=v,{label:r,error:t,helperText:s,icon:n,variant:a="primary",size:o="md",disabled:l=!1,className:h=""}=g,c=Y(g,["label","error","helperText","icon","variant","size","disabled","className"]);const p="w-full rounded-[24px] text-sm font-medium outline-none transition-all focus:ring-2 focus:ring-offset-2 focus:ring-primary/40",d={primary:`bg-surface text-ink-primary placeholder-ink-tertiary ${t?"focus:ring-state-danger/40 focus:bg-danger-bg":"focus:bg-subtle focus:ring-primary/40"}`,secondary:`bg-subtle text-ink-primary placeholder-ink-tertiary ${t?"focus:ring-state-danger/40":"focus:bg-surface focus:ring-primary/40"}`},m={sm:"px-3 py-2 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-5 py-3.5 text-base"},f=l?"opacity-50 cursor-not-allowed bg-subtle":"",w=`${p} ${d[a]} ${m[o]} ${f} ${h}`;return e.jsxs("div",{className:"flex flex-col gap-2",children:[r&&e.jsxs("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide",children:[r,c.required&&e.jsx("span",{className:"text-state-danger ml-1",children:"*"})]}),e.jsxs("div",{className:"relative flex items-center",children:[n&&e.jsx("div",{className:"absolute left-4 text-ink-tertiary pointer-events-none",children:n}),e.jsx("input",j({ref:i,className:`${w} ${n?"pl-10":""}`,disabled:l,"aria-invalid":t?"true":"false","aria-describedby":t?`${c.name}-error`:s?`${c.name}-helper`:void 0},c))]}),t&&e.jsx("p",{id:`${c.name}-error`,className:"text-xs font-medium text-state-danger",children:t}),s&&!t&&e.jsx("p",{id:`${c.name}-helper`,className:"text-xs text-ink-tertiary font-medium",children:s})]})});pe.displayName="Input";const Us=y.forwardRef((c,h)=>{var i=c,{label:r,helperText:t,icon:s,variant:n,size:a,inputProps:o}=i,l=Y(i,["label","helperText","icon","variant","size","inputProps"]);var w;const{field:v,fieldState:g}=$t(l),f=v,{ref:p}=f,d=Y(f,["ref"]),m=S=>{typeof h=="function"?h(S):h&&(h.current=S),p(S)};return e.jsx(pe,E(j(j({ref:m},d),o),{label:r,error:(w=g.error)==null?void 0:w.message,helperText:t,icon:s,variant:n,size:a}))});Us.displayName="InputField";const yt=({projectId:r,items:t=[],onItemDelete:s,onSemanticSearch:n,onAddUnsplashImage:a})=>{var Je,qe,Ge,Ye,Qe,Xe,Ze,et,tt;const[o,l]=u.useState("uploads"),[h,c]=u.useState(""),[i,v]=u.useState([]),[g,p]=u.useState(null),[d,m]=u.useState(t),[f,w]=u.useState(!1),{addToast:S}=Ve(),[I,P]=u.useState(""),[b,T]=u.useState([]),[A,L]=u.useState(!1),[O,V]=u.useState(null),[k,M]=u.useState(null),[_,J]=u.useState({total:0,total_pages:0,page:1,per_page:24}),[q,G]=u.useState([]),[B,X]=u.useState({});y.useEffect(()=>{m(t)},[t]),y.useEffect(()=>{o==="unsplash"&&G(de())},[o]);const te=u.useMemo(()=>{const x=new Set;return t.forEach(N=>{N.tags.forEach(F=>x.add(F)),N.moods.forEach(F=>x.add(F))}),Array.from(x).sort()},[t]),Ae=x=>D(null,null,function*(){if(c(x),x.trim()){w(!0);try{const N=(yield n==null?void 0:n(x))||t;m(N)}finally{w(!1)}}else C(x,i)}),R=x=>{const N=i.includes(x)?i.filter(F=>F!==x):[...i,x];v(N),C(h,N)},C=(x,N)=>{let F=t;N.length>0&&(F=F.filter(ie=>N.some(le=>ie.tags.includes(le)||ie.moods.includes(le)))),m(F)},$=(x=1)=>D(null,null,function*(){if(I.trim()){if(!ye()){const N="Unsplash search is disabled: add VITE_UNSPLASH_ACCESS_KEY to your environment.";M(N),S(N);return}L(!0),M(null);try{const N=yield mt(I,_.per_page,x,B.color,B.orientation);T(N.results),J({total:N.total,total_pages:N.total_pages,page:x,per_page:_.per_page}),ht(I),G(de())}catch(N){const F=N instanceof Error?N.message:"Unsplash search failed. Check API key or network.";console.error("Unsplash search failed:",N),M(F),S(F)}finally{L(!1)}}}),z=x=>D(null,null,function*(){x.preventDefault(),yield $(1)}),H=x=>D(null,null,function*(){if(P(x),L(!0),M(null),!ye()){const N="Unsplash search is disabled: add VITE_UNSPLASH_ACCESS_KEY to your environment.";M(N),S(N),L(!1);return}try{const N=yield mt(x,_.per_page,1,B.color,B.orientation);T(N.results),J({total:N.total,total_pages:N.total_pages,page:1,per_page:_.per_page}),ht(x),G(de())}catch(N){const F=N instanceof Error?N.message:"Unsplash search failed. Check API key or network.";console.error("Unsplash search failed:",N),M(F),S(F)}finally{L(!1)}}),Ee=(x,N)=>{N.stopPropagation(),Ts(x),G(de())},We=x=>D(null,null,function*(){try{yield Ns(x),yield As(r,x),a&&(yield a(x)),S("Unsplash image added to moodboard successfully!")}catch(N){console.error("Failed to add Unsplash image:",N),S("Failed to add Unsplash image. Please try again.")}}),zt=(x,N)=>D(null,null,function*(){const F=!N;try{yield Es(x,F),m(ie=>ie.map(le=>le.id===x?E(j({},le),{isFavorite:F}):le))}catch(ie){console.error("Failed to toggle favorite:",ie)}});return e.jsx("div",{className:"w-full h-full bg-app",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-ink-primary mb-2",children:"Moodboard"}),e.jsx("p",{className:"text-ink-secondary",children:"Visual inspiration with AI semantic tagging and Unsplash discovery"})]}),e.jsx("div",{className:"mb-6 border-b border-border-subtle",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("button",{onClick:()=>l("uploads"),className:`pb-3 px-1 font-medium transition-all ${o==="uploads"?"text-primary border-b-2 border-primary":"text-ink-secondary hover:text-ink-primary"}`,"aria-label":"View uploaded images",children:["My Images (",t.length,")"]}),e.jsx("button",{onClick:()=>l("unsplash"),className:`pb-3 px-1 font-medium transition-all ${o==="unsplash"?"text-primary border-b-2 border-primary":"text-ink-secondary hover:text-ink-primary"}`,"aria-label":"Discover Unsplash images",children:"Discover"})]})}),o==="uploads"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 space-y-6",children:[e.jsx(pe,{placeholder:"Search visuals semantically... (e.g., 'melancholy summer' or 'cinematic blue hour')",icon:e.jsx(me,{size:18}),value:h,onChange:x=>Ae(x.target.value)}),te.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide mb-3",children:"Filter by Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:te.map(x=>e.jsx("button",{onClick:()=>R(x),className:`px-3 py-1.5 rounded-[24px] text-xs font-medium transition-all ${i.includes(x)?"bg-primary text-white":"bg-subtle text-ink-secondary hover:bg-surface"}`,children:x},x))})]})]}),f&&e.jsx("p",{className:"text-xs text-ink-tertiary mb-3",children:"Searching visuals..."}),d.length>0?e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6",children:d.map(x=>e.jsxs(Z,{className:"mb-6 p-0 overflow-hidden cursor-pointer hover:shadow-2xl transition-shadow duration-300 break-inside-avoid group",onClick:()=>p(x.id),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.url,alt:x.tags.join(", ")||"Moodboard item",className:"w-full h-auto object-cover"}),e.jsx("button",{onClick:N=>{var F;N.stopPropagation(),zt(x.id,(F=x.isFavorite)!=null?F:!1)},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Toggle favorite",children:e.jsx(Yt,{size:18,className:`transition-colors ${x.isFavorite?"text-state-danger fill-current":"text-white"}`})}),e.jsx("button",{onClick:N=>{N.stopPropagation(),s&&s(x.id)},className:"absolute top-2 left-2 p-2 rounded-full bg-state-danger hover:bg-state-danger/80 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Delete item",children:e.jsx(Qt,{size:16,className:"text-white"})})]}),e.jsxs("div",{className:"p-4",children:[x.colors.length>0&&e.jsx("div",{className:"flex gap-1 mb-2",children:x.colors.slice(0,3).map((N,F)=>e.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg border border-white/30",style:{backgroundColor:N},title:N},F))}),e.jsxs("div",{className:"space-y-2",children:[x.moods.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:x.moods.map(N=>e.jsx("span",{className:"px-2 py-0.5 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:N},N))}),x.shotType&&e.jsxs("p",{className:"text-xs text-ink-tertiary",children:["Shot Type: ",e.jsx("strong",{children:x.shotType})]})]})]})]},x.id))}):e.jsxs(Z,{className:"text-center py-12",children:[e.jsx(xe,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),e.jsx("p",{className:"text-ink-secondary",children:t.length===0?"No mood board items yet. Upload images from the Project Dashboard or discover from Unsplash!":"No items match your search. Try different keywords."})]})]}),o==="unsplash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[!ye()&&e.jsx(Z,{className:"mb-4 bg-amber-50 border-amber-200 text-amber-900",children:e.jsxs("p",{className:"text-sm font-medium",children:["Unsplash is not configured. Set ",e.jsx("code",{children:"VITE_UNSPLASH_ACCESS_KEY"})," in your environment to enable search and downloads."]})}),e.jsx("form",{onSubmit:z,className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pe,{placeholder:"Search Unsplash... (e.g., 'mountain landscape', 'minimal architecture')",icon:e.jsx(me,{size:18}),value:I,onChange:x=>P(x.target.value),className:"flex-1"}),e.jsx("button",{type:"submit",disabled:A||!I.trim()||!ye(),className:"px-6 py-2 bg-primary text-white rounded-[16px] font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:A?"Searching...":"Search"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Xt,{size:16,className:"text-ink-tertiary"}),e.jsxs("select",{value:B.color||"",onChange:x=>X(E(j({},B),{color:x.target.value||void 0})),className:"px-3 py-1.5 rounded-[12px] bg-subtle border border-border-subtle text-xs font-medium text-ink-secondary hover:bg-surface transition-colors",title:"Filter by color",children:[e.jsx("option",{value:"",children:"All Colors"}),e.jsx("option",{value:"black_and_white",children:"Black & White"}),e.jsx("option",{value:"black",children:"Black"}),e.jsx("option",{value:"white",children:"White"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"magenta",children:"Magenta"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"blue",children:"Blue"})]}),e.jsxs("select",{value:B.orientation||"",onChange:x=>X(E(j({},B),{orientation:x.target.value||void 0})),className:"px-3 py-1.5 rounded-[12px] bg-subtle border border-border-subtle text-xs font-medium text-ink-secondary hover:bg-surface transition-colors",title:"Filter by orientation",children:[e.jsx("option",{value:"",children:"Any Orientation"}),e.jsx("option",{value:"landscape",children:"Landscape"}),e.jsx("option",{value:"portrait",children:"Portrait"}),e.jsx("option",{value:"squarish",children:"Square"})]}),(B.color||B.orientation)&&e.jsx("button",{onClick:()=>X({}),className:"px-3 py-1.5 rounded-[12px] bg-state-danger/10 text-state-danger text-xs font-medium hover:bg-state-danger/20 transition-colors",children:"Clear Filters"})]}),e.jsxs("p",{className:"text-xs text-ink-tertiary mt-2",children:["Photos from"," ",e.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Unsplash"})]}),k&&e.jsx("p",{className:"text-xs text-state-danger mt-2",children:k})]}),q.length>0&&b.length===0&&!A&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Zt,{size:16,className:"text-ink-tertiary"}),e.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide",children:"Recent Searches"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(x=>e.jsxs("button",{onClick:()=>H(x),className:"group px-3 py-1.5 rounded-[24px] bg-subtle text-ink-secondary hover:bg-surface hover:text-ink-primary text-xs font-medium transition-all flex items-center gap-2",children:[e.jsx("span",{children:x}),e.jsx(es,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity hover:text-state-danger",onClick:N=>Ee(x,N)})]},x))})]}),A&&e.jsx("p",{className:"text-xs text-ink-tertiary mb-3",children:"Loading images from Unsplash..."}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-ink-secondary",children:[e.jsxs("span",{children:["Page ",_.page," of ",_.total_pages," â€¢ ",_.total," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$(Math.max(1,_.page-1)),disabled:A||_.page<=1,className:"px-3 py-1.5 rounded-[12px] border border-border-subtle text-xs font-semibold disabled:opacity-50",children:"Prev"}),e.jsx("button",{onClick:()=>$(Math.min(_.total_pages||1,_.page+1)),disabled:A||!_.total_pages||_.page>=_.total_pages,className:"px-3 py-1.5 rounded-[12px] border border-border-subtle text-xs font-semibold disabled:opacity-50",children:"Next"})]})]}),e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6",children:b.map(x=>e.jsxs("div",{className:"break-inside-avoid mb-6 group cursor-pointer",onClick:()=>V(x.id),children:[e.jsxs("div",{className:"relative rounded-[24px] overflow-hidden shadow-ambient hover:shadow-float transition-all",children:[e.jsx("img",{src:x.urls.regular,alt:x.alt_description||x.description||"Unsplash image",className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all rounded-[24px] flex items-end justify-between p-4 opacity-0 group-hover:opacity-100",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("p",{className:"text-white text-xs mb-1 truncate",children:["Photo by"," ",e.jsx("a",{href:x.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:underline",onClick:N=>N.stopPropagation(),children:x.user.name})]})}),e.jsx("button",{onClick:N=>{N.stopPropagation(),We(x)},className:"p-2 rounded-[12px] bg-primary/80 text-white hover:bg-primary transition-colors ml-2","aria-label":"Add to moodboard",title:"Add to moodboard",children:e.jsx(ue,{size:16})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-xs text-ink-tertiary",children:["by"," ",e.jsx("a",{href:x.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"text-ink-secondary hover:text-ink-primary hover:underline",children:x.user.name})]})})]},x.id))})]}):!A&&_.total_pages>0?e.jsxs(Z,{className:"text-center py-12",children:[e.jsx(me,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),e.jsx("p",{className:"text-ink-secondary mb-2",children:"No results on this page. Try another page or new search."})]}):A?null:e.jsxs(Z,{className:"text-center py-12",children:[e.jsx(me,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),e.jsx("p",{className:"text-ink-secondary mb-2",children:I?"No results found. Try a different search term.":"Search for inspiring images from Unsplash"}),e.jsx("p",{className:"text-xs text-ink-tertiary",children:'Try searches like "modern workspace", "nature patterns", or "urban photography"'})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>p(null),children:e.jsxs(Z,{className:"max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>p(null),className:"float-right p-2 hover:bg-subtle rounded-[16px] transition-colors","aria-label":"Close modal",children:e.jsx(at,{size:20})}),d.find(x=>x.id===g)&&e.jsxs("div",{children:[e.jsx("img",{src:(Je=d.find(x=>x.id===g))==null?void 0:Je.url,alt:"Detail",className:"w-full rounded-[24px] mb-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-4",children:"Tags & Metadata"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-ink-secondary mb-2",children:"Visual Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(qe=d.find(x=>x.id===g))==null?void 0:qe.tags.map(x=>e.jsx("span",{className:"px-3 py-1 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:x},x))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-ink-secondary mb-2",children:"Moods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(Ge=d.find(x=>x.id===g))==null?void 0:Ge.moods.map(x=>e.jsx("span",{className:"px-3 py-1 rounded-[12px] bg-edge-teal/20 text-edge-teal text-xs font-medium",children:x},x))})]})]})]})]})]})}),O&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>V(null),children:e.jsxs(Z,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>V(null),className:"float-right p-2 hover:bg-subtle rounded-[16px] transition-colors","aria-label":"Close modal",children:e.jsx(at,{size:20})}),b.find(x=>x.id===O)&&e.jsxs("div",{children:[e.jsx("img",{src:(Ye=b.find(x=>x.id===O))==null?void 0:Ye.urls.regular,alt:((Qe=b.find(x=>x.id===O))==null?void 0:Qe.alt_description)||"Unsplash image",className:"w-full rounded-[24px] mb-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-2",children:((Xe=b.find(x=>x.id===O))==null?void 0:Xe.description)||((Ze=b.find(x=>x.id===O))==null?void 0:Ze.alt_description)||"Untitled"}),e.jsxs("p",{className:"text-sm text-ink-secondary mb-4",children:["Photo by"," ",e.jsx("a",{href:(et=b.find(x=>x.id===O))==null?void 0:et.user.links.html,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:(tt=b.find(x=>x.id===O))==null?void 0:tt.user.name})," ","on"," ",e.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Unsplash"})]}),e.jsxs("button",{onClick:()=>{const x=b.find(N=>N.id===O);x&&(We(x),V(null))},className:"px-6 py-3 bg-primary text-white rounded-[16px] font-medium hover:bg-primary/90 transition-all inline-flex items-center gap-2",children:[e.jsx(ue,{size:18}),"Add to Moodboard"]})]})]})]})})]})})};function He(r,t){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>r(...n),t)}}const re=class re{constructor(t={}){U(this,"drafts",new Map);U(this,"versions",new Map);U(this,"autoSaveTimers",new Map);U(this,"options");U(this,"listeners",new Map);U(this,"storageKey","studio_roster_drafts");U(this,"versionStorageKey","studio_roster_versions");U(this,"triggerAutoSave",He(t=>{this.performAutoSave(t)},this.options.debounceMs));this.options=j({autoSaveInterval:3e4,maxDrafts:50,enableVersioning:!0,maxVersions:10,debounceMs:2e3,enableEncryption:!1},t),this.loadDraftsFromStorage(),this.loadVersionsFromStorage()}static getInstance(t){return re.instance||(re.instance=new re(t)),re.instance}createDraft(o,l,h){return D(this,arguments,function*(t,s,n,a={}){const c={id:t,type:s,content:this.serializeContent(n),metadata:j({title:a.title||"Untitled",projectId:a.projectId,userId:a.userId,lastModified:new Date,version:1,size:this.calculateSize(n),tags:a.tags||[]},a),status:"draft",autoSaveEnabled:!0};return this.drafts.set(t,c),this.saveDraftToStorage(t),this.notifyListeners(t,c),c.autoSaveEnabled&&this.startAutoSave(t),c})}updateDraft(t,s,n){return D(this,null,function*(){const a=this.drafts.get(t);if(!a)throw new Error(`Draft with id ${t} not found`);return this.options.enableVersioning&&(yield this.createVersion(t,`Auto-save before update to v${a.metadata.version+1}`)),a.content=this.serializeContent(s),a.metadata=E(j(j({},a.metadata),n),{lastModified:new Date,version:a.metadata.version+1,size:this.calculateSize(s)}),a.status="draft",this.drafts.set(t,a),this.saveDraftToStorage(t),this.notifyListeners(t,a),a.autoSaveEnabled&&this.triggerAutoSave(t),a})}saveDraft(t){return D(this,null,function*(){const s=this.drafts.get(t);if(!s)throw new Error(`Draft with id ${t} not found`);s.status="saving",this.notifyListeners(t,s);try{return yield this.performSave(s),s.status="saved",s.lastSaved=new Date,delete s.error,this.drafts.set(t,s),this.saveDraftToStorage(t),this.notifyListeners(t,s),s}catch(n){throw s.status="error",s.error=n instanceof Error?n.message:"Unknown error",this.drafts.set(t,s),this.notifyListeners(t,s),n}})}getDraft(t){return this.drafts.get(t)}getAllDrafts(){return Array.from(this.drafts.values()).sort((t,s)=>s.metadata.lastModified.getTime()-t.metadata.lastModified.getTime())}getDraftsByType(t){return this.getAllDrafts().filter(s=>s.type===t)}getDraftsByProject(t){return this.getAllDrafts().filter(s=>s.metadata.projectId===t)}getDraftMetadata(){return this.getAllDrafts().map(t=>({id:t.id,title:t.metadata.title||"Untitled",type:t.type,lastModified:t.metadata.lastModified,size:t.metadata.size,status:t.status,hasUnsavedChanges:t.status==="draft",projectId:t.metadata.projectId,version:t.metadata.version}))}deleteDraft(t){return D(this,null,function*(){const s=this.drafts.get(t);s&&(this.stopAutoSave(t),this.drafts.delete(t),this.removeDraftFromStorage(t),this.options.enableVersioning&&(yield this.deleteVersions(t)),this.notifyListeners(t,s))})}toggleAutoSave(t,s){const n=this.drafts.get(t);n&&(n.autoSaveEnabled=s,s?this.startAutoSave(t):this.stopAutoSave(t),this.drafts.set(t,n),this.saveDraftToStorage(t),this.notifyListeners(t,n))}createVersion(t,s){return D(this,null,function*(){const n=this.drafts.get(t);if(!n)throw new Error(`Draft with id ${t} not found`);const a={id:`v${n.metadata.version}_${Date.now()}`,draftId:t,version:n.metadata.version,content:j({},n.content),timestamp:new Date,size:n.metadata.size,checksum:this.calculateChecksum(n.content),description:s},o=this.versions.get(t)||[];return o.push(a),o.length>(this.options.maxVersions||10)&&o.splice(0,o.length-(this.options.maxVersions||10)),this.versions.set(t,o),this.saveVersionsToStorage(t),a})}getVersions(t){return(this.versions.get(t)||[]).sort((s,n)=>n.version-s.version)}restoreVersion(t,s){return D(this,null,function*(){const n=this.versions.get(t);if(!n)throw new Error(`No versions found for draft ${t}`);const a=n.find(l=>l.version===s);if(!a)throw new Error(`Version ${s} not found for draft ${t}`);const o=this.drafts.get(t);if(!o)throw new Error(`Draft with id ${t} not found`);return o.content=j({},a.content),o.metadata.version=a.version,o.metadata.lastModified=new Date,this.drafts.set(t,o),this.saveDraftToStorage(t),this.notifyListeners(t,o),o})}deleteVersions(t){return D(this,null,function*(){this.versions.delete(t),this.removeVersionsFromStorage(t)})}cleanup(){return D(this,null,function*(){const t=this.getAllDrafts();if(t.length>(this.options.maxDrafts||50)){const s=t.slice(this.options.maxDrafts||50);for(const n of s)yield this.deleteDraft(n.id)}for(const[s,n]of this.versions.entries())this.drafts.has(s)||(this.versions.delete(s),this.removeVersionsFromStorage(s))})}subscribe(t,s){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(s),()=>{const n=this.listeners.get(t);n&&(n.delete(s),n.size===0&&this.listeners.delete(t))}}getStorageStats(){const t=this.getAllDrafts(),s=t.reduce((c,i)=>c+i.metadata.size,0),n=Array.from(this.versions.values()).reduce((c,i)=>c+i.length,0),a=t.reduce((c,i)=>(c[i.type]=(c[i.type]||0)+1,c),{}),o=t.map(c=>c.metadata.lastModified),l=o.length>0?new Date(Math.min(...o.map(c=>c.getTime()))):void 0,h=o.length>0?new Date(Math.max(...o.map(c=>c.getTime()))):void 0;return{totalDrafts:t.length,totalVersions:n,totalSize:s,draftsByType:a,oldestDraft:l,newestDraft:h}}saveDraftCompat(t,s){return D(this,null,function*(){yield this.updateDraft(t,s)})}loadDraft(t){const s=this.getDraft(t);return s?s.content:null}startAutoSave(t){this.stopAutoSave(t);const s=setTimeout(()=>{this.performAutoSave(t)},this.options.autoSaveInterval);this.autoSaveTimers.set(t,s)}stopAutoSave(t){const s=this.autoSaveTimers.get(t);s&&(clearTimeout(s),this.autoSaveTimers.delete(t))}performAutoSave(t){return D(this,null,function*(){const s=this.drafts.get(t);if(!(!s||!s.autoSaveEnabled))try{yield this.saveDraft(t)}catch(n){console.warn(`Auto-save failed for draft ${t}:`,n)}})}performSave(t){return D(this,null,function*(){yield new Promise(s=>setTimeout(s,100))})}serializeContent(t){try{return JSON.parse(JSON.stringify(t))}catch(s){return{data:t}}}calculateSize(t){try{return new Blob([JSON.stringify(t)]).size}catch(s){return 0}}calculateChecksum(t){const s=JSON.stringify(t);let n=0;for(let a=0;a<s.length;a++){const o=s.charCodeAt(a);n=(n<<5)-n+o,n=n&n}return Math.abs(n).toString(16)}notifyListeners(t,s){const n=this.listeners.get(t);n&&n.forEach(a=>{try{a(s)}catch(o){console.error("Error in draft listener:",o)}})}saveDraftToStorage(t){var s;try{const n=this.drafts.get(t);if(!n)return;const a=this.getDraftStorage();a[t]=E(j({},n),{metadata:E(j({},n.metadata),{lastModified:n.metadata.lastModified.toISOString()}),lastSaved:(s=n.lastSaved)==null?void 0:s.toISOString()}),localStorage.setItem(this.storageKey,JSON.stringify(a))}catch(n){console.warn("Failed to save draft to storage:",n)}}removeDraftFromStorage(t){try{const s=this.getDraftStorage();delete s[t],localStorage.setItem(this.storageKey,JSON.stringify(s))}catch(s){console.warn("Failed to remove draft from storage:",s)}}saveVersionsToStorage(t){try{const s=this.versions.get(t);if(!s)return;const n=this.getVersionStorage();n[t]=s.map(a=>E(j({},a),{timestamp:a.timestamp.toISOString()})),localStorage.setItem(this.versionStorageKey,JSON.stringify(n))}catch(s){console.warn("Failed to save versions to storage:",s)}}removeVersionsFromStorage(t){try{const s=this.getVersionStorage();delete s[t],localStorage.setItem(this.versionStorageKey,JSON.stringify(s))}catch(s){console.warn("Failed to remove versions from storage:",s)}}getDraftStorage(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):{}}catch(t){return console.warn("Failed to load drafts from storage:",t),{}}}getVersionStorage(){try{const t=localStorage.getItem(this.versionStorageKey);return t?JSON.parse(t):{}}catch(t){return console.warn("Failed to load versions from storage:",t),{}}}loadDraftsFromStorage(){try{const t=this.getDraftStorage();for(const[s,n]of Object.entries(t)){const a=E(j({},n),{metadata:E(j({},n.metadata),{lastModified:new Date(n.metadata.lastModified)}),lastSaved:n.lastSaved?new Date(n.lastSaved):void 0});this.drafts.set(s,a),a.autoSaveEnabled&&this.startAutoSave(s)}}catch(t){console.warn("Failed to load drafts from storage:",t)}}loadVersionsFromStorage(){try{const t=this.getVersionStorage();for(const[s,n]of Object.entries(t)){const a=n.map(o=>E(j({},o),{timestamp:new Date(o.timestamp)}));this.versions.set(s,a)}}catch(t){console.warn("Failed to load versions from storage:",t)}}};U(re,"instance",null);let _e=re;const W=_e.getInstance();function Bs(r,t,s={},n={}){const{enabled:a=!0,interval:o=3e4,debounceMs:l=2e3,maxSize:h=1024*1024,onSave:c,onError:i,onAutoSave:v,onStatusChange:g,enableVersioning:p=!0,maxVersions:d=10}=n,[m,f]=u.useState({draft:null,status:"draft",isDirty:!1,lastSaved:null,error:null,isLoading:!1}),w=u.useRef(s),S=u.useRef({}),I=u.useRef(!1),P=u.useRef(null);u.useEffect(()=>{const R=W.getDraft(r);R?(f(C=>E(j({},C),{draft:R,status:R.status,isDirty:!1,lastSaved:R.lastSaved||null,error:R.error||null})),w.current=R.content):b(s,{})},[r,t]),u.useEffect(()=>W.subscribe(r,C=>{f($=>{const z=E(j({},$),{draft:C,status:C.status,isDirty:C.status==="draft",lastSaved:C.lastSaved||null,error:C.error||null,isLoading:C.status==="saving"});return g&&g(C.status),C.status==="saved"&&c&&c(C),C.status==="error"&&i&&C.error&&i(new Error(C.error)),z})}),[r,c,i,g]),u.useEffect(()=>(a&&!m.isLoading&&(P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{m.isDirty&&!I.current&&L()},o)),()=>{P.current&&clearTimeout(P.current)}),[a,m.isDirty,m.isLoading,o]);const b=u.useCallback((R,C)=>D(null,null,function*(){try{f(H=>E(j({},H),{isLoading:!0,error:null}));const $={autoSaveInterval:a?o:0,enableVersioning:p,maxVersions:d},z=yield W.createDraft(r,t,R,E(j(j({},S.current),C),{title:C.title||`Untitled ${t}`}));return f(H=>E(j({},H),{draft:z,status:z.status,isDirty:!1,lastSaved:z.lastSaved||null,error:null,isLoading:!1})),w.current=R,z}catch($){const z=$ instanceof Error?$.message:"Failed to create draft";throw f(H=>E(j({},H),{error:z,isLoading:!1})),i&&i(new Error(z)),$}}),[r,t,a,o,p,d,i]),T=u.useCallback(He((R,C)=>D(null,null,function*(){if(!m.draft){yield b(R,C);return}const $=JSON.stringify(R).length;if($>h){const z=new Error(`Content size (${$} bytes) exceeds limit (${h} bytes)`);f(H=>E(j({},H),{error:z.message})),i&&i(z);return}w.current=R,C&&(S.current=j(j({},S.current),C));try{yield W.updateDraft(r,R,j(j({},S.current),C))}catch(z){const H=z instanceof Error?z.message:"Failed to update draft";f(Ee=>E(j({},Ee),{error:H})),i&&i(new Error(H))}}),l),[m.draft,r,h,l,i,b]),A=u.useCallback(()=>D(null,null,function*(){if(!m.draft){yield b(w.current,S.current);return}try{I.current=!0,yield W.saveDraft(r),c&&c(m.draft)}catch(R){const C=R instanceof Error?R.message:"Failed to save draft";f($=>E(j({},$),{error:C})),i&&i(new Error(C))}finally{I.current=!1}}),[m.draft,r,c,i,b]),L=u.useCallback(()=>D(null,null,function*(){if(!(!m.draft||!a||I.current))try{const R=yield W.saveDraft(r);v&&v(R)}catch(R){console.warn("Auto-save failed:",R)}}),[m.draft,a,r,v]),O=u.useCallback((R,C)=>D(null,null,function*(){yield b(R,C)}),[b]),V=u.useCallback(()=>D(null,null,function*(){try{yield W.deleteDraft(r),f({draft:null,status:"draft",isDirty:!1,lastSaved:null,error:null,isLoading:!1}),w.current=null,S.current={}}catch(R){const C=R instanceof Error?R.message:"Failed to delete draft";f($=>E(j({},$),{error:C})),i&&i(new Error(C))}}),[r,i]),k=u.useCallback(R=>{m.draft&&W.toggleAutoSave(r,R)},[m.draft,r]),M=u.useCallback(R=>D(null,null,function*(){try{const C=yield W.restoreVersion(r,R);f($=>E(j({},$),{draft:C,status:C.status,isDirty:C.status==="draft",lastSaved:C.lastSaved||null,error:C.error||null})),w.current=C.content}catch(C){const $=C instanceof Error?C.message:"Failed to restore version";f(z=>E(j({},z),{error:$})),i&&i(new Error($))}}),[r,i]),_=u.useCallback(()=>W.getVersions(r),[r]),J=u.useCallback(()=>m.draft?{id:m.draft.id,title:m.draft.metadata.title||"Untitled",type:m.draft.type,lastModified:m.draft.metadata.lastModified,size:m.draft.metadata.size,status:m.draft.status,hasUnsavedChanges:m.draft.status==="draft",projectId:m.draft.metadata.projectId,version:m.draft.metadata.version}:null,[m.draft]),q=u.useCallback(()=>W.getStorageStats(),[]),G=u.useCallback(()=>{f(R=>E(j({},R),{error:null}))},[]),B=u.useCallback(()=>m.draft?JSON.stringify({draft:m.draft,content:w.current,exportedAt:new Date},null,2):null,[m.draft]),X=u.useCallback(R=>D(null,null,function*(){try{const C=JSON.parse(R);return C.draft&&C.content?(yield b(C.content,C.draft.metadata),!0):!1}catch(C){const $="Failed to import draft";return f(z=>E(j({},z),{error:$})),i&&i(new Error($)),!1}}),[b,i]);u.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]);const te=u.useMemo(()=>!1,[]),Ae=u.useMemo(()=>!1,[]);return{draft:m.draft,status:m.status,isDirty:m.isDirty,lastSaved:m.lastSaved,error:m.error,canUndo:te,canRedo:Ae,save:A,update:T,createDraft:O,deleteDraft:V,toggleAutoSave:k,restoreVersion:M,getVersions:_,getMetadata:J,getStats:q,clearError:G,exportDraft:B,importDraft:X}}class Ks{constructor(){U(this,"shortcuts",new Map);U(this,"contextStack",["global"]);U(this,"eventListeners",new Map);U(this,"debugMode",!1)}registerShortcut(t,s="global",n=0){const a=this.shortcuts.get(s)||[],o=a.find(l=>this.isSameShortcut(l.shortcut,t));if(o)if(n>o.priority){const l=a.filter(h=>!this.isSameShortcut(h.shortcut,t));l.push({shortcut:t,priority:n,context:s}),this.shortcuts.set(s,l),this.debugMode&&console.warn(`[KeyboardService] Replaced shortcut ${t.key} in context ${s}`)}else this.debugMode&&console.warn(`[KeyboardService] Ignored conflicting shortcut ${t.key} in context ${s}`);else a.push({shortcut:t,priority:n,context:s}),this.shortcuts.set(s,a);a.sort((l,h)=>h.priority-l.priority)}unregisterShortcut(t,s="global"){const a=(this.shortcuts.get(s)||[]).filter(o=>o.shortcut.key!==t);this.shortcuts.set(s,a)}unregisterContext(t){this.shortcuts.delete(t)}pushContext(t){this.contextStack.push(t),this.debugMode&&console.log(`[KeyboardService] Pushed context: ${t}`,this.contextStack)}popContext(){if(this.contextStack.length>1){const t=this.contextStack.pop();return this.debugMode&&console.log(`[KeyboardService] Popped context: ${t}`,this.contextStack),t}return null}setContext(t){this.contextStack=["global",t],this.debugMode&&console.log(`[KeyboardService] Set context: ${t}`,this.contextStack)}getCurrentContext(){return this.contextStack[this.contextStack.length-1]}toggleShortcut(t,s,n="global"){const o=(this.shortcuts.get(n)||[]).find(l=>l.shortcut.key===t);o&&(o.shortcut.enabled=s)}toggleContext(t,s){(this.shortcuts.get(t)||[]).forEach(a=>{a.shortcut.enabled=s})}isSameShortcut(t,s){return t.key.toLowerCase()===s.key.toLowerCase()&&this.compareModifiers(t.modifiers,s.modifiers)}compareModifiers(t,s){const n=t||{},a=s||{};return(n.ctrl||!1)===(a.ctrl||!1)&&(n.alt||!1)===(a.alt||!1)&&(n.shift||!1)===(a.shift||!1)&&(n.meta||!1)===(a.meta||!1)}static parseShortcutString(t){const s=t.toLowerCase().split("+").map(o=>o.trim()),n=s.pop()||"",a={};return s.forEach(o=>{switch(o){case"ctrl":case"control":a.ctrl=!0;break;case"alt":case"option":a.alt=!0;break;case"shift":a.shift=!0;break;case"cmd":case"command":case"meta":a.meta=!0;break}}),{key:n,modifiers:a}}static formatShortcut(t){var n,a,o,l;const s=[];return(n=t.modifiers)!=null&&n.ctrl&&s.push("Ctrl"),(a=t.modifiers)!=null&&a.alt&&s.push("Alt"),(o=t.modifiers)!=null&&o.shift&&s.push("Shift"),(l=t.modifiers)!=null&&l.meta&&s.push("Cmd"),s.push(t.key.toUpperCase()),s.join("+")}getShortcuts(t){return t?this.shortcuts.get(t)||[]:this.contextStack.map(s=>this.shortcuts.get(s)||[]).flat().sort((s,n)=>n.priority-s.priority)}setDebugMode(t){this.debugMode=t}clear(){this.shortcuts.clear(),this.contextStack=["global"]}getStats(){const t=Array.from(this.shortcuts.values()).reduce((s,n)=>s+n.length,0);return{totalContexts:this.shortcuts.size,totalShortcuts:t,currentContext:this.getCurrentContext(),contextStack:[...this.contextStack]}}}const ae=new Ks;function Hs(){const r=u.useCallback(a=>{ae.pushContext(a)},[]),t=u.useCallback(()=>ae.popContext(),[]),s=u.useCallback(a=>{ae.setContext(a)},[]),n=u.useCallback(()=>ae.getCurrentContext(),[]);return{pushContext:r,popContext:t,setContext:s,getCurrentContext:n}}function Ws(r,t={}){const{context:s=r||"global",priority:n=0,enabled:a=!0,global:o=!1,preventDefault:l=!0,stopPropagation:h=!1,throttleMs:c=100}=t,i=u.useRef(new Map),v=Hs();u.useRef(new Map),u.useEffect(()=>{s&&v.setContext(s)},[s,v]);const g=u.useCallback(He(b=>{const T=ae.getShortcuts(s);for(const A of T){const{shortcut:L}=A;if(!(!L.enabled&&L.enabled!==void 0)&&Js(b,L)){l&&b.preventDefault(),h&&b.stopPropagation();try{L.action()}catch(O){console.error(`Error executing shortcut ${L.id}:`,O)}break}}},c),[s,l,h,c]);u.useEffect(()=>{if(o&&a)return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[o,a,g]);const p=u.useCallback((b,T,A={})=>{const{context:L=s,priority:O=n,enabled:V=a,global:k=o,preventDefault:M=l,stopPropagation:_=h}=A,J=E(j({},b),{action:()=>{var G,B,X,te;const q=new KeyboardEvent("keydown",{key:b.key,ctrlKey:(G=b.modifiers)==null?void 0:G.ctrl,altKey:(B=b.modifiers)==null?void 0:B.alt,shiftKey:(X=b.modifiers)==null?void 0:X.shift,metaKey:(te=b.modifiers)==null?void 0:te.meta});b.action&&b.action(q),T(q)},enabled:V,global:k,preventDefault:M});return ae.registerShortcut(J,L,O),i.current.set(b.id,{shortcut:J,handler:T,cleanup:()=>{ae.unregisterShortcut(b.key,L)}}),()=>{d(b.id)}},[s,n,a,o,l,h]),d=u.useCallback(b=>{const T=i.current.get(b);T&&(T.cleanup&&T.cleanup(),i.current.delete(b))},[]),m=u.useCallback(()=>{i.current.forEach((b,T)=>{b.cleanup&&b.cleanup()}),i.current.clear()},[]),f=u.useCallback(b=>i.current.has(b),[]),w=u.useCallback(()=>Array.from(i.current.values()).map(b=>b.shortcut),[]),S=u.useCallback((b,T)=>{const A=i.current.get(b);if(A&&A.shortcut.enabled!==!1)try{return A.shortcut.action(),T&&A.handler&&A.handler(T),!0}catch(L){return console.error(`Error executing shortcut ${b}:`,L),!1}return!1},[]),I=u.useCallback(b=>{v.setContext(b)},[v]),P=u.useCallback(()=>v.getCurrentContext(),[v]);return u.useEffect(()=>()=>{m()},[m]),{registerShortcut:p,unregisterShortcut:d,unregisterAll:m,isShortcutRegistered:f,getRegisteredShortcuts:w,executeShortcut:S,setContext:I,getCurrentContext:P}}function Js(r,t){if(r.key.toLowerCase()!==t.key.toLowerCase())return!1;const s=t.modifiers||{};return!((s.ctrl||!1)!==r.ctrlKey||(s.alt||!1)!==r.altKey||(s.shift||!1)!==r.shiftKey||(s.meta||!1)!==r.metaKey)}const se=c=>{var i=c,{children:r,variant:t="primary",size:s="md",isLoading:n=!1,leftIcon:a,className:o="",disabled:l}=i,h=Y(i,["children","variant","size","isLoading","leftIcon","className","disabled"]);const v="relative inline-flex items-center justify-center font-medium transition-all duration-200 ease-out rounded-[24px] disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-[0.98]",g={sm:"px-4 py-2 text-sm",md:"px-6 py-2.5 text-sm",lg:"px-8 py-3 text-base"},p={primary:"bg-primary hover:bg-primary-hover text-ink-inverse shadow-ambient hover:shadow-float hover:-translate-y-0.5 focus:ring-primary/40",secondary:"bg-surface text-ink-primary hover:bg-subtle shadow-ambient hover:shadow-float focus:ring-primary/20",ghost:"bg-transparent text-ink-secondary hover:text-ink-primary hover:bg-subtle rounded-[24px]",danger:"bg-state-danger text-white hover:bg-red-700 shadow-ambient hover:shadow-float hover:-translate-y-0.5 focus:ring-red-500/40"};return e.jsxs("button",E(j({className:`
        ${v}
        ${g[s]}
        ${p[t]}
        ${o}
      `,disabled:l||n},h),{children:[n&&e.jsx(Pe,{size:16,className:"animate-spin mr-2"}),!n&&a&&e.jsx("span",{className:"mr-2 opacity-90",children:a}),e.jsx("span",{className:n?"opacity-0":"opacity-100",children:r})]}))},ce=({children:r,className:t="",level:s="md",interactive:n=!1})=>{const a={sm:"p-4",md:"p-6",lg:"p-8"};return e.jsx("div",{className:`
        glass
        rounded-[24px]
        shadow-ambient
        transition-all duration-200
        ${a[s]}
        ${n?"hover:shadow-float hover:-translate-y-0.5 cursor-pointer":""}
        ${t}
      `,children:r})},Se=y.forwardRef((v,i)=>{var g=v,{label:r,error:t,helperText:s,variant:n="primary",size:a="md",disabled:o=!1,className:l="",rows:h=4}=g,c=Y(g,["label","error","helperText","variant","size","disabled","className","rows"]);const p="w-full rounded-[24px] text-sm font-medium outline-none transition-all focus:ring-2 focus:ring-offset-2 focus:ring-primary/40 resize-none",d={primary:`bg-surface text-ink-primary placeholder-ink-tertiary ${t?"focus:ring-state-danger/40 focus:bg-danger-bg":"focus:bg-subtle focus:ring-primary/40"}`,secondary:`bg-subtle text-ink-primary placeholder-ink-tertiary ${t?"focus:ring-state-danger/40":"focus:bg-surface focus:ring-primary/40"}`},m={sm:"px-3 py-2 text-xs",md:"px-4 py-3 text-sm",lg:"px-5 py-4 text-base"},f=o?"opacity-50 cursor-not-allowed bg-subtle":"",w=`${p} ${d[n]} ${m[a]} ${f} ${l}`;return e.jsxs("div",{className:"flex flex-col gap-2",children:[r&&e.jsxs("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide",children:[r,c.required&&e.jsx("span",{className:"text-state-danger ml-1",children:"*"})]}),e.jsx("textarea",j({ref:i,className:w,disabled:o,rows:h,"aria-invalid":t?"true":"false","aria-describedby":t?`${c.name}-error`:s?`${c.name}-helper`:void 0},c)),t&&e.jsx("p",{id:`${c.name}-error`,className:"text-xs font-medium text-state-danger",children:t}),s&&!t&&e.jsx("p",{id:`${c.name}-helper`,className:"text-xs text-ink-tertiary font-medium",children:s})]})});Se.displayName="Textarea";const qs=y.forwardRef((c,h)=>{var i=c,{label:r,helperText:t,variant:s,size:n,rows:a,textareaProps:o}=i,l=Y(i,["label","helperText","variant","size","rows","textareaProps"]);var w;const{field:v,fieldState:g}=$t(l),f=v,{ref:p}=f,d=Y(f,["ref"]),m=S=>{typeof h=="function"?h(S):h&&(h.current=S),p(S)};return e.jsx(Se,E(j(j({ref:m},d),o),{label:r,error:(w=g.error)==null?void 0:w.message,helperText:t,variant:s,size:n,rows:a}))});qs.displayName="TextareaField";const Gs=({projectId:r,projectTitle:t="Untitled Project",brief:s="",onBriefChange:n,onNavigateToWritersRoom:a,onNavigateToMoodboard:o})=>{const[l,h]=u.useState(!1),[c,i]=u.useState(s),[v,g]=u.useState(!0),[p,d]=u.useState(null),[m,f]=u.useState([{id:"1",name:"Sarah Chen",status:"online",lastSeen:new Date},{id:"2",name:"Mike Rodriguez",status:"away",lastSeen:new Date(Date.now()-300*1e3)}]),[w,S]=u.useState([{id:"1",type:"user_joined",user:"Sarah Chen",message:"joined the project",timestamp:new Date(Date.now()-120*1e3)},{id:"2",type:"brief_update",user:"You",message:"updated the creative brief",timestamp:new Date(Date.now()-300*1e3)}]),I=u.useRef(null),P=Bs(`project-dashboard-${r}`,"document",{brief:c,timestamp:new Date},{enabled:!0,interval:3e4,debounceMs:2e3,enableVersioning:!0,maxVersions:10,onSave:k=>{d(new Date),console.log("Project dashboard saved:",k.id)},onError:k=>{console.error("Auto-save error:",k)}});Ws([{key:"s",modifiers:["meta"],handler:k=>{k.preventDefault(),T()},description:"Save brief"},{key:"e",modifiers:["meta"],handler:k=>{k.preventDefault(),l||h(!0)},description:"Edit brief"},{key:"Escape",modifiers:[],handler:k=>{l&&(h(!1),i(s))},description:"Cancel editing"}],{}),u.useEffect(()=>{const k=()=>g(!0),M=()=>g(!1);return window.addEventListener("online",k),window.addEventListener("offline",M),()=>{window.removeEventListener("online",k),window.removeEventListener("offline",M)}},[]),u.useEffect(()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)},[w]);const b=u.useCallback(k=>{const M=E(j({},k),{id:`activity_${Date.now()}`,timestamp:new Date});S(_=>[..._,M])},[]),T=()=>{n==null||n(c),h(!1),b({type:"brief_update",user:"You",message:"updated the creative brief"}),P.save()},A=k=>{i(k),P.update({brief:k,timestamp:new Date})},L=k=>{switch(k){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},O=k=>{switch(k){case"brief_update":return e.jsx(nt,{size:14});case"asset_upload":return e.jsx(xe,{size:14});case"script_generated":return e.jsx(Oe,{size:14});case"user_joined":return e.jsx(rs,{size:14});case"collaboration":return e.jsx(Le,{size:14});default:return e.jsx(ot,{size:14})}},V=k=>{const _=new Date().getTime()-k.getTime(),J=Math.floor(_/(1e3*60)),q=Math.floor(_/(1e3*60*60));return q>0?`${q}h ago`:J>0?`${J}m ago`:"Just now"};return e.jsx("div",{className:"w-full h-full bg-app",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-ink-tertiary uppercase font-bold tracking-widest mb-2",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Projects"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-ink-primary",children:t})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h1",{className:"text-4xl font-bold text-ink-primary",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[v?e.jsx(ts,{size:16,className:"text-green-500"}):e.jsx(ss,{size:16,className:"text-red-500"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${v?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v?"Online":"Offline"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-ink-secondary",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle font-semibold text-ink-primary",children:"Status: Active"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle text-ink-primary",children:"Due: TBD"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-subtle border border-border-subtle text-ink-primary",children:"Owner: Creative"}),e.jsxs("span",{className:`px-3 py-1 rounded-full border text-xs ${P.status==="saving"?"bg-blue-100 border-blue-300 text-blue-800":P.status==="saved"?"bg-green-100 border-green-300 text-green-800":"bg-subtle border-border-subtle text-ink-primary"}`,children:[P.status==="saving"&&e.jsx(Te,{size:12,className:"inline mr-1 animate-spin"}),P.status==="saved"&&e.jsx(Re,{size:12,className:"inline mr-1"}),p?`Saved ${V(p)}`:"Draft"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{size:16,className:"text-ink-tertiary"}),e.jsxs("div",{className:"flex -space-x-2",children:[m.slice(0,3).map(k=>e.jsxs("div",{className:"relative w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white text-xs font-medium border-2 border-white",title:`${k.name} (${k.status})`,children:[k.name.split(" ").map(M=>M[0]).join(""),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white ${L(k.status)}`})]},k.id)),m.length>3&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white text-xs font-medium border-2 border-white",children:["+",m.length-3]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(se,{size:"sm",variant:"secondary",onClick:o,children:"View Moodboard"}),e.jsx(se,{size:"sm",variant:"primary",onClick:a,children:"Open Writer's Room"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(ce,{level:"lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Creative Brief"}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="saving"&&e.jsx(Te,{size:14,className:"text-blue-500 animate-spin"}),P.status==="saved"&&e.jsx(Re,{size:14,className:"text-green-500"}),!l&&e.jsx("button",{onClick:()=>h(!0),className:"p-2 hover:bg-white/10 rounded-[16px] transition-colors text-ink-tertiary","aria-label":"Edit brief",title:"Edit brief (âŒ˜E)",children:e.jsx(nt,{size:16})})]})]}),l?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{value:c,onChange:k=>A(k.target.value),placeholder:"Enter your creative brief...",rows:6,variant:"secondary",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{size:"sm",variant:"primary",onClick:T,leftIcon:e.jsx(Re,{size:14}),children:"Save Brief (âŒ˜S)"}),e.jsx(se,{size:"sm",variant:"ghost",onClick:()=>{i(s),h(!1)},children:"Cancel (Esc)"})]})]}):e.jsx("div",{className:"prose-like text-sm text-ink-secondary leading-relaxed",children:c||e.jsx("p",{className:"text-ink-tertiary italic",children:"No brief yet. Click edit to add one."})})]}),e.jsxs(ce,{level:"lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-ink-primary flex items-center gap-2",children:[e.jsx(ot,{size:16}),"Activity Feed"]}),e.jsx("button",{className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Refresh activities",children:e.jsx(Te,{size:14,className:"text-ink-tertiary"})})]}),e.jsx("div",{ref:I,className:"space-y-3 max-h-64 overflow-y-auto",children:w.map(k=>e.jsxs("div",{className:"flex items-start gap-3 p-2 hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-primary/10 text-primary flex-shrink-0",children:O(k.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-ink-primary",children:[e.jsx("span",{className:"font-medium",children:k.user})," ",k.message]}),e.jsx("p",{className:"text-xs text-ink-tertiary mt-0.5",children:V(k.timestamp)})]})]},k.id))})]}),e.jsxs(ce,{level:"lg",children:[e.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-4",children:"Mood & Tone"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide block mb-2",children:"Mood Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Cinematic","Minimalist","Bold","Elegant"].map(k=>e.jsx("button",{className:"px-3 py-1.5 rounded-[24px] bg-primary-tint text-primary text-xs font-medium hover:bg-primary hover:text-white transition-colors",children:k},k))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-ink-secondary uppercase tracking-wide block mb-2",children:"Do's & Don'ts"}),e.jsx(Se,{placeholder:"List visual and tonal guidelines...",rows:3,variant:"secondary"})]})]})]}),e.jsxs(ce,{level:"lg",children:[e.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-3",children:"Risks & Blockers"}),e.jsxs("ul",{className:"space-y-2 text-sm text-ink-secondary",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 w-2 h-2 rounded-full bg-amber-500"}),"Clarify deliverable scope and final runtime."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 w-2 h-2 rounded-full bg-amber-500"}),"Secure reference assets for visual direction."]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(ce,{level:"lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Project Assets"}),e.jsx(se,{size:"sm",variant:"secondary",children:"Upload Asset"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((k,M)=>e.jsx("div",{className:"aspect-square bg-subtle border border-border-subtle rounded-lg flex items-center justify-center text-ink-tertiary",children:e.jsx(xe,{size:24})},M))})]}),e.jsxs(ce,{level:"lg",children:[e.jsx("h2",{className:"text-lg font-bold text-ink-primary mb-6",children:"Project Timeline"}),e.jsx("div",{className:"space-y-4",children:[{phase:"Concept & Planning",status:"completed",date:"Dec 10"},{phase:"Script Development",status:"in-progress",date:"Dec 13"},{phase:"Pre-production",status:"pending",date:"Dec 20"},{phase:"Production",status:"pending",date:"Jan 5"},{phase:"Post-production",status:"pending",date:"Jan 20"}].map((k,M)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${k.status==="completed"?"bg-green-500":k.status==="in-progress"?"bg-blue-500":"bg-gray-400"}`}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`font-medium ${k.status==="completed"?"text-ink-secondary line-through":k.status==="in-progress"?"text-ink-primary":"text-ink-secondary"}`,children:k.phase}),e.jsx("span",{className:"text-sm text-ink-tertiary",children:k.date})]})})]},M))})]})]})]})]})})},Ys=({freelancers:r=[],onSelect:t,onTalentMatch:s})=>{const[n,a]=u.useState(""),[o,l]=u.useState([]),[h,c]=u.useState(r),i=d=>{a(d),g(d,o)},v=d=>{const m=o.includes(d)?o.filter(f=>f!==d):[...o,d];l(m),g(n,m)},g=(d,m)=>{let f=r;d&&(f=f.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.role.toLowerCase().includes(d.toLowerCase())||w.skills.some(S=>S.toLowerCase().includes(d.toLowerCase())))),m.length>0&&(f=f.filter(w=>m.some(S=>w.skills.includes(S)))),c(f)},p=Array.from(new Set(r.flatMap(d=>d.skills))).sort();return e.jsx("div",{className:"w-full h-full bg-app",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-ink-primary mb-2",children:"Talent Roster"}),e.jsx("p",{className:"text-ink-secondary",children:"Discover and match creative professionals with your projects"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(pe,{placeholder:"Search by name, role, or skill...",icon:e.jsx(me,{size:18}),value:n,onChange:d=>i(d.target.value)})}),e.jsxs(se,{onClick:()=>s==null?void 0:s(n),children:[e.jsx(it,{size:16,className:"mr-2"}),"AI Talent Match"]})]}),p.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold text-ink-secondary uppercase tracking-wide mb-3",children:"Filter by Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(d=>e.jsx("button",{onClick:()=>v(d),className:`px-3 py-1.5 rounded-[24px] text-xs font-medium transition-all ${o.includes(d)?"bg-primary text-ink-inverse":"bg-subtle text-ink-secondary hover:bg-surface"}`,children:d},d))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map(d=>e.jsxs(Z,{hoverable:!0,onClick:()=>t==null?void 0:t(d),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-ink-primary",children:d.name}),e.jsx("p",{className:"text-sm text-ink-secondary",children:d.role})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{size:16,className:"text-edge-magenta fill-edge-magenta"}),e.jsx("span",{className:"text-sm font-semibold text-ink-primary",children:d.rating})]})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-ink-secondary",children:[e.jsx(ns,{size:14,className:"mr-2"}),d.location]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-semibold text-primary",children:["$",d.rate]}),e.jsx("span",{className:"text-ink-secondary",children:"/hour"})]})]}),d.bio&&e.jsx("p",{className:"text-sm text-ink-secondary mb-4 line-clamp-2",children:d.bio}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.skills.slice(0,3).map(m=>e.jsx("span",{className:"px-2 py-1 rounded-[12px] bg-primary-tint text-primary text-xs font-medium",children:m},m)),d.skills.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-ink-tertiary",children:["+",d.skills.length-3," more"]})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-[12px] ${d.availability==="available"?"bg-state-success-bg text-state-success":"bg-state-warning-bg text-state-warning"}`,children:d.availability==="available"?"âœ“ Available":"Limited Availability"})}),e.jsx(se,{variant:"secondary",className:"w-full",children:"View Profile"})]},d.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(it,{size:48,className:"mx-auto text-ink-tertiary mb-4"}),e.jsx("p",{className:"text-ink-secondary",children:"No freelancers match your criteria"})]})})]})})},vt=[{label:"New Project",path:"/projects/new",category:"Create",keywords:["campaign","brief"]},{label:"New Talent Profile",path:"/freelancers/new",category:"Create",keywords:["roster","freelancer"]},{label:"New Transcript",path:"/transcripts/new",category:"Create",keywords:["meeting","call"]}],jt=[{label:"Dashboard",path:"/",category:"Navigation",keywords:["home","overview"]},{label:"Projects",path:"/projects",category:"Navigation",keywords:["campaigns","briefs"]},{label:"Freelancers",path:"/freelancers",category:"Navigation",keywords:["talent","roster"]},{label:"Transcripts",path:"/transcripts",category:"Navigation",keywords:["calls","meetings"]},{label:"Confluence",path:"/confluence",category:"Navigation",keywords:["docs","wiki"]}],Qs=()=>{const[r,t]=u.useState(!1),[s,n]=u.useState(!1),[a,o]=u.useState(""),l=Jt(),h=kt(),c=u.useMemo(()=>[...vt,...jt],[]),i=u.useMemo(()=>{const d=a.trim().toLowerCase();return d?c.filter(m=>{var f;return m.label.toLowerCase().includes(d)||((f=m.keywords)==null?void 0:f.some(w=>w.toLowerCase().includes(d)))}):jt.slice(0,4)},[c,a]),v=d=>{d!=="#"&&(l?h(d):window.location.href=d,t(!1),n(!1))},g=d=>{d.preventDefault(),t(!0)},p=(d=!1)=>r&&e.jsx("div",{className:`absolute ${d?"bottom-36 left-4 right-4":"bottom-20 left-0 right-0 mx-auto max-w-3xl"} bg-surface border border-border-subtle shadow-xl rounded-2xl overflow-hidden z-[65] pointer-events-auto`,role:"listbox","aria-label":"Command palette results",children:i.length===0?e.jsx("div",{className:"px-4 py-3 text-sm text-ink-secondary",children:"No matches found."}):i.map(m=>e.jsxs("button",{className:"w-full flex items-center justify-between text-left px-4 py-3 hover:bg-subtle transition-colors focus:outline-none focus:bg-subtle",onClick:()=>v(m.path),role:"option",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-ink-primary",children:m.label}),e.jsx("span",{className:"text-[11px] uppercase tracking-widest text-ink-tertiary",children:m.category})]}),e.jsx(fe,{size:16,className:"text-ink-tertiary","aria-hidden":"true"})]},m.label))});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block fixed bottom-8 left-72 right-0 flex justify-center z-[60] px-8 pointer-events-none",children:e.jsxs("div",{className:"glass-bar pointer-events-auto w-full max-w-3xl h-16 rounded-pill flex items-center justify-between px-2 pr-3 shadow-lg hover:shadow-xl transition-shadow relative",children:[e.jsxs("form",{onSubmit:g,className:"flex items-center pl-4 w-full gap-4",children:[e.jsx(lt,{size:18,className:"text-ink-secondary","aria-hidden":"true"}),e.jsx("label",{htmlFor:"command-input",className:"sr-only",children:"Search manifests, assets, or run AI command"}),e.jsx("input",{id:"command-input",type:"text",value:a,onChange:d=>{o(d.target.value),t(!0)},placeholder:"Search manifests, assets, or run AI command...",className:"bg-transparent border-none outline-none h-full w-full text-sm text-ink-primary placeholder:text-ink-secondary/70 font-medium focus:placeholder:text-ink-tertiary transition-colors",role:"searchbox","aria-label":"Search manifests, assets, or run AI command",autoComplete:"off",onFocus:()=>t(!0),onBlur:()=>setTimeout(()=>t(!1),100)})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("div",{className:"hidden lg:flex text-[10px] font-bold text-ink-tertiary bg-subtle px-2 py-1 rounded-md border border-border-subtle",children:"âŒ˜ K"}),e.jsx("div",{className:"h-6 w-[1px] bg-border-subtle mx-1","aria-hidden":"true"}),e.jsx("button",{className:"w-10 h-10 rounded-full bg-ink-primary text-white flex items-center justify-center hover:scale-105 transition-all shadow-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 hover:bg-ink-primary/90","aria-label":"Create new item",type:"button",title:"Create new item (Ctrl+N)",onClick:()=>n(d=>!d),children:e.jsx(ue,{size:18,"aria-hidden":"true"})})]}),p(!1),s&&e.jsxs("div",{className:"absolute bottom-20 right-6 w-64 bg-surface border border-border-subtle rounded-xl shadow-xl p-3 z-[66]",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-ink-tertiary mb-2 font-bold",children:"Quick Create"}),e.jsx("div",{className:"flex flex-col gap-1",children:vt.map(d=>e.jsx("button",{onClick:()=>v(d.path),className:"px-3 py-2 rounded-lg hover:bg-subtle text-sm font-semibold text-ink-primary transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 text-left",children:d.label},d.label))})]})]})}),e.jsx("div",{className:"md:hidden fixed bottom-20 left-4 right-4 flex justify-center z-[60] pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto w-full max-w-md h-14 rounded-pill flex items-center justify-between px-3 pr-3 bg-surface/95 backdrop-blur-xl border border-border-subtle shadow-lg hover:shadow-xl transition-shadow relative",children:[e.jsxs("form",{onSubmit:g,className:"flex items-center w-full gap-3",children:[e.jsx(lt,{size:16,className:"text-ink-secondary","aria-hidden":"true"}),e.jsx("label",{htmlFor:"mobile-command-input",className:"sr-only",children:"Search or run command"}),e.jsx("input",{id:"mobile-command-input",type:"text",value:a,onChange:d=>{o(d.target.value),t(!0)},placeholder:"Search or command...",className:"bg-transparent border-none outline-none h-full w-full text-sm text-ink-primary placeholder:text-ink-secondary/70 font-medium focus:placeholder:text-ink-tertiary transition-colors",role:"searchbox","aria-label":"Search or run command",autoComplete:"off",onFocus:()=>t(!0),onBlur:()=>setTimeout(()=>t(!1),100)})]}),e.jsx("button",{className:"w-8 h-8 rounded-full bg-ink-primary text-white flex items-center justify-center hover:scale-105 transition-all shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 hover:bg-ink-primary/90","aria-label":"Create new item",type:"button",title:"Create new item",onClick:()=>n(d=>!d),children:e.jsx(ue,{size:14,"aria-hidden":"true"})}),p(!0)]})})]})},Fe=[{path:"/",label:"Dashboard",icon:os,requiresAuth:!0,description:"Main dashboard with project overview and quick actions",metadata:{title:"Dashboard - Studio Roster",keywords:["dashboard","overview","projects"]}},{path:"/projects",label:"Projects",icon:ct,requiresAuth:!0,description:"Project management hub with creation and listing",metadata:{title:"Projects - Studio Roster",keywords:["projects","management","client"]}},{path:"/projects/:id",label:"Project Dashboard",icon:ct,requiresAuth:!0,description:"Individual project workspace with brief, assets, and tools",metadata:{title:"Project Dashboard - Studio Roster",keywords:["project","dashboard","brief","assets"]}},{path:"/moodboard",label:"Visuals",icon:is,requiresAuth:!0,description:"Visual inspiration and moodboard management",metadata:{title:"Moodboard - Studio Roster",keywords:["moodboard","visuals","inspiration","assets"]}},{path:"/talent",label:"Talent",icon:Le,requiresAuth:!0,description:"Freelancer roster and talent management",metadata:{title:"Talent Roster - Studio Roster",keywords:["talent","freelancers","roster","hiring"]}},{path:"/writers-room",label:"Writer's Room",icon:Oe,requiresAuth:!0,description:"AI-powered creative collaboration and chat interface",metadata:{title:"Writer's Room - Studio Roster",keywords:["writers room","ai chat","collaboration","creative"]}},{path:"/knowledge-base",label:"Knowledge Base",icon:Ct,requiresAuth:!0,description:"Documentation and knowledge management system",metadata:{title:"Knowledge Base - Studio Roster",keywords:["knowledge","documentation","confluence","wiki"]}},{path:"/transcripts",label:"Transcripts",icon:ls,requiresAuth:!0,description:"Audio and video transcript management",metadata:{title:"Transcripts - Studio Roster",keywords:["transcripts","audio","video","text"]}},{path:"/plugins",label:"Plugins",icon:cs,requiresAuth:!0,description:"Plugin management and marketplace",metadata:{title:"Plugin Manager - Studio Roster",keywords:["plugins","extensions","marketplace","management"]}}],we=r=>["/projects/:id"].some(s=>{const n=s.replace(/:[^/]+/g,"[^/]+");return new RegExp(`^${n}$`).test(r)})?Fe.find(s=>s.path==="/projects/:id"):Fe.find(s=>s.path===r),Xs=()=>Fe.filter(r=>["/","/projects","/moodboard","/talent","/writers-room","/knowledge-base","/transcripts","/plugins"].includes(r.path)),Zs=r=>{const t=[];if(r.split("/").filter(Boolean).length===0)return[we("/")];t.push(we("/"));const n=we(r);return n&&r!=="/"&&t.push(n),t},er=r=>r.startsWith("/projects"),tr=r=>{const t=r.match(/^\/projects\/([^/]+)$/);return t?t[1]:null},_t=u.createContext(void 0),sr=({children:r})=>{const t=St(),[s,n]=u.useState([]),a=we(t.pathname),o=er(t.pathname),l=tr(t.pathname);u.useEffect(()=>{const c=Zs(t.pathname);n(c)},[t.pathname]);const h={currentRoute:a,breadcrumbs:s,isProjectRoute:o,projectId:l,setBreadcrumbs:n};return e.jsx(_t.Provider,{value:h,children:r})},rr=()=>{const r=u.useContext(_t);if(r===void 0)throw new Error("useRoute must be used within a RouteProvider");return r},ar=()=>{const r=St(),{breadcrumbs:t}=rr();return{activeItem:r.pathname==="/"?"dashboard":r.pathname.startsWith("/projects")&&!r.pathname.includes("/",1)||r.pathname.startsWith("/projects/")&&r.pathname.split("/").length>2?"projects":r.pathname.startsWith("/moodboard")?"moodboard":r.pathname.startsWith("/talent")?"talent":r.pathname.startsWith("/writers-room")?"writers-room":r.pathname.startsWith("/knowledge-base")?"knowledge-base":r.pathname.startsWith("/transcripts")?"transcripts":"dashboard",breadcrumbs:t,isRoot:r.pathname==="/"}},nr=()=>{const r=kt(),{activeItem:t}=ar(),s=Xs(),n=()=>{r("/")},a=()=>{console.log("Settings clicked")};return e.jsxs("nav",{className:"fixed left-0 top-0 bottom-0 w-72 flex flex-col py-8 bg-sidebar border-r border-border-subtle z-50",children:[e.jsxs("div",{className:"px-8 mb-12 flex items-center gap-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:n,role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),n())},children:[e.jsx("div",{className:"w-10 h-10 bg-ink-primary rounded-xl flex items-center justify-center text-white shadow-xl",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full border-2 border-ink-primary","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl tracking-tight text-ink-primary",children:"Studio."}),e.jsx("p",{className:"text-[10px] text-ink-tertiary font-medium tracking-widest uppercase",children:"OS v3.0"})]})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto px-6 space-y-2","aria-label":"Main navigation",children:[e.jsx("div",{className:"px-4 mb-2 text-[10px] font-bold text-ink-tertiary uppercase tracking-widest opacity-60",children:"Core Modules"}),s.map(o=>{const l=o.icon,h=t===o.path.replace("/","");return e.jsxs(qt,{to:o.path,className:({isActive:c})=>`nav-item w-full focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-lg transition-all duration-200 ${c||h?"active bg-primary/10 text-primary border-primary/20":"hover:bg-subtle"}`,"aria-label":`Navigate to ${o.label}`,children:[e.jsx(l,{size:18,strokeWidth:2,"aria-hidden":"true"}),e.jsx("span",{children:o.label})]},o.path)})]}),e.jsxs("div",{className:"px-6 mt-auto pt-6 border-t border-border-subtle/50 flex flex-col gap-2",children:[e.jsxs("button",{className:"nav-item w-full text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-lg hover:bg-subtle transition-colors","aria-label":"Open system configuration settings",tabIndex:0,onClick:a,children:[e.jsx(ds,{size:18,"aria-hidden":"true"}),"System Config"]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 mt-2 rounded-2xl border border-border-subtle bg-surface shadow-sm cursor-pointer hover:border-border-hover transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden flex-shrink-0",children:e.jsx("img",{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop",className:"w-full h-full object-cover",alt:"Profile picture of Alex Director"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-bold text-ink-primary truncate",children:"Alex Director"}),e.jsx("div",{className:"text-[10px] text-ink-tertiary truncate",children:"Online â€¢ Los Angeles"})]})]})]})]})};var Ce=(r=>(r.NOT_AUTHENTICATED="NOT_AUTHENTICATED",r.STORAGE_ACCESS_DENIED="STORAGE_ACCESS_DENIED",r.PAGE_NOT_FOUND="PAGE_NOT_FOUND",r.NETWORK_ERROR="NETWORK_ERROR",r.INVALID_CONFIG="INVALID_CONFIG",r))(Ce||{});class Ne extends Error{constructor(t,s,n){super(t),this.code=s,this.statusCode=n,this.name="ConfluenceError"}}const Ft=u.createContext(void 0);function or({children:r,siteUrl:t,onAuthChange:s}){const[n,a]=u.useState({isAuthenticated:!1,isLoading:!0}),o=()=>D(null,null,function*(){try{const i=document.cookie.split(";").reduce((g,p)=>{const[d,m]=p.trim().split("=");return g[d]=m,g},{});return i["atl.xsrf.token"]&&i["cloud.session.token"]?(a({isAuthenticated:!0,isLoading:!1,cookies:{"atl.xsrf.token":i["atl.xsrf.token"],"cloud.session.token":i["cloud.session.token"]}}),!0):(a({isAuthenticated:!1,isLoading:!1}),!1)}catch(i){return console.error("Error checking Confluence auth:",i),a({isAuthenticated:!1,isLoading:!1,error:"Failed to check authentication status"}),!1}}),l=i=>D(null,null,function*(){var v,g;try{if(a(d=>E(j({},d),{isLoading:!0,error:void 0})),"requestStorageAccess"in document)try{yield document.requestStorageAccess()}catch(d){throw new Ne("Storage access denied. Please enable 3rd party cookies in your browser settings.",Ce.STORAGE_ACCESS_DENIED)}if(yield o()){const d=n.cookies;(v=i==null?void 0:i.onSuccess)==null||v.call(i,d),s==null||s(!0)}else throw new Ne("Login failed. Please try again.",Ce.NOT_AUTHENTICATED)}catch(p){const d=p instanceof Ne?p.message:"An unexpected error occurred during login";throw a(m=>E(j({},m),{isLoading:!1,error:d})),(g=i==null?void 0:i.onError)==null||g.call(i,p),p}}),h=()=>D(null,null,function*(){try{document.cookie="atl.xsrf.token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="cloud.session.token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a({isAuthenticated:!1,isLoading:!1,cookies:void 0}),s==null||s(!1)}catch(i){throw console.error("Error during logout:",i),i}});u.useEffect(()=>{o()},[]);const c=E(j({},n),{login:l,logout:h,checkAuth:o});return e.jsx(Ft.Provider,{value:c,children:r})}function ir(){const r=u.useContext(Ft);if(!r)throw new Error("useConfluenceAuth must be used within a ConfluenceAuthProvider");return r}function lr({config:r,className:t="",onLoad:s,onError:n,height:a="800px"}){const{isAuthenticated:o,isLoading:l,login:h}=ir(),[c,i]=u.useState(null),[v,g]=u.useState(!0);u.useEffect(()=>{if(!r.pageUrl||!r.siteUrl){const f=new Ne("Invalid configuration: pageUrl and siteUrl are required",Ce.INVALID_CONFIG);i(f.message),n==null||n(f)}},[r,n]),u.useEffect(()=>{!l&&!o&&i("Please log in to Confluence to view this page.")},[o,l]);const p=()=>D(null,null,function*(){try{yield h({onError:f=>{i(f.message),n==null||n(f)}}),i(null)}catch(f){console.error("Login failed:",f)}}),d=()=>{g(!1),s==null||s(),i(null)},m=f=>{i(f.message),n==null||n(f)};return l||v?e.jsx("div",{className:`confluence-page-container ${t}`,style:{height:a},children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ink-primary mx-auto mb-4"}),e.jsx("p",{className:"text-ink-secondary",children:"Loading Confluence page..."})]})})}):c?e.jsx("div",{className:`confluence-page-container ${t}`,style:{height:a},children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-subtle rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-2",children:"Unable to Load Page"}),e.jsx("p",{className:"text-sm text-ink-secondary mb-4",children:c}),!o&&e.jsx("button",{onClick:p,className:"px-4 py-2 bg-ink-primary text-white rounded-lg hover:bg-opacity-90 transition-colors",children:"Log in to Confluence"})]})})}):(r.pageId||cr(r.pageUrl),o?e.jsx("div",{className:`confluence-page-container ${t}`,style:{height:a},children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:r.pageUrl,title:"Confluence Page",className:"w-full h-full border-none rounded-lg",onLoad:d,onError:()=>m(new Error("Failed to load Confluence page")),allowFullScreen:!0})})}):!l&&!o?e.jsx("div",{className:`confluence-page-container ${t}`,style:{height:a},children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-subtle rounded-xl",children:[e.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-2",children:"Please Log In"}),e.jsx("p",{className:"text-sm text-ink-secondary mb-4",children:"You need to log in to Confluence to view this page."}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-ink-primary text-white rounded-lg hover:bg-opacity-90 transition-colors",children:"Log in to Confluence"})]})})}):null)}function cr(r){try{const t=new URL(r),s=t.pathname.split("/"),n=s.indexOf("pages");if(n!==-1&&s[n+1]){const o=s[n+1];if(/^\d+$/.test(o))return o}const a=t.searchParams.get("pageId");return a||void 0}catch(t){console.error("Error extracting page ID from URL:",t);return}}const dr=()=>{const[r]=u.useState({pageUrl:"https://studiodot.atlassian.net/wiki/home",siteUrl:"https://studiodot.atlassian.net"});return e.jsx(or,{siteUrl:r.siteUrl,children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"px-12 pt-12 pb-6 border-b border-border-subtle",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ct,{size:24,className:"text-white",strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-ink-primary",children:"Knowledge Base"}),e.jsx("p",{className:"text-sm text-ink-secondary",children:"Team documentation and resources"})]})]})}),e.jsx("div",{className:"flex-1 px-12 py-8 overflow-hidden",children:e.jsx(lr,{config:r,height:"100%",onLoad:()=>console.log("Confluence page loaded"),onError:t=>console.error("Confluence error:",t),className:"h-full"})}),e.jsx("div",{className:"px-12 py-4 border-t border-border-subtle bg-subtle/50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-ink-tertiary",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:"ðŸ“– Powered by Atlassian Confluence"}),e.jsx("span",{className:"text-border-subtle",children:"â€¢"}),e.jsx("a",{href:r.siteUrl,target:"_blank",rel:"noopener noreferrer",className:"hover:text-ink-secondary transition-colors",children:"View in Confluence â†’"})]}),e.jsx("div",{className:"text-ink-tertiary/60",children:"Studio OS v3.0 â€¢ Knowledge Integration"})]})})]})})},ur=({text:r,isOnline:t=!0})=>e.jsxs("span",{className:"px-3 py-1 bg-surface border border-border-subtle rounded-lg text-[11px] font-bold uppercase tracking-widest text-ink-secondary shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"animate-pulse status-indicator":"bg-gray-400"}`}),r]}),mr=({onNotificationsClick:r,onNewProjectClick:t})=>e.jsxs("header",{className:"mb-12 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx(ur,{text:"Studio Online"})}),e.jsx("h1",{className:"text-6xl md:text-7xl font-bold tracking-tighter text-ink-primary mb-3 kinetic-text",children:"Good Morning."}),e.jsxs("p",{className:"text-ink-secondary text-xl font-light tracking-tight",children:["The studio focus is nominal."," ",e.jsx("span",{className:"text-ink-primary font-medium border-b border-border-subtle pb-0.5",children:"2 deadlines approaching."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"h-10 w-10 rounded-full bg-surface border border-border-subtle flex items-center justify-center text-ink-secondary hover:text-ink-primary hover:border-ink-primary transition-colors",onClick:r,"aria-label":"View notifications",children:e.jsx(us,{size:18})}),e.jsx("button",{className:"h-10 px-5 rounded-full text-white text-xs font-bold uppercase tracking-wider transition-shadow new-project-button",onClick:t,"aria-label":"Create a new project",children:"New Project"})]})]}),oe=a=>{var o=a,{children:r,className:t="",noPadding:s=!1}=o,n=Y(o,["children","className","noPadding"]);return e.jsx("div",E(j({},n),{className:`bg-surface border border-subtle-alpha rounded-xl ${s?"":"p-8"} transition-all duration-500 ease-out hover:shadow-lg hover:-translate-y-[2px] ${t}`,children:r}))},hr=({imageSrc:r,priorityLabel:t="Priority One",title:s,description:n,className:a=""})=>{const[o,l]=y.useState(!1);return e.jsxs(oe,{className:`relative overflow-hidden group border-0 shadow-2xl min-h-[360px] ${a}`,noPadding:!0,children:[!o&&r?e.jsx("img",{src:r,className:"w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105",alt:`${s} - ${n}`,loading:"lazy",onError:()=>l(!0)}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-ink-primary/80 via-ink-primary to-black/70","aria-hidden":"true"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent p-10 flex flex-col justify-end",role:"article",children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx("span",{className:"px-3 py-1 bg-white/10 backdrop-blur-md rounded-full text-[10px] font-bold text-white uppercase tracking-wider border border-white/20",children:t})}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-2 tracking-tight",children:s}),e.jsx("p",{className:"text-white/70 text-sm md:text-base line-clamp-2 max-w-md leading-relaxed",children:n})]})]})},xr=[1,2,3,4].map(r=>({id:r,name:`Render_${r}.png`})),fr=({artifact:r,onClick:t})=>{const[s,n]=u.useState(!1),a=()=>t==null?void 0:t(r),o=r.imageSrc&&!s;return e.jsx("li",{role:"gridcell",children:e.jsxs("button",{type:"button",className:"rounded-2xl bg-subtle border border-border-subtle relative group overflow-hidden cursor-pointer aspect-[4/3] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary w-full h-full text-left",onClick:a,"aria-label":`Open artifact ${r.name}`,children:[o?e.jsx("img",{src:r.imageSrc,alt:r.name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>n(!0)}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-ink-tertiary group-hover:scale-110 transition-transform duration-500",children:e.jsx(xe,{size:24})}),e.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-surface/90 backdrop-blur-md px-3 py-2 rounded-xl translate-y-full group-hover:translate-y-0 transition-transform duration-300 border border-border-subtle shadow-sm",children:e.jsx("div",{className:"text-[10px] font-bold truncate text-ink-primary",children:r.name})})]})})},pr=({artifacts:r=xr,onViewGallery:t,onArtifactClick:s,className:n="",loading:a=!1})=>{const o=r.length>0,l=a?"Loading recent artifacts":o?`Showing ${r.length} recent artifact${r.length===1?"":"s"}`:"No artifacts yet";return e.jsxs(oe,{className:`flex flex-col shadow-md border-border-subtle bg-surface h-full ${n}`,"aria-busy":a,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-ink-secondary",children:"Recent Artifacts"}),e.jsx("button",{className:"text-xs font-bold text-ink-primary hover:opacity-70 transition-opacity",onClick:t,children:"View Gallery"})]}),e.jsx("span",{className:"sr-only","aria-live":"polite",children:l}),a?e.jsx("ul",{className:"flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 list-none p-0 m-0","aria-label":"Loading artifacts","aria-busy":"true",role:"grid",children:[0,1,2,3].map(h=>e.jsx("li",{role:"gridcell",className:"rounded-2xl bg-subtle border border-border-subtle aspect-[4/3] animate-pulse","aria-hidden":"true"},h))}):o?e.jsx("ul",{className:"flex-1 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 list-none p-0 m-0","aria-label":"Recent artifacts",role:"grid",children:r.map(h=>e.jsx(fr,{artifact:h,onClick:s},h.id.toString()))}):e.jsxs("div",{className:"flex-1 rounded-xl bg-subtle border border-border-subtle p-6 flex flex-col items-start justify-center gap-3",role:"status","aria-live":"polite",children:[e.jsx("div",{className:"text-sm font-medium text-ink-primary",children:"No artifacts yet"}),e.jsx("p",{className:"text-xs text-ink-secondary",children:"Generate with Spark or upload a render to populate this space."}),e.jsx("button",{className:"text-xs font-bold text-ink-primary hover:opacity-70 transition-opacity underline-offset-2 underline",onClick:t,children:"Open Gallery"})]})]})},wt=160,br=({onSubmitPrompt:r,className:t=""})=>{const[s,n]=u.useState(""),a=u.useId(),o="var(--dashboard-accent, #2463E6)",l=wt-s.length,h=c=>{c.preventDefault();const i=s.trim();i&&(r==null||r(i),n(""))};return e.jsxs(oe,{className:`flex flex-col justify-between text-white border-0 shadow-xl relative overflow-hidden ${t}`,style:{background:`radial-gradient(120% 120% at 100% 0%, rgba(255,255,255,0.08), transparent 45%), ${o}`},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/20 blur-3xl rounded-full pointer-events-none"}),e.jsxs("div",{className:"flex justify-between items-start z-10",children:[e.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-sm",children:e.jsx(ms,{size:20,className:"text-white"})}),e.jsx("span",{className:"text-[10px] font-mono text-white/40",children:"AI v4.0"})]}),e.jsxs("div",{className:"z-10",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4 leading-tight",children:["Spark",e.jsx("br",{}),"Creativity."]}),e.jsxs("form",{onSubmit:h,className:"relative group/input",children:[e.jsx("label",{htmlFor:"ai-prompt",className:"sr-only",children:"Enter a concept prompt for AI generation"}),e.jsx("input",{id:"ai-prompt",placeholder:"Concept prompt...",value:s,onChange:c=>n(c.target.value),className:"w-full bg-white/10 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white placeholder-white/30 outline-none focus:bg-white/20 focus:border-white/20 transition-all pr-10",maxLength:wt,"aria-describedby":a}),e.jsxs("button",{type:"submit",className:"absolute right-2 top-2 p-1.5 text-white/50 hover:text-white bg-white/5 hover:bg-white/20 rounded-lg transition-all disabled:opacity-50",disabled:!s.trim(),"aria-label":"Submit prompt",children:[e.jsx("span",{className:"sr-only",children:"Submit prompt"}),e.jsx(fe,{size:14})]})]}),e.jsxs("div",{id:a,className:"mt-2 text-[11px] text-white/70 flex items-center justify-between",children:[e.jsx("span",{children:"Anchor with concrete nouns and tone cues."}),e.jsxs("span",{"aria-live":"polite",children:[l," left"]})]})]})]})},ve={accent:{primary:"#2463E6"},state:{success:"#34C759",warning:"#FF9500",danger:"#FF3B30"}},gr=[ve.state.danger,ve.state.warning,"#FFCC00",ve.state.success,ve.accent.primary],yr=({paletteName:r="PALETTE_NEON_04",colors:t=gr,onColorSelect:s,className:n="",selectedColor:a})=>e.jsxs(oe,{className:`flex flex-col relative overflow-hidden shadow-lg border-0 bg-surface ${n}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-ink-primary",children:"Daily Vibe"}),e.jsx(hs,{size:20,className:"text-ink-tertiary"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-3",children:[e.jsx("div",{className:"flex gap-2 h-12",role:"group","aria-label":"Color palette selection",children:t.map((o,l)=>e.jsx("button",{className:`palette-color palette-color-${l}`,onClick:()=>s==null?void 0:s(o),"aria-label":`Select color ${o}`,"aria-pressed":a?a.toLowerCase()===o.toLowerCase():void 0,style:{backgroundColor:o,transitionDelay:`${l*40}ms`,boxShadow:a&&a.toLowerCase()===o.toLowerCase()?"0 0 0 3px var(--dashboard-accent, #2463E6)":void 0,borderColor:a&&a.toLowerCase()===o.toLowerCase()?"var(--dashboard-accent, #2463E6)":void 0},children:e.jsxs("span",{className:"sr-only",children:["Color ",o]})},o))}),e.jsx("span",{className:"text-xs text-ink-tertiary font-mono text-center mt-2",children:r})]})]}),ke={HERO_PROJECT:{IMAGE:"https://images.unsplash.com/photo-1492551557933-34265f7af79e?q=80&w=2670&auto=format&fit=crop",TITLE:"Nebula Phase II",DESCRIPTION:"Comprehensive rebrand focusing on kinetic typography and zero-gravity aesthetics. Client review in 4 hours."},LOADING_DELAY:350},vr=()=>({id:"hero-1",imageSrc:ke.HERO_PROJECT.IMAGE,priorityLabel:"Priority One",title:ke.HERO_PROJECT.TITLE,description:ke.HERO_PROJECT.DESCRIPTION}),jr=()=>[{id:"art-1",name:"Nebula_Launch.png",imageSrc:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=800&auto=format&fit=crop"},{id:"art-2",name:"Typography_Grid.png",imageSrc:"https://images.unsplash.com/photo-1471357674240-e1a485acb3e1?w=800&auto=format&fit=crop"},{id:"art-3",name:"ZeroG_Mock.png",imageSrc:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&auto=format&fit=crop"},{id:"art-4",name:"Palette_V04.png",imageSrc:"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=800&auto=format&fit=crop"}],wr=()=>{const[r,t]=y.useState(null),[s,n]=y.useState([]),[a,o]=y.useState(!0),[l,h]=y.useState(!0),[c,i]=y.useState(null),[v,g]=y.useState(null),{addToast:p}=Ve(),d=y.useCallback(()=>{o(!0),h(!0),i(null),g(null);const w=setTimeout(()=>{try{const S=vr();t(S),o(!1);const I=jr();n(I),h(!1)}catch(S){console.error("Failed to load dashboard data:",S),i("Failed to load hero project"),g("Failed to load artifacts"),o(!1),h(!1),p("Failed to load dashboard data","info")}},ke.LOADING_DELAY);return()=>clearTimeout(w)},[p]),m=y.useCallback(w=>{n(S=>[w,...S].slice(0,8))},[]),f=y.useCallback(()=>{d()},[d]);return y.useEffect(()=>d(),[d]),{heroProject:r,artifacts:s,loadingHero:a,loadingArtifacts:l,errorHero:c,errorArtifacts:v,refetch:f,addArtifact:m}},Nr=({onNavigateToGallery:r})=>{var P,b,T;const[t,s]=y.useState("#2463E6"),{toasts:n,addToast:a}=Ve(),{heroProject:o,artifacts:l,loadingHero:h,loadingArtifacts:c,errorHero:i,addArtifact:v}=wr();y.useEffect(()=>(document.documentElement.style.setProperty("--dashboard-accent",t),()=>{document.documentElement.style.removeProperty("--dashboard-accent")}),[t]);const g=y.useCallback(()=>{a("Notifications panel is coming soon.","info")},[a]),p=y.useCallback(()=>{a("New Project modal will open here.","success")},[a]),d=y.useCallback(A=>{const L=A.trim();if(!L){a("Please enter a prompt","info");return}if(L.length>1e3){a("Prompt is too long (max 1000 characters)","info");return}a(`Prompt sent: "${L}"`,"success");const O=L.slice(0,12),V={id:`gen-${Date.now()}`,name:`${O.replace(/\s+/g,"_")}.png`,imageSrc:""};v(V)},[a,v]),m=y.useCallback(A=>{s(A),a(`Accent updated to ${A}`,"info")},[a]),f=y.useCallback(()=>{a("Opening gallery...","info"),r==null||r()},[a,r]),w=y.useCallback(A=>{a(`Opening ${A.name}`,"info")},[a]),S=y.useMemo(()=>`${t}1A`,[t]),I=y.useMemo(()=>({"--dashboard-accent":t,backgroundImage:`radial-gradient(120% 120% at 100% 0%, ${S}, transparent 40%)`}),[t,S]);return e.jsxs("main",{className:"animate-in fade-in duration-700 pb-32 pt-12 px-12 max-w-[1600px] mx-auto",style:I,role:"main","aria-label":"Dashboard home page",children:[e.jsx("div",{className:"fixed top-6 right-6 z-50 space-y-3",children:n.map(A=>e.jsxs("div",{className:"bg-surface border border-border-subtle rounded-xl shadow-lg px-4 py-3 text-sm text-ink-primary w-72 flex items-start gap-2",style:{borderColor:A.type==="success"?t:void 0,boxShadow:A.type==="success"?"0 10px 30px rgba(36, 99, 230, 0.15)":void 0},role:"status","aria-live":"polite",children:[e.jsx("span",{className:"mt-1 block w-2 h-2 rounded-full",style:{backgroundColor:t}}),e.jsx("span",{className:"flex-1",children:A.message})]},A.id))}),e.jsx(mr,{onNotificationsClick:g,onNewProjectClick:p}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 auto-rows-min",children:[h?e.jsx("div",{className:"lg:col-span-6 w-full h-full","aria-label":"Loading hero project",children:e.jsx("div",{className:"h-[360px] lg:h-full rounded-2xl bg-subtle border border-border-subtle animate-pulse"})}):i?e.jsx("div",{className:"lg:col-span-6 w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 rounded-2xl bg-error/10 border border-error/20",children:[e.jsx("p",{className:"text-error font-medium mb-2",children:"Failed to load project"}),e.jsx("p",{className:"text-sm text-error/70",children:i})]})}):e.jsx(hr,{imageSrc:(P=o==null?void 0:o.imageSrc)!=null?P:"",priorityLabel:o==null?void 0:o.priorityLabel,title:(b=o==null?void 0:o.title)!=null?b:"",description:(T=o==null?void 0:o.description)!=null?T:"",className:"lg:col-span-6 w-full h-full"}),e.jsxs("div",{className:"lg:col-span-6 grid grid-cols-1 sm:grid-cols-2 gap-6 content-start",children:[e.jsx(br,{onSubmitPrompt:d,className:"sm:col-span-2 lg:col-span-1 min-h-[220px]"}),e.jsx(yr,{onColorSelect:m,className:"sm:col-span-2 lg:col-span-1",selectedColor:t}),e.jsx(pr,{artifacts:l,loading:c,onViewGallery:f,onArtifactClick:w,className:"sm:col-span-2"})]})]})]})},Q=class Q{constructor(){}static getInstance(){return Q.instance||(Q.instance=new Q),Q.instance}generateEnhancedContent(t,s,n){return D(this,null,function*(){try{const a=localStorage.getItem("studio_roster_v1_auth_token"),o=yield fetch(`${Q.API_BASE}/ai/chat`,{method:"POST",headers:j({"Content-Type":"application/json"},a?{Authorization:`Bearer ${a}`}:{}),body:JSON.stringify({message:t,context:JSON.stringify({systemInstruction:n})})});if(!o.ok)throw new Error("Failed to fetch response");return(yield o.json()).response}catch(a){throw console.error("Generation failed:",a),a}})}};U(Q,"instance"),U(Q,"API_BASE","/api/v1");let Me=Q;const Nt=({project:r,onBack:t})=>{const[s,n]=u.useState(""),[a,o]=u.useState([{role:"system",text:r!=null&&r.title?`I've analyzed the "${r.title}" brief. ${r.description?r.description+" ":""}Would you like me to draft concepts or provide creative direction?`:"Welcome to Writer's Room. I'm Lumina, your AI creative director. How can I help shape your vision today?"}]),[l,h]=u.useState(!1),c=u.useRef(null),i=Me.getInstance(),v=p=>D(null,null,function*(){const d=p!=null?p:s;if(!d.trim()||l)return;const m={role:"user",text:d};o(f=>[...f,m]),p||n(""),h(!0);try{const f=r?`You are Lumina, an AI creative director working on "${r.title}". ${r.description?"Project: "+r.description+". ":""}Keep responses concise and focused on film/design direction.`:"You are Lumina, a creative AI director. Keep responses concise and focused on film/design direction.",w=yield i.generateEnhancedContent(d,void 0,f);o(S=>[...S,{role:"system",text:w}])}catch(f){console.error("Lumina Intelligence Error:",f),o(w=>[...w,{role:"system",text:"I'm having trouble connecting right now. Please try again in a moment."}])}finally{h(!1)}}),g=["Draft a scene outline based on this brief.","Turn the brief into a 10-shot storyboard list.","Write a 30-second VO read with a cinematic tone."];return u.useEffect(()=>{var p;(p=c.current)==null||p.scrollIntoView({behavior:"smooth"})},[a]),e.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-8 pb-32 animate-in fade-in pt-8 px-8 max-w-[1800px] mx-auto",children:[e.jsxs("div",{className:"md:hidden flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:t,className:"text-ink-secondary hover:text-ink-primary","aria-label":"Go back",children:e.jsx(fe,{className:"rotate-180",size:24})}),e.jsx("h2",{className:"text-lg font-bold text-ink-primary",children:"Writer's Room"})]}),e.jsxs("div",{className:"hidden md:flex w-[380px] flex-col gap-6 shrink-0 h-full overflow-y-auto pb-4",children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-ink-secondary pl-1",children:"Project Context"}),e.jsxs(oe,{className:"bg-surface border-border-subtle shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-ink-primary",children:[e.jsx(Oe,{size:18}),e.jsx("h3",{className:"text-sm font-bold",children:"The Brief"})]}),e.jsx("p",{className:"text-sm text-ink-secondary leading-relaxed mb-6 font-medium",children:(r==null?void 0:r.description)||`Creative direction for "${(r==null?void 0:r.title)||"your project"}".`}),(r==null?void 0:r.tone)&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:r.tone.map(p=>e.jsx("span",{className:"px-2.5 py-1 bg-subtle rounded-md text-[11px] font-semibold text-ink-primary border border-border-subtle",children:p},p))})]}),e.jsxs(oe,{className:"bg-surface border-border-subtle shadow-sm flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-ink-primary",children:[e.jsx(xe,{size:18}),e.jsx("h3",{className:"text-sm font-bold",children:"Visual Language"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"aspect-square bg-subtle rounded-xl border border-border-subtle flex items-center justify-center text-ink-tertiary",children:"Ref 1"}),e.jsx("div",{className:"aspect-square bg-subtle rounded-xl border border-border-subtle flex items-center justify-center text-ink-tertiary",children:"Ref 2"}),e.jsx("div",{className:"aspect-square bg-subtle rounded-xl border border-border-subtle flex items-center justify-center text-ink-tertiary",children:"Ref 3"}),e.jsx("div",{className:"aspect-square border-2 border-dashed border-border-subtle rounded-xl flex items-center justify-center text-ink-tertiary hover:border-ink-primary hover:text-ink-primary transition-colors cursor-pointer",children:e.jsx(ue,{size:20})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full bg-surface rounded-3xl border border-border-subtle shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border-subtle bg-surface/80 backdrop-blur-md z-10 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full animate-pulse shadow-glow"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-ink-primary block",children:"Lumina Intelligence"}),e.jsx("span",{className:"text-[10px] text-ink-tertiary font-medium",children:"AI Creative Director"})]})]}),e.jsx("button",{className:"text-xs text-ink-primary bg-subtle hover:bg-border-subtle border border-transparent px-4 py-2 rounded-full font-bold transition-all",children:"Export Script"})]}),e.jsx("div",{className:"px-6 pb-2 pt-4 flex flex-wrap gap-2 border-b border-border-subtle",children:g.map(p=>e.jsx("button",{onClick:()=>v(p),className:"px-3 py-2 bg-subtle text-xs font-semibold text-ink-primary rounded-full border border-border-subtle hover:border-ink-primary transition-colors",children:p},p))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 bg-app",children:[a.map((p,d)=>e.jsxs("div",{className:`flex ${p.role==="user"?"justify-end":"justify-start items-start gap-4"} animate-in slide-in-from-bottom-2`,children:[p.role==="system"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-surface border border-border-subtle flex items-center justify-center mt-4 flex-shrink-0 shadow-sm text-ink-primary",children:e.jsx(dt,{size:14})}),e.jsx("div",{className:`max-w-[85%] md:max-w-[70%] ${p.role==="user"?"bubble-user":"bubble-ai"}`,children:p.text})]},d)),l&&e.jsxs("div",{className:"flex justify-start items-start gap-4 animate-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-surface border border-border-subtle flex items-center justify-center mt-4 flex-shrink-0 shadow-sm text-ink-primary",children:e.jsx(dt,{size:14})}),e.jsx("div",{className:"bubble-ai shimmer",children:"Thinking..."})]}),e.jsx("div",{ref:c})]}),e.jsx("div",{className:"p-6 bg-surface border-t border-border-subtle",children:e.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[e.jsx("input",{value:s,onChange:p=>n(p.target.value),onKeyDown:p=>p.key==="Enter"&&!p.shiftKey&&v(),placeholder:"Message Lumina...",disabled:l,className:"w-full bg-subtle border border-transparent focus:border-border-subtle focus:bg-surface rounded-2xl px-6 py-4 text-sm outline-none transition-all pl-6 pr-14 font-medium placeholder:text-ink-tertiary text-ink-primary disabled:opacity-50"}),e.jsx("button",{onClick:()=>v(),disabled:l||!s.trim(),className:"absolute right-2 top-2 p-2 bg-ink-primary text-white rounded-xl hover:scale-105 transition-transform shadow-md disabled:opacity-50 disabled:hover:scale-100","aria-label":"Send message",children:e.jsx(fe,{size:18})})]})})]})]})},kr=({projects:r,onSelect:t})=>{const[s,n]=u.useState("all"),[a,o]=u.useState("recent"),l=u.useMemo(()=>Array.from(new Set(r.map(c=>c.status))).filter(Boolean),[r]),h=u.useMemo(()=>{let c=[...r];return s!=="all"&&(c=c.filter(i=>i.status===s)),a==="title"?c.sort((i,v)=>i.title.localeCompare(v.title)):c.sort((i,v)=>v.id.localeCompare(i.id)),c},[r,a,s]);return e.jsxs("div",{className:"pt-12 px-12 max-w-[1600px] mx-auto animate-in fade-in pb-32",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-ink-primary mb-2",children:"Manifests"}),e.jsx("p",{className:"text-ink-secondary text-sm",children:"Active creative engagements."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:s,onChange:c=>n(c.target.value),className:"px-3 py-2 bg-surface border border-border-subtle rounded-xl text-xs font-bold hover:border-ink-primary transition-colors",children:[e.jsx("option",{value:"all",children:"All statuses"}),l.map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:a,onChange:c=>o(c.target.value),className:"px-3 py-2 bg-surface border border-border-subtle rounded-xl text-xs font-bold hover:border-ink-primary transition-colors",children:[e.jsx("option",{value:"recent",children:"Sort: Recent"}),e.jsx("option",{value:"title",children:"Sort: Title"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"group cursor-pointer min-h-[320px] rounded-xl border-2 border-dashed border-border-subtle flex flex-col items-center justify-center hover:border-ink-primary/30 hover:bg-surface/50 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-surface shadow-md flex items-center justify-center text-ink-secondary group-hover:text-ink-primary group-hover:scale-110 transition-all mb-6",children:e.jsx(ue,{size:32})}),e.jsx("span",{className:"font-medium text-ink-secondary group-hover:text-ink-primary",children:"Initiate Manifest"})]}),h.map(c=>e.jsxs(oe,{onClick:()=>t(c),className:"min-h-[320px] flex flex-col justify-between group cursor-pointer hover:border-ink-primary/10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("span",{className:"px-3 py-1 bg-subtle border border-border-subtle rounded-lg text-[10px] uppercase font-bold tracking-wider text-ink-secondary flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," ",c.status]}),e.jsx("button",{className:"text-ink-tertiary hover:text-ink-primary transition-colors","aria-label":"More options",children:e.jsx(xs,{size:20})})]}),e.jsx("h3",{className:"text-3xl font-bold text-ink-primary mb-3 group-hover:translate-x-1 transition-transform kinetic-text",children:c.title}),e.jsx("p",{className:"text-ink-secondary text-sm line-clamp-2 leading-relaxed",children:c.description})]}),e.jsxs("div",{className:"pt-8 border-t border-border-subtle flex justify-between items-end",children:[e.jsxs("div",{className:"flex -space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-subtle border-2 border-surface"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-border-subtle border-2 border-surface"})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-ink-primary text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transform translate-y-2 group-hover:translate-y-0 transition-all duration-300 shadow-xl",children:e.jsx(fe,{size:20})})]})]},c.id))]})]})},Sr="https://your-firebase-domain.web.app/api/v1";function Mt(r,t){return D(this,null,function*(){const s=yield fetch(`${Sr}${r}`,j({headers:j({"Content-Type":"application/json"},t.headers||{})},t));if(!s.ok){const n=yield s.text().catch(()=>"");throw new Error(`Request failed (${s.status} ${s.statusText}) ${n?`- ${n}`:""}`)}return s.json()})}function Cr(r){return Mt("/transcripts",{method:"POST",body:JSON.stringify(r)})}function Ar(r){return Mt(`/transcripts/${r}`,{method:"GET"})}const Er=["native","auto","generate"];function Dr(){const[r,t]=u.useState({url:"",lang:"en",text:!0,mode:"auto"}),[s,n]=u.useState(!1),[a,o]=u.useState(!1),[l,h]=u.useState(null),[c,i]=u.useState(null),[v,g]=u.useState(null);u.useEffect(()=>{let m;return v&&(o(!0),m=setInterval(()=>D(null,null,function*(){try{const f=yield Ar(v);h(f),(f.status==="done"||f.content)&&(clearInterval(m),o(!1),g(null))}catch(f){i(f.message),clearInterval(m),o(!1),g(null)}}),3e3)),()=>{m&&clearInterval(m)}},[v]);const p=m=>D(null,null,function*(){m.preventDefault(),n(!0),i(null),h(null);try{const f=yield Cr(r);h(f),f.jobId&&!f.content&&g(f.jobId)}catch(f){i(f.message)}finally{n(!1)}}),d=u.useMemo(()=>a?"Polling supadataâ€¦":l?l.status==="done"?"Ready":l.status:null,[a,l]);return e.jsxs("div",{className:"p-10 space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.28em] text-ink-tertiary mb-2",children:"Transcripts"}),e.jsx("h1",{className:"text-3xl font-bold text-ink-primary tracking-tight",children:"Pull transcripts from social, video, or files"}),e.jsx("p",{className:"text-sm text-ink-secondary mt-2 max-w-3xl",children:"Paste any supported URL (YouTube, TikTok, Instagram, X, file links) and let Supadata return structured transcripts. Jobs that need more time are polled automatically."})]})}),e.jsxs("form",{onSubmit:p,className:"rounded-2xl border border-border-subtle bg-surface shadow-card p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-ink-tertiary mb-2",children:"Source URL"}),e.jsx("input",{type:"url",required:!0,value:r.url,onChange:m=>t(f=>E(j({},f),{url:m.target.value})),placeholder:"https://x.com/SpaceX/status/1481651037291225113",className:"input"})]}),e.jsxs("div",{className:"col-span-6 md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-ink-tertiary mb-2",children:"Language"}),e.jsx("input",{type:"text",value:r.lang||"",onChange:m=>t(f=>E(j({},f),{lang:m.target.value})),placeholder:"en",className:"input"})]}),e.jsxs("div",{className:"col-span-6 md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-ink-tertiary mb-2",children:"Mode"}),e.jsx("select",{className:"input",value:r.mode,onChange:m=>t(f=>E(j({},f),{mode:m.target.value})),children:Er.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{className:"col-span-6 md:col-span-1 flex items-center gap-2",children:[e.jsx("input",{id:"text",type:"checkbox",checked:r.text,onChange:m=>t(f=>E(j({},f),{text:m.target.checked})),className:"w-4 h-4 accent-primary"}),e.jsx("label",{htmlFor:"text",className:"text-sm text-ink-secondary",children:"Plain text"})]}),e.jsx("div",{className:"col-span-6 md:col-span-1",children:e.jsxs("button",{type:"submit",className:"btn-primary w-full flex items-center justify-center gap-2",disabled:s,children:[s?e.jsx(Pe,{className:"animate-spin",size:16}):e.jsx(fs,{size:16}),"Fetch"]})})]}),d&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary-tint text-xs font-semibold text-primary",children:[a?e.jsx(ps,{className:"animate-spin",size:14}):null,d]}),c&&e.jsx("div",{className:"rounded-xl bg-state-danger-bg text-state-danger px-4 py-3 text-sm",children:c})]}),e.jsxs("div",{className:"rounded-2xl border border-border-subtle bg-surface shadow-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-ink-tertiary uppercase tracking-[0.24em]",children:"Output"}),e.jsx("h3",{className:"text-lg font-bold text-ink-primary",children:l!=null&&l.lang?`Transcript (${l.lang})`:"Awaiting transcript"})]}),v&&e.jsxs("span",{className:"text-xs text-ink-tertiary flex items-center gap-2",children:[e.jsx(Pe,{className:"animate-spin",size:14}),"Job ",v]})]}),l!=null&&l.content?e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-relaxed text-ink-secondary bg-subtle p-4 rounded-xl border border-border-subtle max-h-[480px] overflow-y-auto custom-scrollbar",children:l.content}):e.jsxs("div",{className:"flex items-center justify-center flex-col text-ink-tertiary gap-3 py-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-subtle flex items-center justify-center border border-border-subtle",children:e.jsx(bs,{size:22})}),e.jsx("div",{className:"text-sm text-center",children:"No transcript yet. Submit a URL to fetch from Supadata."})]})]})]})}function Tr(){const[r,t]=u.useState("dashboard"),[s,n]=u.useState(null),[a,o]=u.useState(!1),[l,h]=u.useState("Creative direction for a kinetic, zero-gravity inspired brand world."),[c]=u.useState([{id:"1",title:"Nebula Phase II",client:"AeroSpace",status:"In Progress",description:"Rebrand focusing on kinetic typography and zero-gravity aesthetics.",tone:["Ethereal","Technical"]}]),[i,v]=u.useState([{id:"mb-1",url:"https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=800",tags:["futuristic","neon"],moods:["bold","cinematic"],colors:["#2463E6","#18C9AE"],shotType:"wide",uploadedAt:new Date().toISOString()},{id:"mb-2",url:"https://images.unsplash.com/photo-1489515217757-5fd1be406fef?w=800",tags:["kinetic","typography"],moods:["technical","refined"],colors:["#101118","#FFFFFF"],shotType:"macro",uploadedAt:new Date().toISOString()}]),[g]=u.useState([{id:"f-1",name:"Maya Chen",role:"Art Director",availability:"Available",rate:120,skills:["Art Direction","Motion","Typography"],location:"Los Angeles",rating:4.9,bio:"Led immersive brand campaigns across tech and media.",portfolio:"https://portfolio.example.com/maya"},{id:"f-2",name:"Leo Martinez",role:"Creative Technologist",availability:"Limited",rate:140,skills:["WebGL","Three.js","Prototyping"],location:"New York",rating:4.8,bio:"Builds interactive brand experiences with realtime graphics."}]),p=w=>{n(w),t("projects"),o(!1)},d=w=>{v(S=>S.filter(I=>I.id!==w))},m=()=>{if(!s)return null;const w=s.status||"Active",S=w==="In Progress"?"bg-blue-100 text-blue-700":w==="Blocked"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700";return e.jsxs("div",{className:"sticky top-0 z-10 bg-app/95 backdrop-blur border-b border-border-subtle px-10 py-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-ink-primary text-white flex items-center justify-center font-bold",children:s.title.slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-ink-tertiary uppercase",children:"Project Context"}),e.jsx("span",{className:`text-[11px] px-2 py-1 rounded-full font-semibold ${S}`,children:w})]}),e.jsx("div",{className:"text-lg font-bold text-ink-primary",children:s.title})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-2 text-sm rounded-xl border border-border-subtle hover:border-ink-primary transition-colors",onClick:()=>o(!0),children:"Open Writer's Room"}),e.jsx("button",{className:"px-3 py-2 text-sm rounded-xl border border-border-subtle hover:border-ink-primary transition-colors",onClick:()=>t("moodboard"),children:"View Moodboard"})]})]})},f=()=>{if(s)return a?e.jsx(Nt,{project:s,onBack:()=>{o(!1),t("projects")}}):r==="moodboard"?e.jsx(yt,{projectId:s.id,items:i,onItemDelete:d}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(Gs,{projectId:s.id,projectTitle:s.title,brief:l,onBriefChange:h,onNavigateToWritersRoom:()=>{o(!0),t("writers-room")},onNavigateToMoodboard:()=>t("moodboard")})]});switch(r){case"dashboard":return e.jsx(Nr,{onNavigateToGallery:()=>t("moodboard")});case"projects":return e.jsx(kr,{projects:c,onSelect:p});case"writers-room":return e.jsx(Nt,{project:null,onBack:()=>t("dashboard")});case"moodboard":return e.jsx(yt,{projectId:c[0].id,items:i,onItemDelete:d});case"roster":return e.jsx(Ys,{freelancers:g,onSelect:()=>t("writers-room")});case"knowledge-base":return e.jsx(dr,{});case"transcripts":return e.jsx(Dr,{});default:return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-ink-secondary",children:[e.jsx("div",{className:"w-20 h-20 bg-subtle rounded-xl flex items-center justify-center mb-6",children:e.jsx(gs,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-ink-primary mb-1",children:"Module Locked"}),e.jsx("p",{className:"text-sm",children:"This sector is currently under construction."})]})}};return e.jsxs("div",{className:"w-full h-screen bg-app flex relative overflow-hidden text-ink-primary",children:[e.jsx(nr,{activeTab:r,setActiveTab:w=>{t(w),n(null)}}),e.jsx("main",{className:"flex-1 ml-72 h-full overflow-y-auto relative z-0",children:f()}),e.jsx(Qs,{})]})}class Rr extends y.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Application Error:",t,s)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-app flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md mx-auto text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-xl font-bold text-ink-primary mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-ink-secondary mb-4",children:"We encountered an unexpected error. Please refresh the page or try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:"Refresh Page"}),this.state.error&&e.jsxs("details",{className:"mt-4 text-left",children:[e.jsx("summary",{className:"text-sm text-ink-tertiary cursor-pointer",children:"Error Details"}),e.jsx("pre",{className:"text-xs text-red-600 mt-2 p-2 bg-red-50 rounded overflow-auto",children:this.state.error.toString()})]})]})}):this.props.children}}const Ir=y.createContext(void 0),Pr=({children:r})=>{const[t,s]=y.useState([]),n=y.useCallback(o=>{var i;const l=Math.random().toString(36).substr(2,9),h=E(j({},o),{id:l});s(v=>[...v,h]);const c=(i=o.duration)!=null?i:5e3;setTimeout(()=>{s(v=>v.filter(g=>g.id!==l))},c)},[]),a=y.useCallback(o=>{s(l=>l.filter(h=>h.id!==o))},[]);return e.jsxs(Ir.Provider,{value:{addToast:n,removeToast:a,toasts:t},children:[r,e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(o=>e.jsx("div",{className:`
              px-4 py-3 rounded-lg shadow-lg border max-w-sm
              ${o.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":""}
              ${o.type==="error"?"bg-red-50 border-red-200 text-red-800":""}
              ${o.type==="warning"?"bg-amber-50 border-amber-200 text-amber-800":""}
              ${o.type==="info"?"bg-blue-50 border-blue-200 text-blue-800":""}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:o.message}),e.jsx("button",{onClick:()=>a(o.id),className:"ml-2 text-current opacity-70 hover:opacity-100",children:"Ã—"})]})},o.id))})]})},Lr=y.createContext(void 0),$r=({children:r})=>{const[t,s]=y.useState("light"),n=y.useCallback(()=>{s(a=>a==="light"?"dark":"light")},[]);return y.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(Lr.Provider,{value:{theme:t,toggleTheme:n},children:r})},_r=({children:r})=>e.jsx(y.StrictMode,{children:e.jsx(Rr,{children:e.jsx(Gt,{children:e.jsx($r,{children:e.jsx(Pr,{children:e.jsx(sr,{children:r})})})})})}),Ot=document.getElementById("root");if(!Ot)throw new Error("Could not find root element to mount to");const Fr=js.createRoot(Ot);Fr.render(e.jsx(_r,{children:e.jsx(Tr,{})}))});export default Mr();
