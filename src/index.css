@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles */
@layer base {
  body {
    @apply bg-app text-ink-primary;
  }
  
  /* Prevent CLS from images */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Reserve space for lazy-loaded content */
  [loading="lazy"] {
    min-height: 1px;
  }
}

/* Custom component styles */
@layer components {
  /* Skeleton loading states to prevent CLS */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }
  
  /* Fixed aspect ratios to prevent layout shift */
  .aspect-ratio-square {
    aspect-ratio: 1 / 1;
  }
  
  .aspect-ratio-video {
    aspect-ratio: 16 / 9;
  }
  
  .aspect-ratio-portrait {
    aspect-ratio: 3 / 4;
  }
}

/* Custom utility styles */
@layer utilities {
  /* Content visibility for performance */
  .content-visibility-auto {
    content-visibility: auto;
  }

  /* Prevent layout shift on hover transforms */
  .transform-gpu {
    transform: translateZ(0);
    will-change: transform;
  }
}

/* Fluid Design System Animations */
@keyframes morphing-pulse {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.02);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fluid-slide {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes glass-shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

@keyframes metaball-merge {
  0% {
    clip-path: polygon(
      0% 50%, 0% 0%, 50% 0%, 50% 0%, 100% 0%, 100% 50%,
      100% 100%, 50% 100%, 50% 100%, 0% 100%
    );
  }
  100% {
    clip-path: circle(50%);
  }
}

/* Animation utilities */
.animate-morphing-pulse {
  animation: morphing-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-fluid-slide {
  animation: fluid-slide 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-glass-shimmer {
  animation: glass-shimmer 3s linear infinite;
  background-size: 1000px 100%;
}

.animate-metaball-merge {
  animation: metaball-merge 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Glass morphism utilities */
.glass-blur {
  backdrop-filter: blur(20px) saturate(1.8);
  background-color: rgba(255, 255, 255, 0.75);
}

.glass-blur-strong {
  backdrop-filter: blur(30px) saturate(2);
  background-color: rgba(255, 255, 255, 0.8);
}

/* Fluid shape utilities */
.fluid-pill {
  border-radius: 9999px;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.fluid-square {
  border-radius: 24px;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Haptic-inspired visual feedback */
.haptic-click {
  transform: scale(0.98);
  opacity: 0.9;
}

.haptic-click:active {
  animation: haptic-feedback 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes haptic-feedback {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
}
